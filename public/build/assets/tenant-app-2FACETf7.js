import{Q as qn}from"./quill.snow-CL2RSb_c.js";import{g as Xn}from"./_commonjsHelpers-Cpj98o6Y.js";function pn(o){return o&&o.__esModule?o.default:o}function Et(o,e,n){return e in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}var _0,je,gn,Zt,wn,U0,s0={},xn=[],Un=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Ot(o,e){for(var n in e)o[n]=e[n];return o}function Sn(o){var e=o.parentNode;e&&e.removeChild(o)}function E0(o,e,n){var a,c,u,f={};for(u in e)u=="key"?a=e[u]:u=="ref"?c=e[u]:f[u]=e[u];if(arguments.length>2&&(f.children=arguments.length>3?_0.call(arguments,2):n),typeof o=="function"&&o.defaultProps!=null)for(u in o.defaultProps)f[u]===void 0&&(f[u]=o.defaultProps[u]);return i0(o,f,a,c,null)}function i0(o,e,n,a,c){var u={type:o,props:e,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:c??++gn};return c==null&&je.vnode!=null&&je.vnode(u),u}function $t(){return{current:null}}function Xt(o){return o.children}function Bt(o,e){this.props=o,this.context=e}function Ut(o,e){if(e==null)return o.__?Ut(o.__,o.__.__k.indexOf(o)+1):null;for(var n;e<o.__k.length;e++)if((n=o.__k[e])!=null&&n.__e!=null)return n.__e;return typeof o.type=="function"?Ut(o):null}function yn(o){var e,n;if((o=o.__)!=null&&o.__c!=null){for(o.__e=o.__c.base=null,e=0;e<o.__k.length;e++)if((n=o.__k[e])!=null&&n.__e!=null){o.__e=o.__c.base=n.__e;break}return yn(o)}}function W0(o){(!o.__d&&(o.__d=!0)&&Zt.push(o)&&!o0.__r++||U0!==je.debounceRendering)&&((U0=je.debounceRendering)||wn)(o0)}function o0(){for(var o;o0.__r=Zt.length;)o=Zt.sort(function(e,n){return e.__v.__b-n.__v.__b}),Zt=[],o.some(function(e){var n,a,c,u,f,M;e.__d&&(f=(u=(n=e).__v).__e,(M=n.__P)&&(a=[],(c=Ot({},u)).__v=u.__v+1,I0(M,u,c,n.__n,M.ownerSVGElement!==void 0,u.__h!=null?[f]:null,a,f??Ut(u),u.__h),Tn(a,u),u.__e!=f&&yn(u)))})}function Cn(o,e,n,a,c,u,f,M,j,V){var A,de,J,_e,z,ee,re,Se=a&&a.__k||xn,te=Se.length;for(n.__k=[],A=0;A<e.length;A++)if((_e=n.__k[A]=(_e=e[A])==null||typeof _e=="boolean"?null:typeof _e=="string"||typeof _e=="number"||typeof _e=="bigint"?i0(null,_e,null,null,_e):Array.isArray(_e)?i0(Xt,{children:_e},null,null,null):_e.__b>0?i0(_e.type,_e.props,_e.key,null,_e.__v):_e)!=null){if(_e.__=n,_e.__b=n.__b+1,(J=Se[A])===null||J&&_e.key==J.key&&_e.type===J.type)Se[A]=void 0;else for(de=0;de<te;de++){if((J=Se[de])&&_e.key==J.key&&_e.type===J.type){Se[de]=void 0;break}J=null}I0(o,_e,J=J||s0,c,u,f,M,j,V),z=_e.__e,(de=_e.ref)&&J.ref!=de&&(re||(re=[]),J.ref&&re.push(J.ref,null,_e),re.push(de,_e.__c||z,_e)),z!=null?(ee==null&&(ee=z),typeof _e.type=="function"&&_e.__k===J.__k?_e.__d=j=kn(_e,j,o):j=Mn(o,_e,J,Se,z,j),typeof n.type=="function"&&(n.__d=j)):j&&J.__e==j&&j.parentNode!=o&&(j=Ut(J))}for(n.__e=ee,A=te;A--;)Se[A]!=null&&(typeof n.type=="function"&&Se[A].__e!=null&&Se[A].__e==n.__d&&(n.__d=Ut(a,A+1)),An(Se[A],Se[A]));if(re)for(A=0;A<re.length;A++)En(re[A],re[++A],re[++A])}function kn(o,e,n){for(var a,c=o.__k,u=0;c&&u<c.length;u++)(a=c[u])&&(a.__=o,e=typeof a.type=="function"?kn(a,e,n):Mn(n,a,a,c,a.__e,e));return e}function l0(o,e){return e=e||[],o==null||typeof o=="boolean"||(Array.isArray(o)?o.some(function(n){l0(n,e)}):e.push(o)),e}function Mn(o,e,n,a,c,u){var f,M,j;if(e.__d!==void 0)f=e.__d,e.__d=void 0;else if(n==null||c!=u||c.parentNode==null)e:if(u==null||u.parentNode!==o)o.appendChild(c),f=null;else{for(M=u,j=0;(M=M.nextSibling)&&j<a.length;j+=2)if(M==c)break e;o.insertBefore(c,u),f=u}return f!==void 0?f:c.nextSibling}function Wn(o,e,n,a,c){var u;for(u in n)u==="children"||u==="key"||u in e||c0(o,u,null,n[u],a);for(u in e)c&&typeof e[u]!="function"||u==="children"||u==="key"||u==="value"||u==="checked"||n[u]===e[u]||c0(o,u,e[u],n[u],a)}function Y0(o,e,n){e[0]==="-"?o.setProperty(e,n):o[e]=n==null?"":typeof n!="number"||Un.test(e)?n:n+"px"}function c0(o,e,n,a,c){var u;e:if(e==="style")if(typeof n=="string")o.style.cssText=n;else{if(typeof a=="string"&&(o.style.cssText=a=""),a)for(e in a)n&&e in n||Y0(o.style,e,"");if(n)for(e in n)a&&n[e]===a[e]||Y0(o.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")u=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in o?e.toLowerCase().slice(2):e.slice(2),o.l||(o.l={}),o.l[e+u]=n,n?a||o.addEventListener(e,u?K0:G0,u):o.removeEventListener(e,u?K0:G0,u);else if(e!=="dangerouslySetInnerHTML"){if(c)e=e.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in o)try{o[e]=n??"";break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||e[0]==="a"&&e[1]==="r")?o.setAttribute(e,n):o.removeAttribute(e))}}function G0(o){this.l[o.type+!1](je.event?je.event(o):o)}function K0(o){this.l[o.type+!0](je.event?je.event(o):o)}function I0(o,e,n,a,c,u,f,M,j){var V,A,de,J,_e,z,ee,re,Se,te,Ce,Be=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(j=n.__h,M=e.__e=n.__e,e.__h=null,u=[M]),(V=je.__b)&&V(e);try{e:if(typeof Be=="function"){if(re=e.props,Se=(V=Be.contextType)&&a[V.__c],te=V?Se?Se.props.value:V.__:a,n.__c?ee=(A=e.__c=n.__c).__=A.__E:("prototype"in Be&&Be.prototype.render?e.__c=A=new Be(re,te):(e.__c=A=new Bt(re,te),A.constructor=Be,A.render=Gn),Se&&Se.sub(A),A.props=re,A.state||(A.state={}),A.context=te,A.__n=a,de=A.__d=!0,A.__h=[]),A.__s==null&&(A.__s=A.state),Be.getDerivedStateFromProps!=null&&(A.__s==A.state&&(A.__s=Ot({},A.__s)),Ot(A.__s,Be.getDerivedStateFromProps(re,A.__s))),J=A.props,_e=A.state,de)Be.getDerivedStateFromProps==null&&A.componentWillMount!=null&&A.componentWillMount(),A.componentDidMount!=null&&A.__h.push(A.componentDidMount);else{if(Be.getDerivedStateFromProps==null&&re!==J&&A.componentWillReceiveProps!=null&&A.componentWillReceiveProps(re,te),!A.__e&&A.shouldComponentUpdate!=null&&A.shouldComponentUpdate(re,A.__s,te)===!1||e.__v===n.__v){A.props=re,A.state=A.__s,e.__v!==n.__v&&(A.__d=!1),A.__v=e,e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(Ve){Ve&&(Ve.__=e)}),A.__h.length&&f.push(A);break e}A.componentWillUpdate!=null&&A.componentWillUpdate(re,A.__s,te),A.componentDidUpdate!=null&&A.__h.push(function(){A.componentDidUpdate(J,_e,z)})}A.context=te,A.props=re,A.state=A.__s,(V=je.__r)&&V(e),A.__d=!1,A.__v=e,A.__P=o,V=A.render(A.props,A.state,A.context),A.state=A.__s,A.getChildContext!=null&&(a=Ot(Ot({},a),A.getChildContext())),de||A.getSnapshotBeforeUpdate==null||(z=A.getSnapshotBeforeUpdate(J,_e)),Ce=V!=null&&V.type===Xt&&V.key==null?V.props.children:V,Cn(o,Array.isArray(Ce)?Ce:[Ce],e,n,a,c,u,f,M,j),A.base=e.__e,e.__h=null,A.__h.length&&f.push(A),ee&&(A.__E=A.__=null),A.__e=!1}else u==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=Yn(n.__e,e,n,a,c,u,f,j);(V=je.diffed)&&V(e)}catch(Ve){e.__v=null,(j||u!=null)&&(e.__e=M,e.__h=!!j,u[u.indexOf(M)]=null),je.__e(Ve,e,n)}}function Tn(o,e){je.__c&&je.__c(e,o),o.some(function(n){try{o=n.__h,n.__h=[],o.some(function(a){a.call(n)})}catch(a){je.__e(a,n.__v)}})}function Yn(o,e,n,a,c,u,f,M){var j,V,A,de=n.props,J=e.props,_e=e.type,z=0;if(_e==="svg"&&(c=!0),u!=null){for(;z<u.length;z++)if((j=u[z])&&"setAttribute"in j==!!_e&&(_e?j.localName===_e:j.nodeType===3)){o=j,u[z]=null;break}}if(o==null){if(_e===null)return document.createTextNode(J);o=c?document.createElementNS("http://www.w3.org/2000/svg",_e):document.createElement(_e,J.is&&J),u=null,M=!1}if(_e===null)de===J||M&&o.data===J||(o.data=J);else{if(u=u&&_0.call(o.childNodes),V=(de=n.props||s0).dangerouslySetInnerHTML,A=J.dangerouslySetInnerHTML,!M){if(u!=null)for(de={},z=0;z<o.attributes.length;z++)de[o.attributes[z].name]=o.attributes[z].value;(A||V)&&(A&&(V&&A.__html==V.__html||A.__html===o.innerHTML)||(o.innerHTML=A&&A.__html||""))}if(Wn(o,J,de,c,M),A)e.__k=[];else if(z=e.props.children,Cn(o,Array.isArray(z)?z:[z],e,n,a,c&&_e!=="foreignObject",u,f,u?u[0]:n.__k&&Ut(n,0),M),u!=null)for(z=u.length;z--;)u[z]!=null&&Sn(u[z]);M||("value"in J&&(z=J.value)!==void 0&&(z!==de.value||z!==o.value||_e==="progress"&&!z)&&c0(o,"value",z,de.value,!1),"checked"in J&&(z=J.checked)!==void 0&&z!==o.checked&&c0(o,"checked",z,de.checked,!1))}return o}function En(o,e,n){try{typeof o=="function"?o(e):o.current=e}catch(a){je.__e(a,n)}}function An(o,e,n){var a,c;if(je.unmount&&je.unmount(o),(a=o.ref)&&(a.current&&a.current!==o.__e||En(a,null,e)),(a=o.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(u){je.__e(u,e)}a.base=a.__P=null}if(a=o.__k)for(c=0;c<a.length;c++)a[c]&&An(a[c],e,typeof o.type!="function");n||o.__e==null||Sn(o.__e),o.__e=o.__d=void 0}function Gn(o,e,n){return this.constructor(o,n)}function Rn(o,e,n){var a,c,u;je.__&&je.__(o,e),c=(a=typeof n=="function")?null:n&&n.__k||e.__k,u=[],I0(e,o=(!a&&n||e).__k=E0(Xt,null,[o]),c||s0,s0,e.ownerSVGElement!==void 0,!a&&n?[n]:c?null:e.firstChild?_0.call(e.childNodes):null,u,!a&&n?n:c?c.__e:e.firstChild,a),Tn(u,o)}_0=xn.slice,je={__e:function(o,e){for(var n,a,c;e=e.__;)if((n=e.__c)&&!n.__)try{if((a=n.constructor)&&a.getDerivedStateFromError!=null&&(n.setState(a.getDerivedStateFromError(o)),c=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(o),c=n.__d),c)return n.__E=n}catch(u){o=u}throw o}},gn=0,Bt.prototype.setState=function(o,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ot({},this.state),typeof o=="function"&&(o=o(Ot({},n),this.props)),o&&Ot(n,o),o!=null&&this.__v&&(e&&this.__h.push(e),W0(this))},Bt.prototype.forceUpdate=function(o){this.__v&&(this.__e=!0,o&&this.__h.push(o),W0(this))},Bt.prototype.render=Xt,Zt=[],wn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,o0.__r=0;var Kn=0;function oe(o,e,n,a,c){var u,f,M={};for(f in e)f=="ref"?u=e[f]:M[f]=e[f];var j={type:o,props:M,key:n,ref:u,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Kn,__source:a,__self:c};if(typeof o=="function"&&(u=o.defaultProps))for(f in u)M[f]===void 0&&(M[f]=u[f]);return je.vnode&&je.vnode(j),j}function Zn(o,e){try{window.localStorage[`emoji-mart.${o}`]=JSON.stringify(e)}catch{}}function Qn(o){try{const e=window.localStorage[`emoji-mart.${o}`];if(e)return JSON.parse(e)}catch{}}var Nt={set:Zn,get:Qn};const S0=new Map,Jn=[{v:15,emoji:"🫨"},{v:14,emoji:"🫠"},{v:13.1,emoji:"😶‍🌫️"},{v:13,emoji:"🥸"},{v:12.1,emoji:"🧑‍🦰"},{v:12,emoji:"🥱"},{v:11,emoji:"🥰"},{v:5,emoji:"🤩"},{v:4,emoji:"👱‍♀️"},{v:3,emoji:"🤣"},{v:2,emoji:"👋🏻"},{v:1,emoji:"🙃"}];function er(){for(const{v:o,emoji:e}of Jn)if(Bn(e))return o}function tr(){return!Bn("🇨🇦")}function Bn(o){if(S0.has(o))return S0.get(o);const e=nr(o);return S0.set(o,e),e}const nr=(()=>{let o=null;try{navigator.userAgent.includes("jsdom")||(o=document.createElement("canvas").getContext("2d",{willReadFrequently:!0}))}catch{}if(!o)return()=>!1;const e=25,n=20,a=Math.floor(e/2);return o.font=a+"px Arial, Sans-Serif",o.textBaseline="top",o.canvas.width=n*2,o.canvas.height=e,c=>{o.clearRect(0,0,n*2,e),o.fillStyle="#FF0000",o.fillText(c,0,22),o.fillStyle="#0000FF",o.fillText(c,n,22);const u=o.getImageData(0,0,n,e).data,f=u.length;let M=0;for(;M<f&&!u[M+3];M+=4);if(M>=f)return!1;const j=n+M/4%n,V=Math.floor(M/4/n),A=o.getImageData(j,V,1,1).data;return!(u[M]!==A[0]||u[M+2]!==A[2]||o.measureText(c).width>=n)}})();var Z0={latestVersion:er,noCountryFlags:tr};const A0=["+1","grinning","kissing_heart","heart_eyes","laughing","stuck_out_tongue_winking_eye","sweat_smile","joy","scream","disappointed","unamused","weary","sob","sunglasses","heart"];let xt=null;function rr(o){xt||(xt=Nt.get("frequently")||{});const e=o.id||o;e&&(xt[e]||(xt[e]=0),xt[e]+=1,Nt.set("last",e),Nt.set("frequently",xt))}function ir({maxFrequentRows:o,perLine:e}){if(!o)return[];xt||(xt=Nt.get("frequently"));let n=[];if(!xt){xt={};for(let u in A0.slice(0,e)){const f=A0[u];xt[f]=e-u,n.push(f)}return n}const a=o*e,c=Nt.get("last");for(let u in xt)n.push(u);if(n.sort((u,f)=>{const M=xt[f],j=xt[u];return M==j?u.localeCompare(f):M-j}),n.length>a){const u=n.slice(a);n=n.slice(0,a);for(let f of u)f!=c&&delete xt[f];c&&n.indexOf(c)==-1&&(delete xt[n[n.length-1]],n.splice(-1,1,c)),Nt.set("frequently",xt)}return n}var Ln={add:rr,get:ir,DEFAULTS:A0},$n={};$n=JSON.parse('{"search":"Search","search_no_results_1":"Oh no!","search_no_results_2":"That emoji couldn’t be found","pick":"Pick an emoji…","add_custom":"Add custom emoji","categories":{"activity":"Activity","custom":"Custom","flags":"Flags","foods":"Food & Drink","frequent":"Frequently used","nature":"Animals & Nature","objects":"Objects","people":"Smileys & People","places":"Travel & Places","search":"Search Results","symbols":"Symbols"},"skins":{"1":"Default","2":"Light","3":"Medium-Light","4":"Medium","5":"Medium-Dark","6":"Dark","choose":"Choose default skin tone"}}');var It={autoFocus:{value:!1},dynamicWidth:{value:!1},emojiButtonColors:{value:null},emojiButtonRadius:{value:"100%"},emojiButtonSize:{value:36},emojiSize:{value:24},emojiVersion:{value:15,choices:[1,2,3,4,5,11,12,12.1,13,13.1,14,15]},exceptEmojis:{value:[]},icons:{value:"auto",choices:["auto","outline","solid"]},locale:{value:"en",choices:["en","ar","be","cs","de","es","fa","fi","fr","hi","it","ja","ko","nl","pl","pt","ru","sa","tr","uk","vi","zh"]},maxFrequentRows:{value:4},navPosition:{value:"top",choices:["top","bottom","none"]},noCountryFlags:{value:!1},noResultsEmoji:{value:null},perLine:{value:9},previewEmoji:{value:null},previewPosition:{value:"bottom",choices:["top","bottom","none"]},searchPosition:{value:"sticky",choices:["sticky","static","none"]},set:{value:"native",choices:["native","apple","facebook","google","twitter"]},skin:{value:1,choices:[1,2,3,4,5,6]},skinTonePosition:{value:"preview",choices:["preview","search","none"]},theme:{value:"auto",choices:["auto","light","dark"]},categories:null,categoryIcons:null,custom:null,data:null,i18n:null,getImageURL:null,getSpritesheetURL:null,onAddCustomEmoji:null,onClickOutside:null,onEmojiSelect:null,stickySearch:{deprecated:!0,value:!0}};let St=null,Ke=null;const y0={};async function Q0(o){if(y0[o])return y0[o];const n=await(await fetch(o)).json();return y0[o]=n,n}let C0=null,In=null,Dn=!1;function d0(o,{caller:e}={}){return C0||(C0=new Promise(n=>{In=n})),o?ar(o):e&&!Dn&&console.warn(`\`${e}\` requires data to be initialized first. Promise will be pending until \`init\` is called.`),C0}async function ar(o){Dn=!0;let{emojiVersion:e,set:n,locale:a}=o;if(e||(e=It.emojiVersion.value),n||(n=It.set.value),a||(a=It.locale.value),Ke)Ke.categories=Ke.categories.filter(j=>!j.name);else{Ke=(typeof o.data=="function"?await o.data():o.data)||await Q0(`https://cdn.jsdelivr.net/npm/@emoji-mart/data@latest/sets/${e}/${n}.json`),Ke.emoticons={},Ke.natives={},Ke.categories.unshift({id:"frequent",emojis:[]});for(const j in Ke.aliases){const V=Ke.aliases[j],A=Ke.emojis[V];A&&(A.aliases||(A.aliases=[]),A.aliases.push(j))}Ke.originalCategories=Ke.categories}if(St=(typeof o.i18n=="function"?await o.i18n():o.i18n)||(a=="en"?pn($n):await Q0(`https://cdn.jsdelivr.net/npm/@emoji-mart/data@latest/i18n/${a}.json`)),o.custom)for(let j in o.custom){j=parseInt(j);const V=o.custom[j],A=o.custom[j-1];if(!(!V.emojis||!V.emojis.length)){V.id||(V.id=`custom_${j+1}`),V.name||(V.name=St.categories.custom),A&&!V.icon&&(V.target=A.target||A),Ke.categories.push(V);for(const de of V.emojis)Ke.emojis[de.id]=de}}o.categories&&(Ke.categories=Ke.originalCategories.filter(j=>o.categories.indexOf(j.id)!=-1).sort((j,V)=>{const A=o.categories.indexOf(j.id),de=o.categories.indexOf(V.id);return A-de}));let c=null,u=null;n=="native"&&(c=Z0.latestVersion(),u=o.noCountryFlags||Z0.noCountryFlags());let f=Ke.categories.length,M=!1;for(;f--;){const j=Ke.categories[f];if(j.id=="frequent"){let{maxFrequentRows:de,perLine:J}=o;de=de>=0?de:It.maxFrequentRows.value,J||(J=It.perLine.value),j.emojis=Ln.get({maxFrequentRows:de,perLine:J})}if(!j.emojis||!j.emojis.length){Ke.categories.splice(f,1);continue}const{categoryIcons:V}=o;if(V){const de=V[j.id];de&&!j.icon&&(j.icon=de)}let A=j.emojis.length;for(;A--;){const de=j.emojis[A],J=de.id?de:Ke.emojis[de],_e=()=>{j.emojis.splice(A,1)};if(!J||o.exceptEmojis&&o.exceptEmojis.includes(J.id)){_e();continue}if(c&&J.version>c){_e();continue}if(u&&j.id=="flags"&&!ur.includes(J.id)){_e();continue}if(!J.search){if(M=!0,J.search=","+[[J.id,!1],[J.name,!0],[J.keywords,!1],[J.emoticons,!1]].map(([ee,re])=>{if(ee)return(Array.isArray(ee)?ee:[ee]).map(Se=>(re?Se.split(/[-|_|\s]+/):[Se]).map(te=>te.toLowerCase())).flat()}).flat().filter(ee=>ee&&ee.trim()).join(","),J.emoticons)for(const ee of J.emoticons)Ke.emoticons[ee]||(Ke.emoticons[ee]=J.id);let z=0;for(const ee of J.skins){if(!ee)continue;z++;const{native:re}=ee;re&&(Ke.natives[re]=J.id,J.search+=`,${re}`);const Se=z==1?"":`:skin-tone-${z}:`;ee.shortcodes=`:${J.id}:${Se}`}}}}M&&qt.reset(),In()}function Hn(o,e,n){o||(o={});const a={};for(let c in e)a[c]=On(c,o,e,n);return a}function On(o,e,n,a){const c=n[o];let u=a&&a.getAttribute(o)||(e[o]!=null&&e[o]!=null?e[o]:null);return c&&(u!=null&&c.value&&typeof c.value!=typeof u&&(typeof c.value=="boolean"?u=u!="false":u=c.value.constructor(u)),c.transform&&u&&(u=c.transform(u)),(u==null||c.choices&&c.choices.indexOf(u)==-1)&&(u=c.value)),u}const sr=/^(?:\:([^\:]+)\:)(?:\:skin-tone-(\d)\:)?$/;let R0=null;function or(o){return o.id?o:Ke.emojis[o]||Ke.emojis[Ke.aliases[o]]||Ke.emojis[Ke.natives[o]]}function lr(){R0=null}async function cr(o,{maxResults:e,caller:n}={}){if(!o||!o.trim().length)return null;e||(e=90),await d0(null,{caller:n||"SearchIndex.search"});const a=o.toLowerCase().replace(/(\w)-/,"$1 ").split(/[\s|,]+/).filter((M,j,V)=>M.trim()&&V.indexOf(M)==j);if(!a.length)return;let c=R0||(R0=Object.values(Ke.emojis)),u,f;for(const M of a){if(!c.length)break;u=[],f={};for(const j of c){if(!j.search)continue;const V=j.search.indexOf(`,${M}`);V!=-1&&(u.push(j),f[j.id]||(f[j.id]=0),f[j.id]+=j.id==M?0:V+1)}c=u}return u.length<2||(u.sort((M,j)=>{const V=f[M.id],A=f[j.id];return V==A?M.id.localeCompare(j.id):V-A}),u.length>e&&(u=u.slice(0,e))),u}var qt={search:cr,get:or,reset:lr,SHORTCODES_REGEX:sr};const ur=["checkered_flag","crossed_flags","pirate_flag","rainbow-flag","transgender_flag","triangular_flag_on_post","waving_black_flag","waving_white_flag"];function fr(o,e){return Array.isArray(o)&&Array.isArray(e)&&o.length===e.length&&o.every((n,a)=>n==e[a])}async function hr(o=1){for(let e in[...Array(o).keys()])await new Promise(requestAnimationFrame)}function _r(o,{skinIndex:e=0}={}){const n=o.skins[e]||(e=0,o.skins[e]),a={id:o.id,name:o.name,native:n.native,unified:n.unified,keywords:o.keywords,shortcodes:n.shortcodes||o.shortcodes};return o.skins.length>1&&(a.skin=e+1),n.src&&(a.src=n.src),o.aliases&&o.aliases.length&&(a.aliases=o.aliases),o.emoticons&&o.emoticons.length&&(a.emoticons=o.emoticons),a}const dr={activity:{outline:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:oe("path",{d:"M12 0C5.373 0 0 5.372 0 12c0 6.627 5.373 12 12 12 6.628 0 12-5.373 12-12 0-6.628-5.372-12-12-12m9.949 11H17.05c.224-2.527 1.232-4.773 1.968-6.113A9.966 9.966 0 0 1 21.949 11M13 11V2.051a9.945 9.945 0 0 1 4.432 1.564c-.858 1.491-2.156 4.22-2.392 7.385H13zm-2 0H8.961c-.238-3.165-1.536-5.894-2.393-7.385A9.95 9.95 0 0 1 11 2.051V11zm0 2v8.949a9.937 9.937 0 0 1-4.432-1.564c.857-1.492 2.155-4.221 2.393-7.385H11zm4.04 0c.236 3.164 1.534 5.893 2.392 7.385A9.92 9.92 0 0 1 13 21.949V13h2.04zM4.982 4.887C5.718 6.227 6.726 8.473 6.951 11h-4.9a9.977 9.977 0 0 1 2.931-6.113M2.051 13h4.9c-.226 2.527-1.233 4.771-1.969 6.113A9.972 9.972 0 0 1 2.051 13m16.967 6.113c-.735-1.342-1.744-3.586-1.968-6.113h4.899a9.961 9.961 0 0 1-2.931 6.113"})}),solid:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:oe("path",{d:"M16.17 337.5c0 44.98 7.565 83.54 13.98 107.9C35.22 464.3 50.46 496 174.9 496c9.566 0 19.59-.4707 29.84-1.271L17.33 307.3C16.53 317.6 16.17 327.7 16.17 337.5zM495.8 174.5c0-44.98-7.565-83.53-13.98-107.9c-4.688-17.54-18.34-31.23-36.04-35.95C435.5 27.91 392.9 16 337 16c-9.564 0-19.59 .4707-29.84 1.271l187.5 187.5C495.5 194.4 495.8 184.3 495.8 174.5zM26.77 248.8l236.3 236.3c142-36.1 203.9-150.4 222.2-221.1L248.9 26.87C106.9 62.96 45.07 177.2 26.77 248.8zM256 335.1c0 9.141-7.474 16-16 16c-4.094 0-8.188-1.564-11.31-4.689L164.7 283.3C161.6 280.2 160 276.1 160 271.1c0-8.529 6.865-16 16-16c4.095 0 8.189 1.562 11.31 4.688l64.01 64C254.4 327.8 256 331.9 256 335.1zM304 287.1c0 9.141-7.474 16-16 16c-4.094 0-8.188-1.564-11.31-4.689L212.7 235.3C209.6 232.2 208 228.1 208 223.1c0-9.141 7.473-16 16-16c4.094 0 8.188 1.562 11.31 4.688l64.01 64.01C302.5 279.8 304 283.9 304 287.1zM256 175.1c0-9.141 7.473-16 16-16c4.094 0 8.188 1.562 11.31 4.688l64.01 64.01c3.125 3.125 4.688 7.219 4.688 11.31c0 9.133-7.468 16-16 16c-4.094 0-8.189-1.562-11.31-4.688l-64.01-64.01C257.6 184.2 256 180.1 256 175.1z"})})},custom:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:oe("path",{d:"M417.1 368c-5.937 10.27-16.69 16-27.75 16c-5.422 0-10.92-1.375-15.97-4.281L256 311.4V448c0 17.67-14.33 32-31.1 32S192 465.7 192 448V311.4l-118.3 68.29C68.67 382.6 63.17 384 57.75 384c-11.06 0-21.81-5.734-27.75-16c-8.828-15.31-3.594-34.88 11.72-43.72L159.1 256L41.72 187.7C26.41 178.9 21.17 159.3 29.1 144C36.63 132.5 49.26 126.7 61.65 128.2C65.78 128.7 69.88 130.1 73.72 132.3L192 200.6V64c0-17.67 14.33-32 32-32S256 46.33 256 64v136.6l118.3-68.29c3.838-2.213 7.939-3.539 12.07-4.051C398.7 126.7 411.4 132.5 417.1 144c8.828 15.31 3.594 34.88-11.72 43.72L288 256l118.3 68.28C421.6 333.1 426.8 352.7 417.1 368z"})}),flags:{outline:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:oe("path",{d:"M0 0l6.084 24H8L1.916 0zM21 5h-4l-1-4H4l3 12h3l1 4h13L21 5zM6.563 3h7.875l2 8H8.563l-2-8zm8.832 10l-2.856 1.904L12.063 13h3.332zM19 13l-1.5-6h1.938l2 8H16l3-2z"})}),solid:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:oe("path",{d:"M64 496C64 504.8 56.75 512 48 512h-32C7.25 512 0 504.8 0 496V32c0-17.75 14.25-32 32-32s32 14.25 32 32V496zM476.3 0c-6.365 0-13.01 1.35-19.34 4.233c-45.69 20.86-79.56 27.94-107.8 27.94c-59.96 0-94.81-31.86-163.9-31.87C160.9 .3055 131.6 4.867 96 15.75v350.5c32-9.984 59.87-14.1 84.85-14.1c73.63 0 124.9 31.78 198.6 31.78c31.91 0 68.02-5.971 111.1-23.09C504.1 355.9 512 344.4 512 332.1V30.73C512 11.1 495.3 0 476.3 0z"})})},foods:{outline:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:oe("path",{d:"M17 4.978c-1.838 0-2.876.396-3.68.934.513-1.172 1.768-2.934 4.68-2.934a1 1 0 0 0 0-2c-2.921 0-4.629 1.365-5.547 2.512-.064.078-.119.162-.18.244C11.73 1.838 10.798.023 9.207.023 8.579.022 7.85.306 7 .978 5.027 2.54 5.329 3.902 6.492 4.999 3.609 5.222 0 7.352 0 12.969c0 4.582 4.961 11.009 9 11.009 1.975 0 2.371-.486 3-1 .629.514 1.025 1 3 1 4.039 0 9-6.418 9-11 0-5.953-4.055-8-7-8M8.242 2.546c.641-.508.943-.523.965-.523.426.169.975 1.405 1.357 3.055-1.527-.629-2.741-1.352-2.98-1.846.059-.112.241-.356.658-.686M15 21.978c-1.08 0-1.21-.109-1.559-.402l-.176-.146c-.367-.302-.816-.452-1.266-.452s-.898.15-1.266.452l-.176.146c-.347.292-.477.402-1.557.402-2.813 0-7-5.389-7-9.009 0-5.823 4.488-5.991 5-5.991 1.939 0 2.484.471 3.387 1.251l.323.276a1.995 1.995 0 0 0 2.58 0l.323-.276c.902-.78 1.447-1.251 3.387-1.251.512 0 5 .168 5 6 0 3.617-4.187 9-7 9"})}),solid:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:oe("path",{d:"M481.9 270.1C490.9 279.1 496 291.3 496 304C496 316.7 490.9 328.9 481.9 337.9C472.9 346.9 460.7 352 448 352H64C51.27 352 39.06 346.9 30.06 337.9C21.06 328.9 16 316.7 16 304C16 291.3 21.06 279.1 30.06 270.1C39.06 261.1 51.27 256 64 256H448C460.7 256 472.9 261.1 481.9 270.1zM475.3 388.7C478.3 391.7 480 395.8 480 400V416C480 432.1 473.3 449.3 461.3 461.3C449.3 473.3 432.1 480 416 480H96C79.03 480 62.75 473.3 50.75 461.3C38.74 449.3 32 432.1 32 416V400C32 395.8 33.69 391.7 36.69 388.7C39.69 385.7 43.76 384 48 384H464C468.2 384 472.3 385.7 475.3 388.7zM50.39 220.8C45.93 218.6 42.03 215.5 38.97 211.6C35.91 207.7 33.79 203.2 32.75 198.4C31.71 193.5 31.8 188.5 32.99 183.7C54.98 97.02 146.5 32 256 32C365.5 32 457 97.02 479 183.7C480.2 188.5 480.3 193.5 479.2 198.4C478.2 203.2 476.1 207.7 473 211.6C469.1 215.5 466.1 218.6 461.6 220.8C457.2 222.9 452.3 224 447.3 224H64.67C59.73 224 54.84 222.9 50.39 220.8zM372.7 116.7C369.7 119.7 368 123.8 368 128C368 131.2 368.9 134.3 370.7 136.9C372.5 139.5 374.1 141.6 377.9 142.8C380.8 143.1 384 144.3 387.1 143.7C390.2 143.1 393.1 141.6 395.3 139.3C397.6 137.1 399.1 134.2 399.7 131.1C400.3 128 399.1 124.8 398.8 121.9C397.6 118.1 395.5 116.5 392.9 114.7C390.3 112.9 387.2 111.1 384 111.1C379.8 111.1 375.7 113.7 372.7 116.7V116.7zM244.7 84.69C241.7 87.69 240 91.76 240 96C240 99.16 240.9 102.3 242.7 104.9C244.5 107.5 246.1 109.6 249.9 110.8C252.8 111.1 256 112.3 259.1 111.7C262.2 111.1 265.1 109.6 267.3 107.3C269.6 105.1 271.1 102.2 271.7 99.12C272.3 96.02 271.1 92.8 270.8 89.88C269.6 86.95 267.5 84.45 264.9 82.7C262.3 80.94 259.2 79.1 256 79.1C251.8 79.1 247.7 81.69 244.7 84.69V84.69zM116.7 116.7C113.7 119.7 112 123.8 112 128C112 131.2 112.9 134.3 114.7 136.9C116.5 139.5 118.1 141.6 121.9 142.8C124.8 143.1 128 144.3 131.1 143.7C134.2 143.1 137.1 141.6 139.3 139.3C141.6 137.1 143.1 134.2 143.7 131.1C144.3 128 143.1 124.8 142.8 121.9C141.6 118.1 139.5 116.5 136.9 114.7C134.3 112.9 131.2 111.1 128 111.1C123.8 111.1 119.7 113.7 116.7 116.7L116.7 116.7z"})})},frequent:{outline:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[oe("path",{d:"M13 4h-2l-.001 7H9v2h2v2h2v-2h4v-2h-4z"}),oe("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10"})]}),solid:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:oe("path",{d:"M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z"})})},nature:{outline:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[oe("path",{d:"M15.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 15.5 8M8.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 8.5 8"}),oe("path",{d:"M18.933 0h-.027c-.97 0-2.138.787-3.018 1.497-1.274-.374-2.612-.51-3.887-.51-1.285 0-2.616.133-3.874.517C7.245.79 6.069 0 5.093 0h-.027C3.352 0 .07 2.67.002 7.026c-.039 2.479.276 4.238 1.04 5.013.254.258.882.677 1.295.882.191 3.177.922 5.238 2.536 6.38.897.637 2.187.949 3.2 1.102C8.04 20.6 8 20.795 8 21c0 1.773 2.35 3 4 3 1.648 0 4-1.227 4-3 0-.201-.038-.393-.072-.586 2.573-.385 5.435-1.877 5.925-7.587.396-.22.887-.568 1.104-.788.763-.774 1.079-2.534 1.04-5.013C23.929 2.67 20.646 0 18.933 0M3.223 9.135c-.237.281-.837 1.155-.884 1.238-.15-.41-.368-1.349-.337-3.291.051-3.281 2.478-4.972 3.091-5.031.256.015.731.27 1.265.646-1.11 1.171-2.275 2.915-2.352 5.125-.133.546-.398.858-.783 1.313M12 22c-.901 0-1.954-.693-2-1 0-.654.475-1.236 1-1.602V20a1 1 0 1 0 2 0v-.602c.524.365 1 .947 1 1.602-.046.307-1.099 1-2 1m3-3.48v.02a4.752 4.752 0 0 0-1.262-1.02c1.092-.516 2.239-1.334 2.239-2.217 0-1.842-1.781-2.195-3.977-2.195-2.196 0-3.978.354-3.978 2.195 0 .883 1.148 1.701 2.238 2.217A4.8 4.8 0 0 0 9 18.539v-.025c-1-.076-2.182-.281-2.973-.842-1.301-.92-1.838-3.045-1.853-6.478l.023-.041c.496-.826 1.49-1.45 1.804-3.102 0-2.047 1.357-3.631 2.362-4.522C9.37 3.178 10.555 3 11.948 3c1.447 0 2.685.192 3.733.57 1 .9 2.316 2.465 2.316 4.48.313 1.651 1.307 2.275 1.803 3.102.035.058.068.117.102.178-.059 5.967-1.949 7.01-4.902 7.19m6.628-8.202c-.037-.065-.074-.13-.113-.195a7.587 7.587 0 0 0-.739-.987c-.385-.455-.648-.768-.782-1.313-.076-2.209-1.241-3.954-2.353-5.124.531-.376 1.004-.63 1.261-.647.636.071 3.044 1.764 3.096 5.031.027 1.81-.347 3.218-.37 3.235"})]}),solid:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:oe("path",{d:"M332.7 19.85C334.6 8.395 344.5 0 356.1 0C363.6 0 370.6 3.52 375.1 9.502L392 32H444.1C456.8 32 469.1 37.06 478.1 46.06L496 64H552C565.3 64 576 74.75 576 88V112C576 156.2 540.2 192 496 192H426.7L421.6 222.5L309.6 158.5L332.7 19.85zM448 64C439.2 64 432 71.16 432 80C432 88.84 439.2 96 448 96C456.8 96 464 88.84 464 80C464 71.16 456.8 64 448 64zM416 256.1V480C416 497.7 401.7 512 384 512H352C334.3 512 320 497.7 320 480V364.8C295.1 377.1 268.8 384 240 384C211.2 384 184 377.1 160 364.8V480C160 497.7 145.7 512 128 512H96C78.33 512 64 497.7 64 480V249.8C35.23 238.9 12.64 214.5 4.836 183.3L.9558 167.8C-3.331 150.6 7.094 133.2 24.24 128.1C41.38 124.7 58.76 135.1 63.05 152.2L66.93 167.8C70.49 182 83.29 191.1 97.97 191.1H303.8L416 256.1z"})})},objects:{outline:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[oe("path",{d:"M12 0a9 9 0 0 0-5 16.482V21s2.035 3 5 3 5-3 5-3v-4.518A9 9 0 0 0 12 0zm0 2c3.86 0 7 3.141 7 7s-3.14 7-7 7-7-3.141-7-7 3.14-7 7-7zM9 17.477c.94.332 1.946.523 3 .523s2.06-.19 3-.523v.834c-.91.436-1.925.689-3 .689a6.924 6.924 0 0 1-3-.69v-.833zm.236 3.07A8.854 8.854 0 0 0 12 21c.965 0 1.888-.167 2.758-.451C14.155 21.173 13.153 22 12 22c-1.102 0-2.117-.789-2.764-1.453z"}),oe("path",{d:"M14.745 12.449h-.004c-.852-.024-1.188-.858-1.577-1.824-.421-1.061-.703-1.561-1.182-1.566h-.009c-.481 0-.783.497-1.235 1.537-.436.982-.801 1.811-1.636 1.791l-.276-.043c-.565-.171-.853-.691-1.284-1.794-.125-.313-.202-.632-.27-.913-.051-.213-.127-.53-.195-.634C7.067 9.004 7.039 9 6.99 9A1 1 0 0 1 7 7h.01c1.662.017 2.015 1.373 2.198 2.134.486-.981 1.304-2.058 2.797-2.075 1.531.018 2.28 1.153 2.731 2.141l.002-.008C14.944 8.424 15.327 7 16.979 7h.032A1 1 0 1 1 17 9h-.011c-.149.076-.256.474-.319.709a6.484 6.484 0 0 1-.311.951c-.429.973-.79 1.789-1.614 1.789"})]}),solid:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",children:oe("path",{d:"M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM191.4 .0132C89.44 .3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.61 288.9-.2837 191.4 .0132zM192 96.01c-44.13 0-80 35.89-80 79.1C112 184.8 104.8 192 96 192S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1c8.844 0 16 7.159 16 16S200.8 96.01 192 96.01z"})})},people:{outline:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[oe("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10"}),oe("path",{d:"M8 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 8 7M16 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 16 7M15.232 15c-.693 1.195-1.87 2-3.349 2-1.477 0-2.655-.805-3.347-2H15m3-2H6a6 6 0 1 0 12 0"})]}),solid:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:oe("path",{d:"M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM256 432C332.1 432 396.2 382 415.2 314.1C419.1 300.4 407.8 288 393.6 288H118.4C104.2 288 92.92 300.4 96.76 314.1C115.8 382 179.9 432 256 432V432zM176.4 160C158.7 160 144.4 174.3 144.4 192C144.4 209.7 158.7 224 176.4 224C194 224 208.4 209.7 208.4 192C208.4 174.3 194 160 176.4 160zM336.4 224C354 224 368.4 209.7 368.4 192C368.4 174.3 354 160 336.4 160C318.7 160 304.4 174.3 304.4 192C304.4 209.7 318.7 224 336.4 224z"})})},places:{outline:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[oe("path",{d:"M6.5 12C5.122 12 4 13.121 4 14.5S5.122 17 6.5 17 9 15.879 9 14.5 7.878 12 6.5 12m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5M17.5 12c-1.378 0-2.5 1.121-2.5 2.5s1.122 2.5 2.5 2.5 2.5-1.121 2.5-2.5-1.122-2.5-2.5-2.5m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5"}),oe("path",{d:"M22.482 9.494l-1.039-.346L21.4 9h.6c.552 0 1-.439 1-.992 0-.006-.003-.008-.003-.008H23c0-1-.889-2-1.984-2h-.642l-.731-1.717C19.262 3.012 18.091 2 16.764 2H7.236C5.909 2 4.738 3.012 4.357 4.283L3.626 6h-.642C1.889 6 1 7 1 8h.003S1 8.002 1 8.008C1 8.561 1.448 9 2 9h.6l-.043.148-1.039.346a2.001 2.001 0 0 0-1.359 2.097l.751 7.508a1 1 0 0 0 .994.901H3v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h6v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h1.096a.999.999 0 0 0 .994-.901l.751-7.508a2.001 2.001 0 0 0-1.359-2.097M6.273 4.857C6.402 4.43 6.788 4 7.236 4h9.527c.448 0 .834.43.963.857L19.313 9H4.688l1.585-4.143zM7 21H5v-1h2v1zm12 0h-2v-1h2v1zm2.189-3H2.811l-.662-6.607L3 11h18l.852.393L21.189 18z"})]}),solid:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:oe("path",{d:"M39.61 196.8L74.8 96.29C88.27 57.78 124.6 32 165.4 32H346.6C387.4 32 423.7 57.78 437.2 96.29L472.4 196.8C495.6 206.4 512 229.3 512 256V448C512 465.7 497.7 480 480 480H448C430.3 480 416 465.7 416 448V400H96V448C96 465.7 81.67 480 64 480H32C14.33 480 0 465.7 0 448V256C0 229.3 16.36 206.4 39.61 196.8V196.8zM109.1 192H402.9L376.8 117.4C372.3 104.6 360.2 96 346.6 96H165.4C151.8 96 139.7 104.6 135.2 117.4L109.1 192zM96 256C78.33 256 64 270.3 64 288C64 305.7 78.33 320 96 320C113.7 320 128 305.7 128 288C128 270.3 113.7 256 96 256zM416 320C433.7 320 448 305.7 448 288C448 270.3 433.7 256 416 256C398.3 256 384 270.3 384 288C384 305.7 398.3 320 416 320z"})})},symbols:{outline:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:oe("path",{d:"M0 0h11v2H0zM4 11h3V6h4V4H0v2h4zM15.5 17c1.381 0 2.5-1.116 2.5-2.493s-1.119-2.493-2.5-2.493S13 13.13 13 14.507 14.119 17 15.5 17m0-2.986c.276 0 .5.222.5.493 0 .272-.224.493-.5.493s-.5-.221-.5-.493.224-.493.5-.493M21.5 19.014c-1.381 0-2.5 1.116-2.5 2.493S20.119 24 21.5 24s2.5-1.116 2.5-2.493-1.119-2.493-2.5-2.493m0 2.986a.497.497 0 0 1-.5-.493c0-.271.224-.493.5-.493s.5.222.5.493a.497.497 0 0 1-.5.493M22 13l-9 9 1.513 1.5 8.99-9.009zM17 11c2.209 0 4-1.119 4-2.5V2s.985-.161 1.498.949C23.01 4.055 23 6 23 6s1-1.119 1-3.135C24-.02 21 0 21 0h-2v6.347A5.853 5.853 0 0 0 17 6c-2.209 0-4 1.119-4 2.5s1.791 2.5 4 2.5M10.297 20.482l-1.475-1.585a47.54 47.54 0 0 1-1.442 1.129c-.307-.288-.989-1.016-2.045-2.183.902-.836 1.479-1.466 1.729-1.892s.376-.871.376-1.336c0-.592-.273-1.178-.818-1.759-.546-.581-1.329-.871-2.349-.871-1.008 0-1.79.293-2.344.879-.556.587-.832 1.181-.832 1.784 0 .813.419 1.748 1.256 2.805-.847.614-1.444 1.208-1.794 1.784a3.465 3.465 0 0 0-.523 1.833c0 .857.308 1.56.924 2.107.616.549 1.423.823 2.42.823 1.173 0 2.444-.379 3.813-1.137L8.235 24h2.819l-2.09-2.383 1.333-1.135zm-6.736-6.389a1.02 1.02 0 0 1 .73-.286c.31 0 .559.085.747.254a.849.849 0 0 1 .283.659c0 .518-.419 1.112-1.257 1.784-.536-.651-.805-1.231-.805-1.742a.901.901 0 0 1 .302-.669M3.74 22c-.427 0-.778-.116-1.057-.349-.279-.232-.418-.487-.418-.766 0-.594.509-1.288 1.527-2.083.968 1.134 1.717 1.946 2.248 2.438-.921.507-1.686.76-2.3.76"})}),solid:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:oe("path",{d:"M500.3 7.251C507.7 13.33 512 22.41 512 31.1V175.1C512 202.5 483.3 223.1 447.1 223.1C412.7 223.1 383.1 202.5 383.1 175.1C383.1 149.5 412.7 127.1 447.1 127.1V71.03L351.1 90.23V207.1C351.1 234.5 323.3 255.1 287.1 255.1C252.7 255.1 223.1 234.5 223.1 207.1C223.1 181.5 252.7 159.1 287.1 159.1V63.1C287.1 48.74 298.8 35.61 313.7 32.62L473.7 .6198C483.1-1.261 492.9 1.173 500.3 7.251H500.3zM74.66 303.1L86.5 286.2C92.43 277.3 102.4 271.1 113.1 271.1H174.9C185.6 271.1 195.6 277.3 201.5 286.2L213.3 303.1H239.1C266.5 303.1 287.1 325.5 287.1 351.1V463.1C287.1 490.5 266.5 511.1 239.1 511.1H47.1C21.49 511.1-.0019 490.5-.0019 463.1V351.1C-.0019 325.5 21.49 303.1 47.1 303.1H74.66zM143.1 359.1C117.5 359.1 95.1 381.5 95.1 407.1C95.1 434.5 117.5 455.1 143.1 455.1C170.5 455.1 191.1 434.5 191.1 407.1C191.1 381.5 170.5 359.1 143.1 359.1zM440.3 367.1H496C502.7 367.1 508.6 372.1 510.1 378.4C513.3 384.6 511.6 391.7 506.5 396L378.5 508C372.9 512.1 364.6 513.3 358.6 508.9C352.6 504.6 350.3 496.6 353.3 489.7L391.7 399.1H336C329.3 399.1 323.4 395.9 321 389.6C318.7 383.4 320.4 376.3 325.5 371.1L453.5 259.1C459.1 255 467.4 254.7 473.4 259.1C479.4 263.4 481.6 271.4 478.7 278.3L440.3 367.1zM116.7 219.1L19.85 119.2C-8.112 90.26-6.614 42.31 24.85 15.34C51.82-8.137 93.26-3.642 118.2 21.83L128.2 32.32L137.7 21.83C162.7-3.642 203.6-8.137 231.6 15.34C262.6 42.31 264.1 90.26 236.1 119.2L139.7 219.1C133.2 225.6 122.7 225.6 116.7 219.1H116.7z"})})}},vr={loupe:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:oe("path",{d:"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"})}),delete:oe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:oe("path",{d:"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"})})};var u0={categories:dr,search:vr};function B0(o){let{id:e,skin:n,emoji:a}=o;if(o.shortcodes){const M=o.shortcodes.match(qt.SHORTCODES_REGEX);M&&(e=M[1],M[2]&&(n=M[2]))}if(a||(a=qt.get(e||o.native)),!a)return o.fallback;const c=a.skins[n-1]||a.skins[0],u=c.src||(o.set!="native"&&!o.spritesheet?typeof o.getImageURL=="function"?o.getImageURL(o.set,c.unified):`https://cdn.jsdelivr.net/npm/emoji-datasource-${o.set}@15.0.1/img/${o.set}/64/${c.unified}.png`:void 0),f=typeof o.getSpritesheetURL=="function"?o.getSpritesheetURL(o.set):`https://cdn.jsdelivr.net/npm/emoji-datasource-${o.set}@15.0.1/img/${o.set}/sheets-256/64.png`;return oe("span",{class:"emoji-mart-emoji","data-emoji-set":o.set,children:u?oe("img",{style:{maxWidth:o.size||"1em",maxHeight:o.size||"1em",display:"inline-block"},alt:c.native||c.shortcodes,src:u}):o.set=="native"?oe("span",{style:{fontSize:o.size,fontFamily:'"EmojiMart", "Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "Android Emoji"'},children:c.native}):oe("span",{style:{display:"block",width:o.size,height:o.size,backgroundImage:`url(${f})`,backgroundSize:`${100*Ke.sheet.cols}% ${100*Ke.sheet.rows}%`,backgroundPosition:`${100/(Ke.sheet.cols-1)*c.x}% ${100/(Ke.sheet.rows-1)*c.y}%`}})})}const mr=typeof window<"u"&&window.HTMLElement?window.HTMLElement:Object;class Nn extends mr{static get observedAttributes(){return Object.keys(this.Props)}update(e={}){for(let n in e)this.attributeChangedCallback(n,null,e[n])}attributeChangedCallback(e,n,a){if(!this.component)return;const c=On(e,{[e]:a},this.constructor.Props,this);this.component.componentWillReceiveProps?this.component.componentWillReceiveProps({[e]:c}):(this.component.props[e]=c,this.component.forceUpdate())}disconnectedCallback(){this.disconnected=!0,this.component&&this.component.unregister&&this.component.unregister()}constructor(e={}){if(super(),this.props=e,e.parent||e.ref){let n=null;const a=e.parent||(n=e.ref&&e.ref.current);n&&(n.innerHTML=""),a&&a.appendChild(this)}}}class br extends Nn{setShadow(){this.attachShadow({mode:"open"})}injectStyles(e){if(!e)return;const n=document.createElement("style");n.textContent=e,this.shadowRoot.insertBefore(n,this.shadowRoot.firstChild)}constructor(e,{styles:n}={}){super(e),this.setShadow(),this.injectStyles(n)}}var jn={fallback:"",id:"",native:"",shortcodes:"",size:{value:"",transform:o=>/\D/.test(o)?o:`${o}px`},set:It.set,skin:It.skin};class Pn extends Nn{async connectedCallback(){const e=Hn(this.props,jn,this);e.element=this,e.ref=n=>{this.component=n},await d0(),!this.disconnected&&Rn(oe(B0,{...e}),this)}constructor(e){super(e)}}Et(Pn,"Props",jn);typeof customElements<"u"&&!customElements.get("em-emoji")&&customElements.define("em-emoji",Pn);var J0,L0=[],en=je.__b,tn=je.__r,nn=je.diffed,rn=je.__c,an=je.unmount;function pr(){var o;for(L0.sort(function(e,n){return e.__v.__b-n.__v.__b});o=L0.pop();)if(o.__P)try{o.__H.__h.forEach(a0),o.__H.__h.forEach($0),o.__H.__h=[]}catch(e){o.__H.__h=[],je.__e(e,o.__v)}}je.__b=function(o){en&&en(o)},je.__r=function(o){tn&&tn(o);var e=o.__c.__H;e&&(e.__h.forEach(a0),e.__h.forEach($0),e.__h=[])},je.diffed=function(o){nn&&nn(o);var e=o.__c;e&&e.__H&&e.__H.__h.length&&(L0.push(e)!==1&&J0===je.requestAnimationFrame||((J0=je.requestAnimationFrame)||function(n){var a,c=function(){clearTimeout(u),sn&&cancelAnimationFrame(a),setTimeout(n)},u=setTimeout(c,100);sn&&(a=requestAnimationFrame(c))})(pr))},je.__c=function(o,e){e.some(function(n){try{n.__h.forEach(a0),n.__h=n.__h.filter(function(a){return!a.__||$0(a)})}catch(a){e.some(function(c){c.__h&&(c.__h=[])}),e=[],je.__e(a,n.__v)}}),rn&&rn(o,e)},je.unmount=function(o){an&&an(o);var e,n=o.__c;n&&n.__H&&(n.__H.__.forEach(function(a){try{a0(a)}catch(c){e=c}}),e&&je.__e(e,n.__v))};var sn=typeof requestAnimationFrame=="function";function a0(o){var e=o.__c;typeof e=="function"&&(o.__c=void 0,e())}function $0(o){o.__c=o.__()}function gr(o,e){for(var n in e)o[n]=e[n];return o}function on(o,e){for(var n in o)if(n!=="__source"&&!(n in e))return!0;for(var a in e)if(a!=="__source"&&o[a]!==e[a])return!0;return!1}function f0(o){this.props=o}(f0.prototype=new Bt).isPureReactComponent=!0,f0.prototype.shouldComponentUpdate=function(o,e){return on(this.props,o)||on(this.state,e)};var ln=je.__b;je.__b=function(o){o.type&&o.type.__f&&o.ref&&(o.props.ref=o.ref,o.ref=null),ln&&ln(o)};var wr=je.__e;je.__e=function(o,e,n){if(o.then){for(var a,c=e;c=c.__;)if((a=c.__c)&&a.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),a.__c(o,e)}wr(o,e,n)};var cn=je.unmount;function k0(){this.__u=0,this.t=null,this.__b=null}function Fn(o){var e=o.__.__c;return e&&e.__e&&e.__e(o)}function n0(){this.u=null,this.o=null}je.unmount=function(o){var e=o.__c;e&&e.__R&&e.__R(),e&&o.__h===!0&&(o.type=null),cn&&cn(o)},(k0.prototype=new Bt).__c=function(o,e){var n=e.__c,a=this;a.t==null&&(a.t=[]),a.t.push(n);var c=Fn(a.__v),u=!1,f=function(){u||(u=!0,n.__R=null,c?c(M):M())};n.__R=f;var M=function(){if(!--a.__u){if(a.state.__e){var V=a.state.__e;a.__v.__k[0]=(function de(J,_e,z){return J&&(J.__v=null,J.__k=J.__k&&J.__k.map(function(ee){return de(ee,_e,z)}),J.__c&&J.__c.__P===_e&&(J.__e&&z.insertBefore(J.__e,J.__d),J.__c.__e=!0,J.__c.__P=z)),J})(V,V.__c.__P,V.__c.__O)}var A;for(a.setState({__e:a.__b=null});A=a.t.pop();)A.forceUpdate()}},j=e.__h===!0;a.__u++||j||a.setState({__e:a.__b=a.__v.__k[0]}),o.then(f,f)},k0.prototype.componentWillUnmount=function(){this.t=[]},k0.prototype.render=function(o,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),a=this.__v.__k[0].__c;this.__v.__k[0]=(function u(f,M,j){return f&&(f.__c&&f.__c.__H&&(f.__c.__H.__.forEach(function(V){typeof V.__c=="function"&&V.__c()}),f.__c.__H=null),(f=gr({},f)).__c!=null&&(f.__c.__P===j&&(f.__c.__P=M),f.__c=null),f.__k=f.__k&&f.__k.map(function(V){return u(V,M,j)})),f})(this.__b,n,a.__O=a.__P)}this.__b=null}var c=e.__e&&E0(Xt,null,o.fallback);return c&&(c.__h=null),[E0(Xt,null,e.__e?null:o.children),c]};var un=function(o,e,n){if(++n[1]===n[0]&&o.o.delete(e),o.props.revealOrder&&(o.props.revealOrder[0]!=="t"||!o.o.size))for(n=o.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;o.u=n=n[2]}};(n0.prototype=new Bt).__e=function(o){var e=this,n=Fn(e.__v),a=e.o.get(o);return a[0]++,function(c){var u=function(){e.props.revealOrder?(a.push(c),un(e,o,a)):c()};n?n(u):u()}},n0.prototype.render=function(o){this.u=null,this.o=new Map;var e=l0(o.children);o.revealOrder&&o.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return o.children},n0.prototype.componentDidUpdate=n0.prototype.componentDidMount=function(){var o=this;this.o.forEach(function(e,n){un(o,n,e)})};var xr=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Sr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,yr=typeof document<"u",Cr=function(o){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(o)};Bt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(o){Object.defineProperty(Bt.prototype,o,{configurable:!0,get:function(){return this["UNSAFE_"+o]},set:function(e){Object.defineProperty(this,o,{configurable:!0,writable:!0,value:e})}})});var fn=je.event;function kr(){}function Mr(){return this.cancelBubble}function Tr(){return this.defaultPrevented}je.event=function(o){return fn&&(o=fn(o)),o.persist=kr,o.isPropagationStopped=Mr,o.isDefaultPrevented=Tr,o.nativeEvent=o};var hn={configurable:!0,get:function(){return this.class}},_n=je.vnode;je.vnode=function(o){var e=o.type,n=o.props,a=n;if(typeof e=="string"){var c=e.indexOf("-")===-1;for(var u in a={},n){var f=n[u];yr&&u==="children"&&e==="noscript"||u==="value"&&"defaultValue"in n&&f==null||(u==="defaultValue"&&"value"in n&&n.value==null?u="value":u==="download"&&f===!0?f="":/ondoubleclick/i.test(u)?u="ondblclick":/^onchange(textarea|input)/i.test(u+e)&&!Cr(n.type)?u="oninput":/^onfocus$/i.test(u)?u="onfocusin":/^onblur$/i.test(u)?u="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(u)?u=u.toLowerCase():c&&Sr.test(u)?u=u.replace(/[A-Z0-9]/,"-$&").toLowerCase():f===null&&(f=void 0),a[u]=f)}e=="select"&&a.multiple&&Array.isArray(a.value)&&(a.value=l0(n.children).forEach(function(M){M.props.selected=a.value.indexOf(M.props.value)!=-1})),e=="select"&&a.defaultValue!=null&&(a.value=l0(n.children).forEach(function(M){M.props.selected=a.multiple?a.defaultValue.indexOf(M.props.value)!=-1:a.defaultValue==M.props.value})),o.props=a,n.class!=n.className&&(hn.enumerable="className"in n,n.className!=null&&(a.class=n.className),Object.defineProperty(a,"className",hn))}o.$$typeof=xr,_n&&_n(o)};var dn=je.__r;je.__r=function(o){dn&&dn(o),o.__c};const Er={light:"outline",dark:"solid"};class Ar extends f0{renderIcon(e){const{icon:n}=e;if(n){if(n.svg)return oe("span",{class:"flex",dangerouslySetInnerHTML:{__html:n.svg}});if(n.src)return oe("img",{src:n.src})}const a=u0.categories[e.id]||u0.categories.custom,c=this.props.icons=="auto"?Er[this.props.theme]:this.props.icons;return a[c]||a}render(){let e=null;return oe("nav",{id:"nav",class:"padding","data-position":this.props.position,dir:this.props.dir,children:oe("div",{class:"flex relative",children:[this.categories.map((n,a)=>{const c=n.name||St.categories[n.id],u=!this.props.unfocused&&n.id==this.state.categoryId;return u&&(e=a),oe("button",{"aria-label":c,"aria-selected":u||void 0,title:c,type:"button",class:"flex flex-grow flex-center",onMouseDown:f=>f.preventDefault(),onClick:()=>{this.props.onClick({category:n,i:a})},children:this.renderIcon(n)})}),oe("div",{class:"bar",style:{width:`${100/this.categories.length}%`,opacity:e==null?0:1,transform:this.props.dir==="rtl"?`scaleX(-1) translateX(${e*100}%)`:`translateX(${e*100}%)`}})]})})}constructor(){super(),this.categories=Ke.categories.filter(e=>!e.target),this.state={categoryId:this.categories[0].id}}}class Rr extends f0{shouldComponentUpdate(e){for(let n in e)if(n!="children"&&e[n]!=this.props[n])return!0;return!1}render(){return this.props.children}}const r0={rowsPerRender:10};class Br extends Bt{getInitialState(e=this.props){return{skin:Nt.get("skin")||e.skin,theme:this.initTheme(e.theme)}}componentWillMount(){this.dir=St.rtl?"rtl":"ltr",this.refs={menu:$t(),navigation:$t(),scroll:$t(),search:$t(),searchInput:$t(),skinToneButton:$t(),skinToneRadio:$t()},this.initGrid(),this.props.stickySearch==!1&&this.props.searchPosition=="sticky"&&(console.warn("[EmojiMart] Deprecation warning: `stickySearch` has been renamed `searchPosition`."),this.props.searchPosition="static")}componentDidMount(){if(this.register(),this.shadowRoot=this.base.parentNode,this.props.autoFocus){const{searchInput:e}=this.refs;e.current&&e.current.focus()}}componentWillReceiveProps(e){this.nextState||(this.nextState={});for(const n in e)this.nextState[n]=e[n];clearTimeout(this.nextStateTimer),this.nextStateTimer=setTimeout(()=>{let n=!1;for(const c in this.nextState)this.props[c]=this.nextState[c],(c==="custom"||c==="categories")&&(n=!0);delete this.nextState;const a=this.getInitialState();if(n)return this.reset(a);this.setState(a)})}componentWillUnmount(){this.unregister()}async reset(e={}){await d0(this.props),this.initGrid(),this.unobserve(),this.setState(e,()=>{this.observeCategories(),this.observeRows()})}register(){document.addEventListener("click",this.handleClickOutside),this.observe()}unregister(){var e;document.removeEventListener("click",this.handleClickOutside),(e=this.darkMedia)==null||e.removeEventListener("change",this.darkMediaCallback),this.unobserve()}observe(){this.observeCategories(),this.observeRows()}unobserve({except:e=[]}={}){Array.isArray(e)||(e=[e]);for(const n of this.observers)e.includes(n)||n.disconnect();this.observers=[].concat(e)}initGrid(){const{categories:e}=Ke;this.refs.categories=new Map;const n=Ke.categories.map(c=>c.id).join(",");this.navKey&&this.navKey!=n&&this.refs.scroll.current&&(this.refs.scroll.current.scrollTop=0),this.navKey=n,this.grid=[],this.grid.setsize=0;const a=(c,u)=>{const f=[];f.__categoryId=u.id,f.__index=c.length,this.grid.push(f);const M=this.grid.length-1,j=M%r0.rowsPerRender?{}:$t();return j.index=M,j.posinset=this.grid.setsize+1,c.push(j),f};for(let c of e){const u=[];let f=a(u,c);for(let M of c.emojis)f.length==this.getPerLine()&&(f=a(u,c)),this.grid.setsize+=1,f.push(M);this.refs.categories.set(c.id,{root:$t(),rows:u})}}initTheme(e){if(e!="auto")return e;if(!this.darkMedia){if(this.darkMedia=matchMedia("(prefers-color-scheme: dark)"),this.darkMedia.media.match(/^not/))return"light";this.darkMedia.addEventListener("change",this.darkMediaCallback)}return this.darkMedia.matches?"dark":"light"}initDynamicPerLine(e=this.props){if(!e.dynamicWidth)return;const{element:n,emojiButtonSize:a}=e,c=()=>{const{width:f}=n.getBoundingClientRect();return Math.floor(f/a)},u=new ResizeObserver(()=>{this.unobserve({except:u}),this.setState({perLine:c()},()=>{this.initGrid(),this.forceUpdate(()=>{this.observeCategories(),this.observeRows()})})});return u.observe(n),this.observers.push(u),c()}getPerLine(){return this.state.perLine||this.props.perLine}getEmojiByPos([e,n]){const a=this.state.searchResults||this.grid,c=a[e]&&a[e][n];if(c)return qt.get(c)}observeCategories(){const e=this.refs.navigation.current;if(!e)return;const n=new Map,a=f=>{f!=e.state.categoryId&&e.setState({categoryId:f})},c={root:this.refs.scroll.current,threshold:[0,1]},u=new IntersectionObserver(f=>{for(const j of f){const V=j.target.dataset.id;n.set(V,j.intersectionRatio)}const M=[...n];for(const[j,V]of M)if(V){a(j);break}},c);for(const{root:f}of this.refs.categories.values())u.observe(f.current);this.observers.push(u)}observeRows(){const e={...this.state.visibleRows},n=new IntersectionObserver(a=>{for(const c of a){const u=parseInt(c.target.dataset.index);c.isIntersecting?e[u]=!0:delete e[u]}this.setState({visibleRows:e})},{root:this.refs.scroll.current,rootMargin:`${this.props.emojiButtonSize*(r0.rowsPerRender+5)}px 0px ${this.props.emojiButtonSize*r0.rowsPerRender}px`});for(const{rows:a}of this.refs.categories.values())for(const c of a)c.current&&n.observe(c.current);this.observers.push(n)}preventDefault(e){e.preventDefault()}unfocusSearch(){const e=this.refs.searchInput.current;e&&e.blur()}navigate({e,input:n,left:a,right:c,up:u,down:f}){const M=this.state.searchResults||this.grid;if(!M.length)return;let[j,V]=this.state.pos;const A=(()=>{if(j==0&&V==0&&!e.repeat&&(a||u))return null;if(j==-1)return!e.repeat&&(c||f)&&n.selectionStart==n.value.length?[0,0]:null;if(a||c){let de=M[j];const J=a?-1:1;if(V+=J,!de[V]){if(j+=J,de=M[j],!de)return j=a?0:M.length-1,V=a?0:M[j].length-1,[j,V];V=a?de.length-1:0}return[j,V]}if(u||f){j+=u?-1:1;const de=M[j];return de?(de[V]||(V=de.length-1),[j,V]):(j=u?0:M.length-1,V=u?0:M[j].length-1,[j,V])}})();if(A)e.preventDefault();else{this.state.pos[0]>-1&&this.setState({pos:[-1,-1]});return}this.setState({pos:A,keyboard:!0},()=>{this.scrollTo({row:A[0]})})}scrollTo({categoryId:e,row:n}){const a=this.state.searchResults||this.grid;if(!a.length)return;const c=this.refs.scroll.current,u=c.getBoundingClientRect();let f=0;if(n>=0&&(e=a[n].__categoryId),e&&(f=(this.refs[e]||this.refs.categories.get(e).root).current.getBoundingClientRect().top-(u.top-c.scrollTop)+1),n>=0)if(!n)f=0;else{const M=a[n].__index,j=f+M*this.props.emojiButtonSize,V=j+this.props.emojiButtonSize+this.props.emojiButtonSize*.88;if(j<c.scrollTop)f=j;else if(V>c.scrollTop+u.height)f=V-u.height;else return}this.ignoreMouse(),c.scrollTop=f}ignoreMouse(){this.mouseIsIgnored=!0,clearTimeout(this.ignoreMouseTimer),this.ignoreMouseTimer=setTimeout(()=>{delete this.mouseIsIgnored},100)}handleEmojiOver(e){this.mouseIsIgnored||this.state.showSkins||this.setState({pos:e||[-1,-1],keyboard:!1})}handleEmojiClick({e,emoji:n,pos:a}){if(this.props.onEmojiSelect&&(!n&&a&&(n=this.getEmojiByPos(a)),n)){const c=_r(n,{skinIndex:this.state.skin-1});this.props.maxFrequentRows&&Ln.add(c,this.props),this.props.onEmojiSelect(c,e)}}closeSkins(){this.state.showSkins&&(this.setState({showSkins:null,tempSkin:null}),this.base.removeEventListener("click",this.handleBaseClick),this.base.removeEventListener("keydown",this.handleBaseKeydown))}handleSkinMouseOver(e){this.setState({tempSkin:e})}handleSkinClick(e){this.ignoreMouse(),this.closeSkins(),this.setState({skin:e,tempSkin:null}),Nt.set("skin",e)}renderNav(){return oe(Ar,{ref:this.refs.navigation,icons:this.props.icons,theme:this.state.theme,dir:this.dir,unfocused:!!this.state.searchResults,position:this.props.navPosition,onClick:this.handleCategoryClick},this.navKey)}renderPreview(){const e=this.getEmojiByPos(this.state.pos),n=this.state.searchResults&&!this.state.searchResults.length;return oe("div",{id:"preview",class:"flex flex-middle",dir:this.dir,"data-position":this.props.previewPosition,children:[oe("div",{class:"flex flex-middle flex-grow",children:[oe("div",{class:"flex flex-auto flex-middle flex-center",style:{height:this.props.emojiButtonSize,fontSize:this.props.emojiButtonSize},children:oe(B0,{emoji:e,id:n?this.props.noResultsEmoji||"cry":this.props.previewEmoji||(this.props.previewPosition=="top"?"point_down":"point_up"),set:this.props.set,size:this.props.emojiButtonSize,skin:this.state.tempSkin||this.state.skin,spritesheet:!0,getSpritesheetURL:this.props.getSpritesheetURL})}),oe("div",{class:`margin-${this.dir[0]}`,children:e||n?oe("div",{class:`padding-${this.dir[2]} align-${this.dir[0]}`,children:[oe("div",{class:"preview-title ellipsis",children:e?e.name:St.search_no_results_1}),oe("div",{class:"preview-subtitle ellipsis color-c",children:e?e.skins[0].shortcodes:St.search_no_results_2})]}):oe("div",{class:"preview-placeholder color-c",children:St.pick})})]}),!e&&this.props.skinTonePosition=="preview"&&this.renderSkinToneButton()]})}renderEmojiButton(e,{pos:n,posinset:a,grid:c}){const u=this.props.emojiButtonSize,f=this.state.tempSkin||this.state.skin,j=(e.skins[f-1]||e.skins[0]).native,V=fr(this.state.pos,n),A=n.concat(e.id).join("");return oe(Rr,{selected:V,skin:f,size:u,children:oe("button",{"aria-label":j,"aria-selected":V||void 0,"aria-posinset":a,"aria-setsize":c.setsize,"data-keyboard":this.state.keyboard,title:this.props.previewPosition=="none"?e.name:void 0,type:"button",class:"flex flex-center flex-middle",tabindex:"-1",onClick:de=>this.handleEmojiClick({e:de,emoji:e}),onMouseEnter:()=>this.handleEmojiOver(n),onMouseLeave:()=>this.handleEmojiOver(),style:{width:this.props.emojiButtonSize,height:this.props.emojiButtonSize,fontSize:this.props.emojiSize,lineHeight:0},children:[oe("div",{"aria-hidden":"true",class:"background",style:{borderRadius:this.props.emojiButtonRadius,backgroundColor:this.props.emojiButtonColors?this.props.emojiButtonColors[(a-1)%this.props.emojiButtonColors.length]:void 0}}),oe(B0,{emoji:e,set:this.props.set,size:this.props.emojiSize,skin:f,spritesheet:!0,getSpritesheetURL:this.props.getSpritesheetURL})]})},A)}renderSearch(){const e=this.props.previewPosition=="none"||this.props.skinTonePosition=="search";return oe("div",{children:[oe("div",{class:"spacer"}),oe("div",{class:"flex flex-middle",children:[oe("div",{class:"search relative flex-grow",children:[oe("input",{type:"search",ref:this.refs.searchInput,placeholder:St.search,onClick:this.handleSearchClick,onInput:this.handleSearchInput,onKeyDown:this.handleSearchKeyDown,autoComplete:"off"}),oe("span",{class:"icon loupe flex",children:u0.search.loupe}),this.state.searchResults&&oe("button",{title:"Clear","aria-label":"Clear",type:"button",class:"icon delete flex",onClick:this.clearSearch,onMouseDown:this.preventDefault,children:u0.search.delete})]}),e&&this.renderSkinToneButton()]})]})}renderSearchResults(){const{searchResults:e}=this.state;return e?oe("div",{class:"category",ref:this.refs.search,children:[oe("div",{class:`sticky padding-small align-${this.dir[0]}`,children:St.categories.search}),oe("div",{children:e.length?e.map((n,a)=>oe("div",{class:"flex",children:n.map((c,u)=>this.renderEmojiButton(c,{pos:[a,u],posinset:a*this.props.perLine+u+1,grid:e}))})):oe("div",{class:`padding-small align-${this.dir[0]}`,children:this.props.onAddCustomEmoji&&oe("a",{onClick:this.props.onAddCustomEmoji,children:St.add_custom})})})]}):null}renderCategories(){const{categories:e}=Ke,n=!!this.state.searchResults,a=this.getPerLine();return oe("div",{style:{visibility:n?"hidden":void 0,display:n?"none":void 0,height:"100%"},children:e.map(c=>{const{root:u,rows:f}=this.refs.categories.get(c.id);return oe("div",{"data-id":c.target?c.target.id:c.id,class:"category",ref:u,children:[oe("div",{class:`sticky padding-small align-${this.dir[0]}`,children:c.name||St.categories[c.id]}),oe("div",{class:"relative",style:{height:f.length*this.props.emojiButtonSize},children:f.map((M,j)=>{const V=M.index-M.index%r0.rowsPerRender,A=this.state.visibleRows[V],de="current"in M?M:void 0;if(!A&&!de)return null;const J=j*a,_e=J+a,z=c.emojis.slice(J,_e);return z.length<a&&z.push(...new Array(a-z.length)),oe("div",{"data-index":M.index,ref:de,class:"flex row",style:{top:j*this.props.emojiButtonSize},children:A&&z.map((ee,re)=>{if(!ee)return oe("div",{style:{width:this.props.emojiButtonSize,height:this.props.emojiButtonSize}});const Se=qt.get(ee);return this.renderEmojiButton(Se,{pos:[M.index,re],posinset:M.posinset+re,grid:this.grid})})},M.index)})})]})})})}renderSkinToneButton(){return this.props.skinTonePosition=="none"?null:oe("div",{class:"flex flex-auto flex-center flex-middle",style:{position:"relative",width:this.props.emojiButtonSize,height:this.props.emojiButtonSize},children:oe("button",{type:"button",ref:this.refs.skinToneButton,class:"skin-tone-button flex flex-auto flex-center flex-middle","aria-selected":this.state.showSkins?"":void 0,"aria-label":St.skins.choose,title:St.skins.choose,onClick:this.openSkins,style:{width:this.props.emojiSize,height:this.props.emojiSize},children:oe("span",{class:`skin-tone skin-tone-${this.state.skin}`})})})}renderLiveRegion(){const e=this.getEmojiByPos(this.state.pos),n=e?e.name:"";return oe("div",{"aria-live":"polite",class:"sr-only",children:n})}renderSkins(){const n=this.refs.skinToneButton.current.getBoundingClientRect(),a=this.base.getBoundingClientRect(),c={};return this.dir=="ltr"?c.right=a.right-n.right-3:c.left=n.left-a.left-3,this.props.previewPosition=="bottom"&&this.props.skinTonePosition=="preview"?c.bottom=a.bottom-n.top+6:(c.top=n.bottom-a.top+3,c.bottom="auto"),oe("div",{ref:this.refs.menu,role:"radiogroup",dir:this.dir,"aria-label":St.skins.choose,class:"menu hidden","data-position":c.top?"top":"bottom",style:c,children:[...Array(6).keys()].map(u=>{const f=u+1,M=this.state.skin==f;return oe("div",{children:[oe("input",{type:"radio",name:"skin-tone",value:f,"aria-label":St.skins[f],ref:M?this.refs.skinToneRadio:null,defaultChecked:M,onChange:()=>this.handleSkinMouseOver(f),onKeyDown:j=>{(j.code=="Enter"||j.code=="Space"||j.code=="Tab")&&(j.preventDefault(),this.handleSkinClick(f))}}),oe("button",{"aria-hidden":"true",tabindex:"-1",onClick:()=>this.handleSkinClick(f),onMouseEnter:()=>this.handleSkinMouseOver(f),onMouseLeave:()=>this.handleSkinMouseOver(),class:"option flex flex-grow flex-middle",children:[oe("span",{class:`skin-tone skin-tone-${f}`}),oe("span",{class:"margin-small-lr",children:St.skins[f]})]})]})})})}render(){const e=this.props.perLine*this.props.emojiButtonSize;return oe("section",{id:"root",class:"flex flex-column",dir:this.dir,style:{width:this.props.dynamicWidth?"100%":`calc(${e}px + (var(--padding) + var(--sidebar-width)))`},"data-emoji-set":this.props.set,"data-theme":this.state.theme,"data-menu":this.state.showSkins?"":void 0,children:[this.props.previewPosition=="top"&&this.renderPreview(),this.props.navPosition=="top"&&this.renderNav(),this.props.searchPosition=="sticky"&&oe("div",{class:"padding-lr",children:this.renderSearch()}),oe("div",{ref:this.refs.scroll,class:"scroll flex-grow padding-lr",children:oe("div",{style:{width:this.props.dynamicWidth?"100%":e,height:"100%"},children:[this.props.searchPosition=="static"&&this.renderSearch(),this.renderSearchResults(),this.renderCategories()]})}),this.props.navPosition=="bottom"&&this.renderNav(),this.props.previewPosition=="bottom"&&this.renderPreview(),this.state.showSkins&&this.renderSkins(),this.renderLiveRegion()]})}constructor(e){super(),Et(this,"darkMediaCallback",()=>{this.props.theme=="auto"&&this.setState({theme:this.darkMedia.matches?"dark":"light"})}),Et(this,"handleClickOutside",n=>{const{element:a}=this.props;n.target!=a&&(this.state.showSkins&&this.closeSkins(),this.props.onClickOutside&&this.props.onClickOutside(n))}),Et(this,"handleBaseClick",n=>{this.state.showSkins&&(n.target.closest(".menu")||(n.preventDefault(),n.stopImmediatePropagation(),this.closeSkins()))}),Et(this,"handleBaseKeydown",n=>{this.state.showSkins&&n.key=="Escape"&&(n.preventDefault(),n.stopImmediatePropagation(),this.closeSkins())}),Et(this,"handleSearchClick",()=>{this.getEmojiByPos(this.state.pos)&&this.setState({pos:[-1,-1]})}),Et(this,"handleSearchInput",async()=>{const n=this.refs.searchInput.current;if(!n)return;const{value:a}=n,c=await qt.search(a),u=()=>{this.refs.scroll.current&&(this.refs.scroll.current.scrollTop=0)};if(!c)return this.setState({searchResults:c,pos:[-1,-1]},u);const f=n.selectionStart==n.value.length?[0,0]:[-1,-1],M=[];M.setsize=c.length;let j=null;for(let V of c)(!M.length||j.length==this.getPerLine())&&(j=[],j.__categoryId="search",j.__index=M.length,M.push(j)),j.push(V);this.ignoreMouse(),this.setState({searchResults:M,pos:f},u)}),Et(this,"handleSearchKeyDown",n=>{const a=n.currentTarget;switch(n.stopImmediatePropagation(),n.key){case"ArrowLeft":this.navigate({e:n,input:a,left:!0});break;case"ArrowRight":this.navigate({e:n,input:a,right:!0});break;case"ArrowUp":this.navigate({e:n,input:a,up:!0});break;case"ArrowDown":this.navigate({e:n,input:a,down:!0});break;case"Enter":n.preventDefault(),this.handleEmojiClick({e:n,pos:this.state.pos});break;case"Escape":n.preventDefault(),this.state.searchResults?this.clearSearch():this.unfocusSearch();break}}),Et(this,"clearSearch",()=>{const n=this.refs.searchInput.current;n&&(n.value="",n.focus(),this.handleSearchInput())}),Et(this,"handleCategoryClick",({category:n,i:a})=>{this.scrollTo(a==0?{row:-1}:{categoryId:n.id})}),Et(this,"openSkins",n=>{const{currentTarget:a}=n,c=a.getBoundingClientRect();this.setState({showSkins:c},async()=>{await hr(2);const u=this.refs.menu.current;u&&(u.classList.remove("hidden"),this.refs.skinToneRadio.current.focus(),this.base.addEventListener("click",this.handleBaseClick,!0),this.base.addEventListener("keydown",this.handleBaseKeydown,!0))})}),this.observers=[],this.state={pos:[-1,-1],perLine:this.initDynamicPerLine(e),visibleRows:{0:!0},...this.getInitialState(e)}}}class D0 extends br{async connectedCallback(){const e=Hn(this.props,It,this);e.element=this,e.ref=n=>{this.component=n},await d0(e),!this.disconnected&&Rn(oe(Br,{...e}),this.shadowRoot)}constructor(e){super(e,{styles:pn(zn)})}}Et(D0,"Props",It);typeof customElements<"u"&&!customElements.get("em-emoji-picker")&&customElements.define("em-emoji-picker",D0);var zn={};zn=`:host {
  width: min-content;
  height: 435px;
  min-height: 230px;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow);
  --border-radius: 10px;
  --category-icon-size: 18px;
  --font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
  --font-size: 15px;
  --preview-placeholder-size: 21px;
  --preview-title-size: 1.1em;
  --preview-subtitle-size: .9em;
  --shadow-color: 0deg 0% 0%;
  --shadow: .3px .5px 2.7px hsl(var(--shadow-color) / .14), .4px .8px 1px -3.2px hsl(var(--shadow-color) / .14), 1px 2px 2.5px -4.5px hsl(var(--shadow-color) / .14);
  display: flex;
}

[data-theme="light"] {
  --em-rgb-color: var(--rgb-color, 34, 36, 39);
  --em-rgb-accent: var(--rgb-accent, 34, 102, 237);
  --em-rgb-background: var(--rgb-background, 255, 255, 255);
  --em-rgb-input: var(--rgb-input, 255, 255, 255);
  --em-color-border: var(--color-border, rgba(0, 0, 0, .05));
  --em-color-border-over: var(--color-border-over, rgba(0, 0, 0, .1));
}

[data-theme="dark"] {
  --em-rgb-color: var(--rgb-color, 222, 222, 221);
  --em-rgb-accent: var(--rgb-accent, 58, 130, 247);
  --em-rgb-background: var(--rgb-background, 21, 22, 23);
  --em-rgb-input: var(--rgb-input, 0, 0, 0);
  --em-color-border: var(--color-border, rgba(255, 255, 255, .1));
  --em-color-border-over: var(--color-border-over, rgba(255, 255, 255, .2));
}

#root {
  --color-a: rgb(var(--em-rgb-color));
  --color-b: rgba(var(--em-rgb-color), .65);
  --color-c: rgba(var(--em-rgb-color), .45);
  --padding: 12px;
  --padding-small: calc(var(--padding) / 2);
  --sidebar-width: 16px;
  --duration: 225ms;
  --duration-fast: 125ms;
  --duration-instant: 50ms;
  --easing: cubic-bezier(.4, 0, .2, 1);
  width: 100%;
  text-align: left;
  border-radius: var(--border-radius);
  background-color: rgb(var(--em-rgb-background));
  position: relative;
}

@media (prefers-reduced-motion) {
  #root {
    --duration: 0;
    --duration-fast: 0;
    --duration-instant: 0;
  }
}

#root[data-menu] button {
  cursor: auto;
}

#root[data-menu] .menu button {
  cursor: pointer;
}

:host, #root, input, button {
  color: rgb(var(--em-rgb-color));
  font-family: var(--font-family);
  font-size: var(--font-size);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: normal;
}

*, :before, :after {
  box-sizing: border-box;
  min-width: 0;
  margin: 0;
  padding: 0;
}

.relative {
  position: relative;
}

.flex {
  display: flex;
}

.flex-auto {
  flex: none;
}

.flex-center {
  justify-content: center;
}

.flex-column {
  flex-direction: column;
}

.flex-grow {
  flex: auto;
}

.flex-middle {
  align-items: center;
}

.flex-wrap {
  flex-wrap: wrap;
}

.padding {
  padding: var(--padding);
}

.padding-t {
  padding-top: var(--padding);
}

.padding-lr {
  padding-left: var(--padding);
  padding-right: var(--padding);
}

.padding-r {
  padding-right: var(--padding);
}

.padding-small {
  padding: var(--padding-small);
}

.padding-small-b {
  padding-bottom: var(--padding-small);
}

.padding-small-lr {
  padding-left: var(--padding-small);
  padding-right: var(--padding-small);
}

.margin {
  margin: var(--padding);
}

.margin-r {
  margin-right: var(--padding);
}

.margin-l {
  margin-left: var(--padding);
}

.margin-small-l {
  margin-left: var(--padding-small);
}

.margin-small-lr {
  margin-left: var(--padding-small);
  margin-right: var(--padding-small);
}

.align-l {
  text-align: left;
}

.align-r {
  text-align: right;
}

.color-a {
  color: var(--color-a);
}

.color-b {
  color: var(--color-b);
}

.color-c {
  color: var(--color-c);
}

.ellipsis {
  white-space: nowrap;
  max-width: 100%;
  width: auto;
  text-overflow: ellipsis;
  overflow: hidden;
}

.sr-only {
  width: 1px;
  height: 1px;
  position: absolute;
  top: auto;
  left: -10000px;
  overflow: hidden;
}

a {
  cursor: pointer;
  color: rgb(var(--em-rgb-accent));
}

a:hover {
  text-decoration: underline;
}

.spacer {
  height: 10px;
}

[dir="rtl"] .scroll {
  padding-left: 0;
  padding-right: var(--padding);
}

.scroll {
  padding-right: 0;
  overflow-x: hidden;
  overflow-y: auto;
}

.scroll::-webkit-scrollbar {
  width: var(--sidebar-width);
  height: var(--sidebar-width);
}

.scroll::-webkit-scrollbar-track {
  border: 0;
}

.scroll::-webkit-scrollbar-button {
  width: 0;
  height: 0;
  display: none;
}

.scroll::-webkit-scrollbar-corner {
  background-color: rgba(0, 0, 0, 0);
}

.scroll::-webkit-scrollbar-thumb {
  min-height: 20%;
  min-height: 65px;
  border: 4px solid rgb(var(--em-rgb-background));
  border-radius: 8px;
}

.scroll::-webkit-scrollbar-thumb:hover {
  background-color: var(--em-color-border-over) !important;
}

.scroll:hover::-webkit-scrollbar-thumb {
  background-color: var(--em-color-border);
}

.sticky {
  z-index: 1;
  background-color: rgba(var(--em-rgb-background), .9);
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
  font-weight: 500;
  position: sticky;
  top: -1px;
}

[dir="rtl"] .search input[type="search"] {
  padding: 10px 2.2em 10px 2em;
}

[dir="rtl"] .search .loupe {
  left: auto;
  right: .7em;
}

[dir="rtl"] .search .delete {
  left: .7em;
  right: auto;
}

.search {
  z-index: 2;
  position: relative;
}

.search input, .search button {
  font-size: calc(var(--font-size)  - 1px);
}

.search input[type="search"] {
  width: 100%;
  background-color: var(--em-color-border);
  transition-duration: var(--duration);
  transition-property: background-color, box-shadow;
  transition-timing-function: var(--easing);
  border: 0;
  border-radius: 10px;
  outline: 0;
  padding: 10px 2em 10px 2.2em;
  display: block;
}

.search input[type="search"]::-ms-input-placeholder {
  color: inherit;
  opacity: .6;
}

.search input[type="search"]::placeholder {
  color: inherit;
  opacity: .6;
}

.search input[type="search"], .search input[type="search"]::-webkit-search-decoration, .search input[type="search"]::-webkit-search-cancel-button, .search input[type="search"]::-webkit-search-results-button, .search input[type="search"]::-webkit-search-results-decoration {
  -webkit-appearance: none;
  -ms-appearance: none;
  appearance: none;
}

.search input[type="search"]:focus {
  background-color: rgb(var(--em-rgb-input));
  box-shadow: inset 0 0 0 1px rgb(var(--em-rgb-accent)), 0 1px 3px rgba(65, 69, 73, .2);
}

.search .icon {
  z-index: 1;
  color: rgba(var(--em-rgb-color), .7);
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
}

.search .loupe {
  pointer-events: none;
  left: .7em;
}

.search .delete {
  right: .7em;
}

svg {
  fill: currentColor;
  width: 1em;
  height: 1em;
}

button {
  -webkit-appearance: none;
  -ms-appearance: none;
  appearance: none;
  cursor: pointer;
  color: currentColor;
  background-color: rgba(0, 0, 0, 0);
  border: 0;
}

#nav {
  z-index: 2;
  padding-top: 12px;
  padding-bottom: 12px;
  padding-right: var(--sidebar-width);
  position: relative;
}

#nav button {
  color: var(--color-b);
  transition: color var(--duration) var(--easing);
}

#nav button:hover {
  color: var(--color-a);
}

#nav svg, #nav img {
  width: var(--category-icon-size);
  height: var(--category-icon-size);
}

#nav[dir="rtl"] .bar {
  left: auto;
  right: 0;
}

#nav .bar {
  width: 100%;
  height: 3px;
  background-color: rgb(var(--em-rgb-accent));
  transition: transform var(--duration) var(--easing);
  border-radius: 3px 3px 0 0;
  position: absolute;
  bottom: -12px;
  left: 0;
}

#nav button[aria-selected] {
  color: rgb(var(--em-rgb-accent));
}

#preview {
  z-index: 2;
  padding: calc(var(--padding)  + 4px) var(--padding);
  padding-right: var(--sidebar-width);
  position: relative;
}

#preview .preview-placeholder {
  font-size: var(--preview-placeholder-size);
}

#preview .preview-title {
  font-size: var(--preview-title-size);
}

#preview .preview-subtitle {
  font-size: var(--preview-subtitle-size);
}

#nav:before, #preview:before {
  content: "";
  height: 2px;
  position: absolute;
  left: 0;
  right: 0;
}

#nav[data-position="top"]:before, #preview[data-position="top"]:before {
  background: linear-gradient(to bottom, var(--em-color-border), transparent);
  top: 100%;
}

#nav[data-position="bottom"]:before, #preview[data-position="bottom"]:before {
  background: linear-gradient(to top, var(--em-color-border), transparent);
  bottom: 100%;
}

.category:last-child {
  min-height: calc(100% + 1px);
}

.category button {
  font-family: -apple-system, BlinkMacSystemFont, Helvetica Neue, sans-serif;
  position: relative;
}

.category button > * {
  position: relative;
}

.category button .background {
  opacity: 0;
  background-color: var(--em-color-border);
  transition: opacity var(--duration-fast) var(--easing) var(--duration-instant);
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}

.category button:hover .background {
  transition-duration: var(--duration-instant);
  transition-delay: 0s;
}

.category button[aria-selected] .background {
  opacity: 1;
}

.category button[data-keyboard] .background {
  transition: none;
}

.row {
  width: 100%;
  position: absolute;
  top: 0;
  left: 0;
}

.skin-tone-button {
  border: 1px solid rgba(0, 0, 0, 0);
  border-radius: 100%;
}

.skin-tone-button:hover {
  border-color: var(--em-color-border);
}

.skin-tone-button:active .skin-tone {
  transform: scale(.85) !important;
}

.skin-tone-button .skin-tone {
  transition: transform var(--duration) var(--easing);
}

.skin-tone-button[aria-selected] {
  background-color: var(--em-color-border);
  border-top-color: rgba(0, 0, 0, .05);
  border-bottom-color: rgba(0, 0, 0, 0);
  border-left-width: 0;
  border-right-width: 0;
}

.skin-tone-button[aria-selected] .skin-tone {
  transform: scale(.9);
}

.menu {
  z-index: 2;
  white-space: nowrap;
  border: 1px solid var(--em-color-border);
  background-color: rgba(var(--em-rgb-background), .9);
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
  transition-property: opacity, transform;
  transition-duration: var(--duration);
  transition-timing-function: var(--easing);
  border-radius: 10px;
  padding: 4px;
  position: absolute;
  box-shadow: 1px 1px 5px rgba(0, 0, 0, .05);
}

.menu.hidden {
  opacity: 0;
}

.menu[data-position="bottom"] {
  transform-origin: 100% 100%;
}

.menu[data-position="bottom"].hidden {
  transform: scale(.9)rotate(-3deg)translateY(5%);
}

.menu[data-position="top"] {
  transform-origin: 100% 0;
}

.menu[data-position="top"].hidden {
  transform: scale(.9)rotate(3deg)translateY(-5%);
}

.menu input[type="radio"] {
  clip: rect(0 0 0 0);
  width: 1px;
  height: 1px;
  border: 0;
  margin: 0;
  padding: 0;
  position: absolute;
  overflow: hidden;
}

.menu input[type="radio"]:checked + .option {
  box-shadow: 0 0 0 2px rgb(var(--em-rgb-accent));
}

.option {
  width: 100%;
  border-radius: 6px;
  padding: 4px 6px;
}

.option:hover {
  color: #fff;
  background-color: rgb(var(--em-rgb-accent));
}

.skin-tone {
  width: 16px;
  height: 16px;
  border-radius: 100%;
  display: inline-block;
  position: relative;
  overflow: hidden;
}

.skin-tone:after {
  content: "";
  mix-blend-mode: overlay;
  background: linear-gradient(rgba(255, 255, 255, .2), rgba(0, 0, 0, 0));
  border: 1px solid rgba(0, 0, 0, .8);
  border-radius: 100%;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  box-shadow: inset 0 -2px 3px #000, inset 0 1px 2px #fff;
}

.skin-tone-1 {
  background-color: #ffc93a;
}

.skin-tone-2 {
  background-color: #ffdab7;
}

.skin-tone-3 {
  background-color: #e7b98f;
}

.skin-tone-4 {
  background-color: #c88c61;
}

.skin-tone-5 {
  background-color: #a46134;
}

.skin-tone-6 {
  background-color: #5d4437;
}

[data-index] {
  justify-content: space-between;
}

[data-emoji-set="twitter"] .skin-tone:after {
  box-shadow: none;
  border-color: rgba(0, 0, 0, .5);
}

[data-emoji-set="twitter"] .skin-tone-1 {
  background-color: #fade72;
}

[data-emoji-set="twitter"] .skin-tone-2 {
  background-color: #f3dfd0;
}

[data-emoji-set="twitter"] .skin-tone-3 {
  background-color: #eed3a8;
}

[data-emoji-set="twitter"] .skin-tone-4 {
  background-color: #cfad8d;
}

[data-emoji-set="twitter"] .skin-tone-5 {
  background-color: #a8805d;
}

[data-emoji-set="twitter"] .skin-tone-6 {
  background-color: #765542;
}

[data-emoji-set="google"] .skin-tone:after {
  box-shadow: inset 0 0 2px 2px rgba(0, 0, 0, .4);
}

[data-emoji-set="google"] .skin-tone-1 {
  background-color: #f5c748;
}

[data-emoji-set="google"] .skin-tone-2 {
  background-color: #f1d5aa;
}

[data-emoji-set="google"] .skin-tone-3 {
  background-color: #d4b48d;
}

[data-emoji-set="google"] .skin-tone-4 {
  background-color: #aa876b;
}

[data-emoji-set="google"] .skin-tone-5 {
  background-color: #916544;
}

[data-emoji-set="google"] .skin-tone-6 {
  background-color: #61493f;
}

[data-emoji-set="facebook"] .skin-tone:after {
  border-color: rgba(0, 0, 0, .4);
  box-shadow: inset 0 -2px 3px #000, inset 0 1px 4px #fff;
}

[data-emoji-set="facebook"] .skin-tone-1 {
  background-color: #f5c748;
}

[data-emoji-set="facebook"] .skin-tone-2 {
  background-color: #f1d5aa;
}

[data-emoji-set="facebook"] .skin-tone-3 {
  background-color: #d4b48d;
}

[data-emoji-set="facebook"] .skin-tone-4 {
  background-color: #aa876b;
}

[data-emoji-set="facebook"] .skin-tone-5 {
  background-color: #916544;
}

[data-emoji-set="facebook"] .skin-tone-6 {
  background-color: #61493f;
}

`;Array.prototype.find||(Array.prototype.find=function(o){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof o!="function")throw new TypeError("predicate must be a function");for(var e=Object(this),n=e.length>>>0,a=arguments[1],c,u=0;u<n;u++)if(c=e[u],o.call(a,c,u,e))return c});if(window&&typeof window.CustomEvent!="function"){let o=function(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),a};typeof window.Event<"u"&&(o.prototype=window.Event.prototype),window.CustomEvent=o}class h0{constructor(e){this.tribute=e,this.tribute.events=this}static keys(){return[{key:9,value:"TAB"},{key:8,value:"DELETE"},{key:13,value:"ENTER"},{key:27,value:"ESCAPE"},{key:32,value:"SPACE"},{key:38,value:"UP"},{key:40,value:"DOWN"}]}bind(e){e.boundKeydown=this.keydown.bind(e,this),e.boundKeyup=this.keyup.bind(e,this),e.boundInput=this.input.bind(e,this),e.addEventListener("keydown",e.boundKeydown,!1),e.addEventListener("keyup",e.boundKeyup,!1),e.addEventListener("input",e.boundInput,!1)}unbind(e){e.removeEventListener("keydown",e.boundKeydown,!1),e.removeEventListener("keyup",e.boundKeyup,!1),e.removeEventListener("input",e.boundInput,!1),delete e.boundKeydown,delete e.boundKeyup,delete e.boundInput}keydown(e,n){e.shouldDeactivate(n)&&(e.tribute.isActive=!1,e.tribute.hideMenu());let a=this;e.commandEvent=!1,h0.keys().forEach(c=>{c.key===n.keyCode&&(e.commandEvent=!0,e.callbacks()[c.value.toLowerCase()](n,a))})}input(e,n){e.inputEvent=!0,e.keyup.call(this,e,n)}click(e,n){let a=e.tribute;if(a.menu&&a.menu.contains(n.target)){let c=n.target;for(n.preventDefault(),n.stopPropagation();c.nodeName.toLowerCase()!=="li";)if(c=c.parentNode,!c||c===a.menu)throw new Error("cannot find the <li> container for the click");a.selectItemAtIndex(c.getAttribute("data-index"),n),a.hideMenu()}else a.current.element&&!a.current.externalTrigger&&(a.current.externalTrigger=!1,setTimeout(()=>a.hideMenu()))}keyup(e,n){if(e.inputEvent&&(e.inputEvent=!1),e.updateSelection(this),n.keyCode!==27){if(!e.tribute.allowSpaces&&e.tribute.hasTrailingSpace){e.tribute.hasTrailingSpace=!1,e.commandEvent=!0,e.callbacks().space(n,this);return}if(!e.tribute.isActive)if(e.tribute.autocompleteMode)e.callbacks().triggerChar(n,this,"");else{let a=e.getKeyCode(e,this,n);if(isNaN(a)||!a)return;let c=e.tribute.triggers().find(u=>u.charCodeAt(0)===a);typeof c<"u"&&e.callbacks().triggerChar(n,this,c)}e.tribute.current.mentionText.length<e.tribute.current.collection.menuShowMinLength||((e.tribute.current.trigger||e.tribute.autocompleteMode)&&e.commandEvent===!1||e.tribute.isActive&&n.keyCode===8)&&e.tribute.showMenuFor(this,!0)}}shouldDeactivate(e){if(!this.tribute.isActive)return!1;if(this.tribute.current.mentionText.length===0){let n=!1;return h0.keys().forEach(a=>{e.keyCode===a.key&&(n=!0)}),!n}return!1}getKeyCode(e,n,a){let c=e.tribute,u=c.range.getTriggerInfo(!1,c.hasTrailingSpace,!0,c.allowSpaces,c.autocompleteMode);return u?u.mentionTriggerChar.charCodeAt(0):!1}updateSelection(e){this.tribute.current.element=e;let n=this.tribute.range.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);n&&(this.tribute.current.selectedPath=n.mentionSelectedPath,this.tribute.current.mentionText=n.mentionText,this.tribute.current.selectedOffset=n.mentionSelectedOffset)}callbacks(){return{triggerChar:(e,n,a)=>{let c=this.tribute;c.current.trigger=a;let u=c.collection.find(f=>f.trigger===a);c.current.collection=u,c.current.mentionText.length>=c.current.collection.menuShowMinLength&&c.inputEvent&&c.showMenuFor(n,!0)},enter:(e,n)=>{this.tribute.isActive&&this.tribute.current.filteredItems&&(e.preventDefault(),e.stopPropagation(),setTimeout(()=>{this.tribute.selectItemAtIndex(this.tribute.menuSelected,e),this.tribute.hideMenu()},0))},escape:(e,n)=>{this.tribute.isActive&&(e.preventDefault(),e.stopPropagation(),this.tribute.isActive=!1,this.tribute.hideMenu())},tab:(e,n)=>{this.callbacks().enter(e,n)},space:(e,n)=>{this.tribute.isActive&&(this.tribute.spaceSelectsMatch?this.callbacks().enter(e,n):this.tribute.allowSpaces||(e.stopPropagation(),setTimeout(()=>{this.tribute.hideMenu(),this.tribute.isActive=!1},0)))},up:(e,n)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let a=this.tribute.current.filteredItems.length,c=this.tribute.menuSelected;a>c&&c>0?(this.tribute.menuSelected--,this.setActiveLi()):c===0&&(this.tribute.menuSelected=a-1,this.setActiveLi(),this.tribute.menu.scrollTop=this.tribute.menu.scrollHeight)}},down:(e,n)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let a=this.tribute.current.filteredItems.length-1,c=this.tribute.menuSelected;a>c?(this.tribute.menuSelected++,this.setActiveLi()):a===c&&(this.tribute.menuSelected=0,this.setActiveLi(),this.tribute.menu.scrollTop=0)}},delete:(e,n)=>{this.tribute.isActive&&this.tribute.current.mentionText.length<1?this.tribute.hideMenu():this.tribute.isActive&&this.tribute.showMenuFor(n)}}}setActiveLi(e){let n=this.tribute.menu.querySelectorAll("li"),a=n.length>>>0;e&&(this.tribute.menuSelected=parseInt(e));for(let c=0;c<a;c++){let u=n[c];if(c===this.tribute.menuSelected){u.classList.add(this.tribute.current.collection.selectClass);let f=u.getBoundingClientRect(),M=this.tribute.menu.getBoundingClientRect();if(f.bottom>M.bottom){let j=f.bottom-M.bottom;this.tribute.menu.scrollTop+=j}else if(f.top<M.top){let j=M.top-f.top;this.tribute.menu.scrollTop-=j}}else u.classList.remove(this.tribute.current.collection.selectClass)}}getFullHeight(e,n){let a=e.getBoundingClientRect().height;if(n){let c=e.currentStyle||window.getComputedStyle(e);return a+parseFloat(c.marginTop)+parseFloat(c.marginBottom)}return a}}class Lr{constructor(e){this.tribute=e,this.tribute.menuEvents=this,this.menu=this.tribute.menu}bind(e){this.menuClickEvent=this.tribute.events.click.bind(null,this),this.menuContainerScrollEvent=this.debounce(()=>{this.tribute.isActive&&this.tribute.showMenuFor(this.tribute.current.element,!1)},300,!1),this.windowResizeEvent=this.debounce(()=>{this.tribute.isActive&&this.tribute.range.positionMenuAtCaret(!0)},300,!1),this.tribute.range.getDocument().addEventListener("MSPointerDown",this.menuClickEvent,!1),this.tribute.range.getDocument().addEventListener("mousedown",this.menuClickEvent,!1),window.addEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.addEventListener("scroll",this.menuContainerScrollEvent,!1):window.addEventListener("scroll",this.menuContainerScrollEvent)}unbind(e){this.tribute.range.getDocument().removeEventListener("mousedown",this.menuClickEvent,!1),this.tribute.range.getDocument().removeEventListener("MSPointerDown",this.menuClickEvent,!1),window.removeEventListener("resize",this.windowResizeEvent),this.menuContainer?this.menuContainer.removeEventListener("scroll",this.menuContainerScrollEvent,!1):window.removeEventListener("scroll",this.menuContainerScrollEvent)}debounce(e,n,a){var c;return()=>{var u=this,f=arguments,M=()=>{c=null,a||e.apply(u,f)},j=a&&!c;clearTimeout(c),c=setTimeout(M,n),j&&e.apply(u,f)}}}class $r{constructor(e){this.tribute=e,this.tribute.range=this}getDocument(){let e;return this.tribute.current.collection&&(e=this.tribute.current.collection.iframe),e?e.contentWindow.document:document}positionMenuAtCaret(e){let n=this.tribute.current,a,c=this.getTriggerInfo(!1,this.tribute.hasTrailingSpace,!0,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(typeof c<"u"){if(!this.tribute.positionMenu){this.tribute.menu.style.cssText="display: block;";return}this.isContentEditable(n.element)?a=this.getContentEditableCaretPosition(c.mentionPosition):a=this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element,c.mentionPosition),this.tribute.menu.style.cssText=`top: ${a.top}px;
                                     left: ${a.left}px;
                                     right: ${a.right}px;
                                     bottom: ${a.bottom}px;
                                     position: absolute;
                                     display: block;`,a.left==="auto"&&(this.tribute.menu.style.left="auto"),a.top==="auto"&&(this.tribute.menu.style.top="auto"),e&&this.scrollIntoView(),window.setTimeout(()=>{let u={width:this.tribute.menu.offsetWidth,height:this.tribute.menu.offsetHeight},f=this.isMenuOffScreen(a,u),M=window.innerWidth>u.width&&(f.left||f.right),j=window.innerHeight>u.height&&(f.top||f.bottom);(M||j)&&(this.tribute.menu.style.cssText="display: none",this.positionMenuAtCaret(e))},0)}else this.tribute.menu.style.cssText="display: none"}get menuContainerIsBody(){return this.tribute.menuContainer===document.body||!this.tribute.menuContainer}selectElement(e,n,a){let c,u=e;if(n)for(var f=0;f<n.length;f++){if(u=u.childNodes[n[f]],u===void 0)return;for(;u.length<a;)a-=u.length,u=u.nextSibling;u.childNodes.length===0&&!u.length&&(u=u.previousSibling)}let M=this.getWindowSelection();c=this.getDocument().createRange(),c.setStart(u,a),c.setEnd(u,a),c.collapse(!0);try{M.removeAllRanges()}catch{}M.addRange(c),e.focus()}replaceTriggerText(e,n,a,c,u){let f=this.getTriggerInfo(!0,a,n,this.tribute.allowSpaces,this.tribute.autocompleteMode);if(f!==void 0){let M=this.tribute.current,j=new CustomEvent("tribute-replaced",{detail:{item:u,instance:M,context:f,event:c}});if(this.isContentEditable(M.element)){let V=typeof this.tribute.replaceTextSuffix=="string"?this.tribute.replaceTextSuffix:" ";e+=V;let A=f.mentionPosition+f.mentionText.length;this.tribute.autocompleteMode||(A+=f.mentionTriggerChar.length),this.pasteHtml(e,f.mentionPosition,A)}else{let V=this.tribute.current.element,A=typeof this.tribute.replaceTextSuffix=="string"?this.tribute.replaceTextSuffix:" ";e+=A;let de=f.mentionPosition,J=f.mentionPosition+f.mentionText.length+A.length;this.tribute.autocompleteMode||(J+=f.mentionTriggerChar.length-1),V.value=V.value.substring(0,de)+e+V.value.substring(J,V.value.length),V.selectionStart=de+e.length,V.selectionEnd=de+e.length}M.element.dispatchEvent(new CustomEvent("input",{bubbles:!0})),M.element.dispatchEvent(j)}}pasteHtml(e,n,a){let c,u;u=this.getWindowSelection(),c=this.getDocument().createRange(),c.setStart(u.anchorNode,n),c.setEnd(u.anchorNode,a),c.deleteContents();let f=this.getDocument().createElement("div");f.innerHTML=e;let M=this.getDocument().createDocumentFragment(),j,V;for(;j=f.firstChild;)V=M.appendChild(j);c.insertNode(M),V&&(c=c.cloneRange(),c.setStartAfter(V),c.collapse(!0),u.removeAllRanges(),u.addRange(c))}getWindowSelection(){return this.tribute.collection.iframe?this.tribute.collection.iframe.contentWindow.getSelection():window.getSelection()}getNodePositionInParent(e){if(e.parentNode===null)return 0;for(var n=0;n<e.parentNode.childNodes.length;n++)if(e.parentNode.childNodes[n]===e)return n}getContentEditableSelectedPath(e){let n=this.getWindowSelection(),a=n.anchorNode,c=[],u;if(a!=null){let f,M=a.contentEditable;for(;a!==null&&M!=="true";)f=this.getNodePositionInParent(a),c.push(f),a=a.parentNode,a!==null&&(M=a.contentEditable);return c.reverse(),u=n.getRangeAt(0).startOffset,{selected:a,path:c,offset:u}}}getTextPrecedingCurrentSelection(){let e=this.tribute.current,n="";if(this.isContentEditable(e.element)){let a=this.getWindowSelection().anchorNode;if(a!=null){let c=a.textContent,u=this.getWindowSelection().getRangeAt(0).startOffset;c&&u>=0&&(n=c.substring(0,u))}}else{let a=this.tribute.current.element;if(a){let c=a.selectionStart;a.value&&c>=0&&(n=a.value.substring(0,c))}}return n}getLastWordInText(e){e=e.replace(/\u00A0/g," ");let n=e.split(/\s+/),a=n.length-1;return n[a].trim()}getTriggerInfo(e,n,a,c,u){let f=this.tribute.current,M,j,V;if(!this.isContentEditable(f.element))M=this.tribute.current.element;else{let J=this.getContentEditableSelectedPath(f);J&&(M=J.selected,j=J.path,V=J.offset)}let A=this.getTextPrecedingCurrentSelection(),de=this.getLastWordInText(A);if(u)return{mentionPosition:A.length-de.length,mentionText:de,mentionSelectedElement:M,mentionSelectedPath:j,mentionSelectedOffset:V};if(A!=null){let J=-1,_e;if(this.tribute.collection.forEach(z=>{let ee=z.trigger,re=z.requireLeadingSpace?this.lastIndexWithLeadingSpace(A,ee):A.lastIndexOf(ee);re>J&&(J=re,_e=ee,a=z.requireLeadingSpace)}),J>=0&&(J===0||!a||/[\xA0\s]/g.test(A.substring(J-1,J)))){let z=A.substring(J+_e.length,A.length);_e=A.substring(J,J+_e.length);let ee=z.substring(0,1),re=z.length>0&&(ee===" "||ee===" ");n&&(z=z.trim());let Se=c?/[^\S ]/g:/[\xA0\s]/g;if(this.tribute.hasTrailingSpace=Se.test(z),!re&&(e||!Se.test(z)))return{mentionPosition:J,mentionText:z,mentionSelectedElement:M,mentionSelectedPath:j,mentionSelectedOffset:V,mentionTriggerChar:_e}}}}lastIndexWithLeadingSpace(e,n){let a=e.split("").reverse().join(""),c=-1;for(let u=0,f=e.length;u<f;u++){let M=u===e.length-1,j=/\s/.test(a[u+1]),V=!0;for(let A=n.length-1;A>=0;A--)if(n[A]!==a[u-A]){V=!1;break}if(V&&(M||j)){c=e.length-1-u;break}}return c}isContentEditable(e){return e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"}isMenuOffScreen(e,n){let a=window.innerWidth,c=window.innerHeight,u=document.documentElement,f=(window.pageXOffset||u.scrollLeft)-(u.clientLeft||0),M=(window.pageYOffset||u.scrollTop)-(u.clientTop||0),j=typeof e.top=="number"?e.top:M+c-e.bottom-n.height,V=typeof e.right=="number"?e.right:e.left+n.width,A=typeof e.bottom=="number"?e.bottom:e.top+n.height,de=typeof e.left=="number"?e.left:f+a-e.right-n.width;return{top:j<Math.floor(M),right:V>Math.ceil(f+a),bottom:A>Math.ceil(M+c),left:de<Math.floor(f)}}getMenuDimensions(){let e={width:null,height:null};return this.tribute.menu.style.cssText=`top: 0px;
                                 left: 0px;
                                 position: fixed;
                                 display: block;
                                 visibility; hidden;`,e.width=this.tribute.menu.offsetWidth,e.height=this.tribute.menu.offsetHeight,this.tribute.menu.style.cssText="display: none;",e}getTextAreaOrInputUnderlinePosition(e,n,a){let c=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"],u=window.mozInnerScreenX!==null,f=this.getDocument().createElement("div");f.id="input-textarea-caret-position-mirror-div",this.getDocument().body.appendChild(f);let M=f.style,j=window.getComputedStyle?getComputedStyle(e):e.currentStyle;M.whiteSpace="pre-wrap",e.nodeName!=="INPUT"&&(M.wordWrap="break-word"),M.position="absolute",M.visibility="hidden",c.forEach(De=>{M[De]=j[De]}),u?(M.width=`${parseInt(j.width)-2}px`,e.scrollHeight>parseInt(j.height)&&(M.overflowY="scroll")):M.overflow="hidden",f.textContent=e.value.substring(0,n),e.nodeName==="INPUT"&&(f.textContent=f.textContent.replace(/\s/g," "));let V=this.getDocument().createElement("span");V.textContent=e.value.substring(n)||".",f.appendChild(V);let A=e.getBoundingClientRect(),de=document.documentElement,J=(window.pageXOffset||de.scrollLeft)-(de.clientLeft||0),_e=(window.pageYOffset||de.scrollTop)-(de.clientTop||0),z=0,ee=0;this.menuContainerIsBody&&(z=A.top,ee=A.left);let re={top:z+_e+V.offsetTop+parseInt(j.borderTopWidth)+parseInt(j.fontSize)-e.scrollTop,left:ee+J+V.offsetLeft+parseInt(j.borderLeftWidth)},Se=window.innerWidth,te=window.innerHeight,Ce=this.getMenuDimensions(),Be=this.isMenuOffScreen(re,Ce);Be.right&&(re.right=Se-re.left,re.left="auto");let Ve=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(Be.bottom){let De=this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect(),Ne=Ve-(te-De.top);re.bottom=Ne+(te-A.top-V.offsetTop),re.top="auto"}return Be=this.isMenuOffScreen(re,Ce),Be.left&&(re.left=Se>Ce.width?J+Se-Ce.width:J,delete re.right),Be.top&&(re.top=te>Ce.height?_e+te-Ce.height:_e,delete re.bottom),this.getDocument().body.removeChild(f),re}getContentEditableCaretPosition(e){let n,a=this.getWindowSelection();n=this.getDocument().createRange(),n.setStart(a.anchorNode,e),n.setEnd(a.anchorNode,e),n.collapse(!1);let c=n.getBoundingClientRect(),u=document.documentElement,f=(window.pageXOffset||u.scrollLeft)-(u.clientLeft||0),M=(window.pageYOffset||u.scrollTop)-(u.clientTop||0),j=c.left,V=c.top,A={left:j+f,top:V+c.height+M},de=window.innerWidth,J=window.innerHeight,_e=this.getMenuDimensions(),z=this.isMenuOffScreen(A,_e);z.right&&(A.left="auto",A.right=de-c.left-f);let ee=this.tribute.menuContainer?this.tribute.menuContainer.offsetHeight:this.getDocument().body.offsetHeight;if(z.bottom){let re=this.tribute.menuContainer?this.tribute.menuContainer.getBoundingClientRect():this.getDocument().body.getBoundingClientRect(),Se=ee-(J-re.top);A.top="auto",A.bottom=Se+(J-c.top)}return z=this.isMenuOffScreen(A,_e),z.left&&(A.left=de>_e.width?f+de-_e.width:f,delete A.right),z.top&&(A.top=J>_e.height?M+J-_e.height:M,delete A.bottom),this.menuContainerIsBody||(A.left=A.left?A.left-this.tribute.menuContainer.offsetLeft:A.left,A.top=A.top?A.top-this.tribute.menuContainer.offsetTop:A.top),A}scrollIntoView(e){let n=20,a,c=100,u=this.menu;if(typeof u>"u")return;for(;a===void 0||a.height===0;)if(a=u.getBoundingClientRect(),a.height===0&&(u=u.childNodes[0],u===void 0||!u.getBoundingClientRect))return;let f=a.top,M=f+a.height;if(f<0)window.scrollTo(0,window.pageYOffset+a.top-n);else if(M>window.innerHeight){let j=window.pageYOffset+a.top-n;j-window.pageYOffset>c&&(j=window.pageYOffset+c);let V=window.pageYOffset-(window.innerHeight-M);V>j&&(V=j),window.scrollTo(0,V)}}}class Ir{constructor(e){this.tribute=e,this.tribute.search=this}simpleFilter(e,n){return n.filter(a=>this.test(e,a))}test(e,n){return this.match(e,n)!==null}match(e,n,a){a=a||{},n.length;let c=a.pre||"",u=a.post||"",f=a.caseSensitive&&n||n.toLowerCase();if(a.skip)return{rendered:n,score:0};e=a.caseSensitive&&e||e.toLowerCase();let M=this.traverse(f,e,0,0,[]);return M?{rendered:this.render(n,M.cache,c,u),score:M.score}:null}traverse(e,n,a,c,u){if(n.length===c)return{score:this.calculateScore(u),cache:u.slice()};if(e.length===a||n.length-c>e.length-a)return;let f=n[c],M=e.indexOf(f,a),j,V;for(;M>-1;){if(u.push(M),V=this.traverse(e,n,M+1,c+1,u),u.pop(),!V)return j;(!j||j.score<V.score)&&(j=V),M=e.indexOf(f,M+1)}return j}calculateScore(e){let n=0,a=1;return e.forEach((c,u)=>{u>0&&(e[u-1]+1===c?a+=a+1:a=1),n+=a}),n}render(e,n,a,c){var u=e.substring(0,n[0]);return n.forEach((f,M)=>{u+=a+e[f]+c+e.substring(f+1,n[M+1]?n[M+1]:e.length)}),u}filter(e,n,a){return a=a||{},n.reduce((c,u,f,M)=>{let j=u;a.extract&&(j=a.extract(u),j||(j=""));let V=this.match(e,j,a);return V!=null&&(c[c.length]={string:V.rendered,score:V.score,index:f,original:u}),c},[]).sort((c,u)=>{let f=u.score-c.score;return f||c.index-u.index})}}class zt{constructor({values:e=null,iframe:n=null,selectClass:a="highlight",containerClass:c="tribute-container",itemClass:u="",trigger:f="@",autocompleteMode:M=!1,selectTemplate:j=null,menuItemTemplate:V=null,lookup:A="key",fillAttr:de="value",collection:J=null,menuContainer:_e=null,noMatchTemplate:z=null,requireLeadingSpace:ee=!0,allowSpaces:re=!1,replaceTextSuffix:Se=null,positionMenu:te=!0,spaceSelectsMatch:Ce=!1,searchOpts:Be={},menuItemLimit:Ve=null,menuShowMinLength:De=0}){if(this.autocompleteMode=M,this.menuSelected=0,this.current={},this.inputEvent=!1,this.isActive=!1,this.menuContainer=_e,this.allowSpaces=re,this.replaceTextSuffix=Se,this.positionMenu=te,this.hasTrailingSpace=!1,this.spaceSelectsMatch=Ce,this.autocompleteMode&&(f="",re=!1),e)this.collection=[{trigger:f,iframe:n,selectClass:a,containerClass:c,itemClass:u,selectTemplate:(j||zt.defaultSelectTemplate).bind(this),menuItemTemplate:(V||zt.defaultMenuItemTemplate).bind(this),noMatchTemplate:(Ne=>typeof Ne=="string"?Ne.trim()===""?null:Ne:typeof Ne=="function"?Ne.bind(this):z||(function(){return"<li>No Match Found!</li>"}).bind(this))(z),lookup:A,fillAttr:de,values:e,requireLeadingSpace:ee,searchOpts:Be,menuItemLimit:Ve,menuShowMinLength:De}];else if(J)this.autocompleteMode&&console.warn("Tribute in autocomplete mode does not work for collections"),this.collection=J.map(Ne=>({trigger:Ne.trigger||f,iframe:Ne.iframe||n,selectClass:Ne.selectClass||a,containerClass:Ne.containerClass||c,itemClass:Ne.itemClass||u,selectTemplate:(Ne.selectTemplate||zt.defaultSelectTemplate).bind(this),menuItemTemplate:(Ne.menuItemTemplate||zt.defaultMenuItemTemplate).bind(this),noMatchTemplate:(Ye=>typeof Ye=="string"?Ye.trim()===""?null:Ye:typeof Ye=="function"?Ye.bind(this):z||(function(){return"<li>No Match Found!</li>"}).bind(this))(z),lookup:Ne.lookup||A,fillAttr:Ne.fillAttr||de,values:Ne.values,requireLeadingSpace:Ne.requireLeadingSpace,searchOpts:Ne.searchOpts||Be,menuItemLimit:Ne.menuItemLimit||Ve,menuShowMinLength:Ne.menuShowMinLength||De}));else throw new Error("[Tribute] No collection specified.");new $r(this),new h0(this),new Lr(this),new Ir(this)}get isActive(){return this._isActive}set isActive(e){if(this._isActive!=e&&(this._isActive=e,this.current.element)){let n=new CustomEvent(`tribute-active-${e}`);this.current.element.dispatchEvent(n)}}static defaultSelectTemplate(e){return typeof e>"u"?`${this.current.collection.trigger}${this.current.mentionText}`:this.range.isContentEditable(this.current.element)?'<span class="tribute-mention">'+(this.current.collection.trigger+e.original[this.current.collection.fillAttr])+"</span>":this.current.collection.trigger+e.original[this.current.collection.fillAttr]}static defaultMenuItemTemplate(e){return e.string}static inputTypes(){return["TEXTAREA","INPUT"]}triggers(){return this.collection.map(e=>e.trigger)}attach(e){if(!e)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if(typeof jQuery<"u"&&e instanceof jQuery&&(e=e.get()),e.constructor===NodeList||e.constructor===HTMLCollection||e.constructor===Array){let a=e.length;for(var n=0;n<a;++n)this._attach(e[n])}else this._attach(e)}_attach(e){e.hasAttribute("data-tribute")&&console.warn("Tribute was already bound to "+e.nodeName),this.ensureEditable(e),this.events.bind(e),e.setAttribute("data-tribute",!0)}ensureEditable(e){if(zt.inputTypes().indexOf(e.nodeName)===-1)if(e.contentEditable)e.contentEditable=!0;else throw new Error("[Tribute] Cannot bind to "+e.nodeName)}createMenu(e){let n=this.range.getDocument().createElement("div"),a=this.range.getDocument().createElement("ul");return n.className=e,n.appendChild(a),this.menuContainer?this.menuContainer.appendChild(n):this.range.getDocument().body.appendChild(n)}showMenuFor(e,n){if(this.isActive&&this.current.element===e&&this.current.mentionText===this.currentMentionTextSnapshot)return;this.currentMentionTextSnapshot=this.current.mentionText,this.menu||(this.menu=this.createMenu(this.current.collection.containerClass),e.tributeMenu=this.menu,this.menuEvents.bind(this.menu)),this.isActive=!0,this.menuSelected=0,this.current.mentionText||(this.current.mentionText="");const a=c=>{if(!this.isActive)return;let u=this.search.filter(this.current.mentionText,c,{pre:this.current.collection.searchOpts.pre||"<span>",post:this.current.collection.searchOpts.post||"</span>",skip:this.current.collection.searchOpts.skip,extract:j=>{if(typeof this.current.collection.lookup=="string")return j[this.current.collection.lookup];if(typeof this.current.collection.lookup=="function")return this.current.collection.lookup(j,this.current.mentionText);throw new Error("Invalid lookup attribute, lookup must be string or function.")}});this.current.collection.menuItemLimit&&(u=u.slice(0,this.current.collection.menuItemLimit)),this.current.filteredItems=u;let f=this.menu.querySelector("ul");if(this.range.positionMenuAtCaret(n),!u.length){let j=new CustomEvent("tribute-no-match",{detail:this.menu});this.current.element.dispatchEvent(j),typeof this.current.collection.noMatchTemplate=="function"&&!this.current.collection.noMatchTemplate()||!this.current.collection.noMatchTemplate?this.hideMenu():typeof this.current.collection.noMatchTemplate=="function"?f.innerHTML=this.current.collection.noMatchTemplate():f.innerHTML=this.current.collection.noMatchTemplate;return}f.innerHTML="";let M=this.range.getDocument().createDocumentFragment();u.forEach((j,V)=>{let A=this.range.getDocument().createElement("li");A.setAttribute("data-index",V),A.className=this.current.collection.itemClass,A.addEventListener("mousemove",de=>{let[J,_e]=this._findLiTarget(de.target);de.movementY!==0&&this.events.setActiveLi(_e)}),this.menuSelected===V&&A.classList.add(this.current.collection.selectClass),A.innerHTML=this.current.collection.menuItemTemplate(j),M.appendChild(A)}),f.appendChild(M)};typeof this.current.collection.values=="function"?this.current.collection.values(this.current.mentionText,a):a(this.current.collection.values)}_findLiTarget(e){if(!e)return[];const n=e.getAttribute("data-index");return n?[e,n]:this._findLiTarget(e.parentNode)}showMenuForCollection(e,n){e!==document.activeElement&&this.placeCaretAtEnd(e),this.current.collection=this.collection[n||0],this.current.externalTrigger=!0,this.current.element=e,e.isContentEditable?this.insertTextAtCursor(this.current.collection.trigger):this.insertAtCaret(e,this.current.collection.trigger),this.showMenuFor(e)}placeCaretAtEnd(e){if(e.focus(),typeof window.getSelection<"u"&&typeof document.createRange<"u"){var n=document.createRange();n.selectNodeContents(e),n.collapse(!1);var a=window.getSelection();a.removeAllRanges(),a.addRange(n)}else if(typeof document.body.createTextRange<"u"){var c=document.body.createTextRange();c.moveToElementText(e),c.collapse(!1),c.select()}}insertTextAtCursor(e){var n,a;n=window.getSelection(),a=n.getRangeAt(0),a.deleteContents();var c=document.createTextNode(e);a.insertNode(c),a.selectNodeContents(c),a.collapse(!1),n.removeAllRanges(),n.addRange(a)}insertAtCaret(e,n){var a=e.scrollTop,c=e.selectionStart,u=e.value.substring(0,c),f=e.value.substring(e.selectionEnd,e.value.length);e.value=u+n+f,c=c+n.length,e.selectionStart=c,e.selectionEnd=c,e.focus(),e.scrollTop=a}hideMenu(){this.menu&&(this.menu.style.cssText="display: none;",this.isActive=!1,this.menuSelected=0,this.current={})}selectItemAtIndex(e,n){if(e=parseInt(e),typeof e!="number"||isNaN(e))return;let a=this.current.filteredItems[e],c=this.current.collection.selectTemplate(a);c!==null&&this.replaceText(c,n,a)}replaceText(e,n,a){this.range.replaceTriggerText(e,!0,!0,n,a)}_append(e,n,a){if(typeof e.values=="function")throw new Error("Unable to append to values, as it is a function.");a?e.values=n:e.values=e.values.concat(n)}append(e,n,a){let c=parseInt(e);if(typeof c!="number")throw new Error("please provide an index for the collection to update.");let u=this.collection[c];this._append(u,n,a)}appendCurrent(e,n){if(this.isActive)this._append(this.current.collection,e,n);else throw new Error("No active state. Please use append instead and pass an index.")}detach(e){if(!e)throw new Error("[Tribute] Must pass in a DOM node or NodeList.");if(typeof jQuery<"u"&&e instanceof jQuery&&(e=e.get()),e.constructor===NodeList||e.constructor===HTMLCollection||e.constructor===Array){let a=e.length;for(var n=0;n<a;++n)this._detach(e[n])}else this._detach(e)}_detach(e){this.events.unbind(e),e.tributeMenu&&this.menuEvents.unbind(e.tributeMenu),setTimeout(()=>{e.removeAttribute("data-tribute"),this.isActive=!1,e.tributeMenu&&e.tributeMenu.remove()})}}//! pretty-print-json v3.0.5 ~~ https://pretty-print-json.js.org ~~ MIT License
const M0={version:"3.0.5",toHtml(o,e){const a={...{indent:3,lineNumbers:!1,linkUrls:!0,linksNewTab:!0,quoteKeys:!1,trailingCommas:!0},...e},c=/[<>&]|\\"/g,u=z=>z==="<"?"&lt;":z===">"?"&gt;":z==="&"?"&amp;":"&bsol;&quot;",f=(z,ee)=>ee?"<span class=json-"+z+">"+ee+"</span>":"",M=z=>{const ee=/^"/.test(z)&&"string",te=["true","false"].includes(z)&&"boolean"||z==="null"&&"null"||ee||"number",Ce=/https?:\/\/[^\s"]+/g,Be=a.linksNewTab?" target=_blank":"",Ve=Ne=>`<a class=json-link href="${Ne}"${Be}>${Ne}</a>`,De=ee&&a.linkUrls?z.replace(Ce,Ve):z;return f(te,De)},j=(z,...ee)=>{const re={indent:ee[0],key:ee[1],value:ee[2],end:ee[3]},Se=a.quoteKeys?/(.*)(): /:/"([\w$]+)": |(.*): /,te=re.indent||"",Ce=re.key&&re.key.replace(Se,"$1$2"),Be=re.key?f("key",Ce)+f("mark",": "):"",Ve=re.value?M(re.value):"",De=!re.end||["]","}"].includes(z.at(-1)),Ne=a.trailingCommas&&z.at(0)===" "&&De,Ye=f("mark",Ne?(re.end??"")+",":re.end);return te+Be+Ve+Ye},V=/^( *)("[^"]+": )?("[^"]*"|[\w.+-]*)?([{}[\],]*)?$/mg,de=(JSON.stringify(o,null,a.indent)||"undefined").replace(c,u).replace(V,j),J=z=>`   <li>${z}</li>`,_e=z=>["<ol class=json-lines>",...z.split(`
`).map(J),"</ol>"].join(`
`);return a.lineNumbers?_e(de):de}};var T0={exports:{}},vn;function Dr(){return vn||(vn=1,(function(o){(function(e){var n=typeof window=="object"&&!!window.document,a=n?window:Object;e(a,n),o.exports&&(o.exports=a.Recorder)})(function(e,n){var a=function(){},c=function(E){return typeof E=="number"},u=function(E){return JSON.stringify(E)},f=function(E){return new bt(E)},M=f.LM="2025-01-11 09:28",j="https://github.com/xiangyuecn/Recorder",V="Recorder",A="getUserMedia",de="srcSampleRate",J="sampleRate",_e="bitRate",z="catch",ee=e[V];if(ee&&ee.LM==M){ee.CLog(ee.i18n.$T("K8zP::重复导入{1}",0,V),3);return}f.IsOpen=function(){var E=f.Stream;if(E){var I=dt(E),s=I[0];if(s){var X=s.readyState;return X=="live"||X==s.LIVE}}return!1},f.BufferSize=4096,f.Destroy=function(){Xe(V+" Destroy"),Ae();for(var E in re)re[E]()};var re={};f.BindDestroy=function(E,I){re[E]=I},f.Support=function(){if(!n)return!1;var E=navigator.mediaDevices||{};return E[A]||(E=navigator,E[A]||(E[A]=E.webkitGetUserMedia||E.mozGetUserMedia||E.msGetUserMedia)),!(!E[A]||(f.Scope=E,!f.GetContext()))},f.GetContext=function(E){if(!n)return null;var I=window.AudioContext;if(I||(I=window.webkitAudioContext),!I)return null;var s=f.Ctx,X=0;return s||(s=f.Ctx=new I,X=1,f.NewCtxs=f.NewCtxs||[],f.BindDestroy("Ctx",function(){var ne=f.Ctx;ne&&ne.close&&(Se(ne),f.Ctx=0);var fe=f.NewCtxs;f.NewCtxs=[];for(var ue=0;ue<fe.length;ue++)Se(fe[ue])})),E&&s.close&&(X||(s._useC||Se(s),s=new I),s._useC=1,f.NewCtxs.push(s)),s},f.CloseNewCtx=function(E){if(E&&E.close){Se(E);for(var I=f.NewCtxs||[],s=I.length,X=0;X<I.length;X++)if(I[X]==E){I.splice(X,1);break}Xe(pe("mSxV::剩{1}个GetContext未close",0,s+"-1="+I.length),I.length?3:0)}};var Se=function(E){if(E&&E.close&&!E._isC&&(E._isC=1,E.state!="closed"))try{E.close()}catch(I){Xe("ctx close err",1,I)}},te=f.ResumeCtx=function(E,I,s,X){var ne=0,fe=0,ue=0,ke=0,Me="EventListener",Te="ResumeCtx ",ge=function(qe,Le){fe&&it(),ne||(ne=1,qe&&X(qe,ke),Le&&s(ke)),Le&&(!E._LsSC&&E["add"+Me]&&E["add"+Me]("statechange",Fe),E._LsSC=1,ue=1)},it=function(qe){if(!(qe&&fe)){fe=qe?1:0;for(var Le=["focus","mousedown","mouseup","touchstart","touchend"],Qe=0;Qe<Le.length;Qe++)window[(qe?"add":"remove")+Me](Le[Qe],Fe,!0)}},Fe=function(){var qe=E.state,Le=Ce(qe);if(!ne&&!I(Le?++ke:ke))return ge();Le?(ue&&Xe(Te+"sc "+qe,3),it(1),E.resume().then(function(){ue&&Xe(Te+"sc "+E.state),ge(0,1)})[z](function(Qe){Xe(Te+"error",1,Qe),Ce(E.state)||ge(Qe.message||"error")})):qe=="closed"?(ue&&!E._isC&&Xe(Te+"sc "+qe,1),ge("ctx closed")):ge(0,1)};Fe()},Ce=f.CtxSpEnd=function(E){return E=="suspended"||E=="interrupted"},Be=function(E){var I=E.state,s="ctx.state="+I;return Ce(I)&&(s+=pe("nMIy::（注意：ctx不是running状态，rec.open和start至少要有一个在用户操作(触摸、点击等)时进行调用，否则将在rec.start时尝试进行ctx.resume，可能会产生兼容性问题(仅iOS)，请参阅文档中runningContext配置）")),s},Ve="ConnectEnableWebM";f[Ve]=!0;var De="ConnectEnableWorklet";f[De]=!1;var Ne=function(E){var I=E.BufferSize||f.BufferSize,s=E.Stream,X=s._c,ne=X[J],fe={},ue=dt(s),ke=ue[0],Me=null,Te="";if(ke&&ke.getSettings){Me=ke.getSettings();var ge=Me[J];ge&&ge!=ne&&(Te=pe("eS8i::Stream的采样率{1}不等于{2}，将进行采样率转换（注意：音质不会变好甚至可能变差），主要在移动端未禁用回声消除时会产生此现象，浏览器有回声消除时可能只会返回16k采样率的音频数据，",0,ge,ne))}s._ts=Me,Xe(Te+"Stream TrackSet: "+u(Me),Te?3:0);var it=function(R){var T=s._m=X.createMediaStreamSource(s),d=X.destination,g="createMediaStreamDestination";X[g]&&(d=s._d=X[g]()),T.connect(R),R.connect(d)},Fe,qe,Le,Qe="",p=s._call,P=function(R,T){for(var d in p){if(T!=ne){fe.index=0,fe=f.SampleData([R],T,ne,fe,{_sum:1});var g=fe.data,y=fe._sum}else{fe={};for(var C=R.length,g=new Int16Array(C),y=0,v=0;v<C;v++){var w=Math.max(-1,Math.min(1,R[v]));w=w<0?w*32768:w*32767,g[v]=w,y+=Math.abs(w)}}for(var t in p)p[t](g,y);return}},U="ScriptProcessor",S="audioWorklet",ae=V+" "+S,L="RecProc",D="MediaRecorder",le=D+".WebM.PCM",O=X.createScriptProcessor||X.createJavaScriptNode,G=pe("ZGlf::。由于{1}内部1秒375次回调，在移动端可能会有性能问题导致回调丢失录音变短，PC端无影响，暂不建议开启{1}。",0,S),h=function(){qe=s.isWorklet=!1,_t(s),Xe(pe("7TU0::Connect采用老的{1}，",0,U)+vt.get(f[De]?pe("JwCL::但已设置{1}尝试启用{2}",2):pe("VGjB::可设置{1}尝试启用{2}",2),[V+"."+De+"=true",S])+Qe+G,3);var R=s._p=O.call(X,I,1,1);it(R),R.onaudioprocess=function(T){var d=T.inputBuffer.getChannelData(0);P(d,ne)}},$=function(){Fe=s.isWebM=!1,We(s),qe=s.isWorklet=!O||f[De];var R=window.AudioWorkletNode;if(!(qe&&X[S]&&R)){h();return}var T=function(){var v=function(t){return t.toString().replace(/^function|DEL_/g,"").replace(/\$RA/g,ae)},w="class "+L+" extends AudioWorkletProcessor{";return w+="constructor "+v(function(t){DEL_super(t);var B=this,x=t.processorOptions.bufferSize;B.bufferSize=x,B.buffer=new Float32Array(x*2),B.pos=0,B.port.onmessage=function(q){q.data.kill&&(B.kill=!0,$C.log("$RA kill call"))},$C.log("$RA .ctor call",t)}),w+="process "+v(function(t,B,x){var q=this,m=q.bufferSize,_=q.buffer,b=q.pos;if(t=(t[0]||[])[0]||[],t.length){_.set(t,b),b+=t.length;var k=~~(b/m)*m;if(k){this.port.postMessage({val:_.slice(0,k)});var N=_.subarray(k,b);_=new Float32Array(m*2),_.set(N),b=N.length,q.buffer=_}q.pos=b}return!q.kill}),w+='}try{registerProcessor("'+L+'", '+L+')}catch(e){$C.error("'+ae+' Reg Error",e)}',w=w.replace(/\$C\./g,"console."),"data:text/javascript;base64,"+btoa(unescape(encodeURIComponent(w)))},d=function(){return qe&&s._na},g=s._na=function(){Le!==""&&(clearTimeout(Le),Le=setTimeout(function(){Le=0,d()&&(Xe(pe("MxX1::{1}未返回任何音频，恢复使用{2}",0,S,U),3),O&&h())},500))},y=function(){if(d()){var v=s._n=new R(X,L,{processorOptions:{bufferSize:I}});it(v),v.port.onmessage=function(w){Le&&(clearTimeout(Le),Le=""),d()?P(w.data.val,ne):qe||Xe(pe("XUap::{1}多余回调",0,S),3)},Xe(pe("yOta::Connect采用{1}，设置{2}可恢复老式{3}",0,S,V+"."+De+"=false",U)+Qe+G,3)}},C=function(){if(d()){if(X[L]){y();return}var v=T();X[S].addModule(v).then(function(w){d()&&(X[L]=1,y(),Le&&g())})[z](function(w){Xe(S+".addModule Error",1,w),d()&&h()})}};te(X,function(){return d()},C,C)},i=function(){var R=window[D],T="ondataavailable",d="audio/webm; codecs=pcm";Fe=s.isWebM=f[Ve];var g=R&&T in R.prototype&&R.isTypeSupported(d);if(Qe=g?"":pe("VwPd::（此浏览器不支持{1}）",0,le),!Fe||!g){$();return}var y=function(){return Fe&&s._ra};s._ra=function(){Le!==""&&(clearTimeout(Le),Le=setTimeout(function(){y()&&(Xe(pe("vHnb::{1}未返回任何音频，降级使用{2}",0,D,S),3),$())},500))};var C=Object.assign({mimeType:d},f.ConnectWebMOptions),v=s._r=new R(s,C),w=s._rd={};v[T]=function(t){var B=new FileReader;B.onloadend=function(){if(y()){var x=Rt(new Uint8Array(B.result),w);if(!x)return;if(x==-1){$();return}Le&&(clearTimeout(Le),Le=""),P(x,w.webmSR)}else Fe||Xe(pe("O9P7::{1}多余回调",0,D),3)},B.readAsArrayBuffer(t.data)};try{v.start(~~(I/48)),Xe(pe("LMEm::Connect采用{1}，设置{2}可恢复使用{3}或老式{4}",0,le,V+"."+Ve+"=false",S,U))}catch(t){Xe("mr start err",1,t),$()}};i()},Ye=function(E){E._na&&E._na(),E._ra&&E._ra()},_t=function(E){E._na=null,E._n&&(E._n.port.postMessage({kill:!0}),E._n.disconnect(),E._n=null)},We=function(E){if(E._ra=null,E._r){try{E._r.stop()}catch(I){Xe("mr stop err",1,I)}E._r=null}},Ae=function(E){E=E||f;var I=E==f,s=E.Stream;s&&(s._m&&(s._m.disconnect(),s._m=null),!s._RC&&s._c&&f.CloseNewCtx(s._c),s._RC=null,s._c=null,s._d&&(W(s._d.stream),s._d=null),s._p&&(s._p.disconnect(),s._p.onaudioprocess=s._p=null),_t(s),We(s),I&&W(s)),E.Stream=0},W=f.StopS_=function(E){for(var I=dt(E),s=0;s<I.length;s++){var X=I[s];X.stop&&X.stop()}E.stop&&E.stop()},dt=function(E){var I=0,s=0,X=[];E.getAudioTracks&&(I=E.getAudioTracks(),s=E.getVideoTracks()),I||(I=E.audioTracks,s=E.videoTracks);for(var ne=0,fe=I?I.length:0;ne<fe;ne++)X.push(I[ne]);for(var ne=0,fe=s?s.length:0;ne<fe;ne++)X.push(s[ne]);return X};f.SampleData=function(E,I,s,X,ne){var fe="SampleData";X||(X={});var ue=X.index||0,ke=X.offset||0,Me=X.raisePrev||0,Te=X.filter;if(Te&&Te.fn&&(Te.sr&&Te.sr!=I||Te.srn&&Te.srn!=s)&&(Te=null,Xe(pe("d48C::{1}的filter采样率变了，重设滤波",0,fe),3)),!Te)if(s<=I){var ge=s>I*3/4?0:s/2*3/4;Te={fn:ge?f.IIRFilter(!0,I,ge):0}}else{var ge=I>s*3/4?0:I/2*3/4;Te={fn:ge?f.IIRFilter(!0,s,ge):0}}Te.sr=I,Te.srn=s;var it=Te.fn,Fe=X.frameNext||[];ne||(ne={});var qe=ne.frameSize||1;ne.frameType&&(qe=ne.frameType=="mp3"?1152:1);var Le=ne._sum,Qe=0,p=E.length;ue>p+1&&Xe(pe("tlbC::{1}似乎传入了未重置chunk {2}",0,fe,ue+">"+p),3);for(var P=0,U=ue;U<p;U++)P+=E[U].length;var S=I/s;if(S>1)P=Math.max(0,P-Math.floor(ke)),P=Math.floor(P/S);else if(S<1){var ae=1/S;P=Math.floor(P*ae)}P+=Fe.length;for(var L=new Int16Array(P),D=0,U=0;U<Fe.length;U++)L[D]=Fe[U],D++;for(;ue<p;ue++){var le=E[ue],O=le instanceof Float32Array,U=ke,G=le.length,h=it&&it.Embed,$=0,i=0,R=0,T=0;if(S<1){for(var d=D+U,g=Me,y=0;y<G;y++){var C=le[y];O&&(C=Math.max(-1,Math.min(1,C)),C=C<0?C*32768:C*32767);var v=Math.floor(d);d+=ae;for(var w=Math.floor(d),t=(C-g)/(w-v),B=1;v<w;v++,B++){var x=Math.floor(g+B*t);h?(R=x,T=h.b0*R+h.b1*h.x1+h.b0*h.x2-h.a1*h.y1-h.a2*h.y2,h.x2=h.x1,h.x1=R,h.y2=h.y1,h.y1=T,x=T):x=it?it(x):x,x>32767?x=32767:x<-32768&&(x=-32768),Le&&(Qe+=Math.abs(x)),L[v]=x,D++}g=Me=C,U+=ae}ke=U%1;continue}for(var y=0,q=0;y<G;y++,q++){if(q<G){var C=le[q];O&&(C=Math.max(-1,Math.min(1,C)),C=C<0?C*32768:C*32767),h?(R=C,T=h.b0*R+h.b1*h.x1+h.b0*h.x2-h.a1*h.y1-h.a2*h.y2,h.x2=h.x1,h.x1=R,h.y2=h.y1,h.y1=T):T=it?it(C):C}if($=i,i=T,q==0){y--;continue}var m=Math.floor(U);if(y==m){var _=Math.ceil(U),b=U-m,k=$,N=_<G?i:k,r=k+(N-k)*b;r>32767?r=32767:r<-32768&&(r=-32768),Le&&(Qe+=Math.abs(r)),L[D]=r,D++,U+=S}}ke=Math.max(0,U-G)}S<1&&D+1==P&&(P--,L=new Int16Array(L.buffer.slice(0,P*2))),D-1!=P&&D!=P&&Xe(fe+" idx:"+D+" != size:"+P,3),Fe=null;var l=P%qe;if(l>0){var Z=(P-l)*2;Fe=new Int16Array(L.buffer.slice(Z)),L=new Int16Array(L.buffer.slice(0,Z))}var H={index:ue,offset:ke,raisePrev:Me,filter:Te,frameNext:Fe,sampleRate:s,data:L};return Le&&(H._sum=Qe),H},f.IIRFilter=function(E,I,s){var X=2*Math.PI*s/I,ne=Math.sin(X),fe=Math.cos(X),ue=ne/2,ke=1+ue,Me=-2*fe/ke,Te=(1-ue)/ke;if(E)var ge=(1-fe)/2/ke,it=(1-fe)/ke;else var ge=(1+fe)/2/ke,it=-(1+fe)/ke;var Fe=0,qe=0,Le=0,Qe=0,p=0,P=function(U){return Le=ge*U+it*Fe+ge*qe-Me*Qe-Te*p,qe=Fe,Fe=U,p=Qe,Qe=Le,Le};return P.Embed={x1:0,x2:0,y1:0,y2:0,b0:ge,b1:it,a1:Me,a2:Te},P},f.PowerLevel=function(E,I){var s=E/I||0,X;return s<1251?X=Math.round(s/1250*10):X=Math.round(Math.min(100,Math.max(0,(1+Math.log(s/1e4)/Math.log(10))*100))),X},f.PowerDBFS=function(E){var I=Math.max(.1,E||0),s=32767;return I=Math.min(I,s),I=20*Math.log(I/s)/Math.log(10),Math.max(-100,Math.round(I))},f.CLog=function(E,I){if(typeof console=="object"){var s=new Date,X=("0"+s.getMinutes()).substr(-2)+":"+("0"+s.getSeconds()).substr(-2)+"."+("00"+s.getMilliseconds()).substr(-3),ne=this&&this.envIn&&this.envCheck&&this.id,fe=["["+X+" "+V+(ne?":"+ne:"")+"]"+E],ue=arguments,ke=f.CLog,Me=2,Te=ke.log||console.log;for(c(I)?Te=I==1?ke.error||console.error:I==3?ke.warn||console.warn:Te:Me=1;Me<ue.length;Me++)fe.push(ue[Me]);Ue?Te&&Te("[IsLoser]"+fe[0],fe.length>1?fe:""):Te.apply(console,fe)}};var Xe=function(){f.CLog.apply(this,arguments)},Ue=!0;try{Ue=!console.log.apply}catch{}var Tt=0;function bt(E){var I=this;I.id=++Tt,Qt();var s={type:"mp3",onProcess:a};for(var X in E)s[X]=E[X];I.set=s;var ne=s[_e],fe=s[J];(ne&&!c(ne)||fe&&!c(fe))&&I.CLog(pe.G("IllegalArgs-1",[pe("VtS4::{1}和{2}必须是数值",0,J,_e)]),1,E),s[_e]=+ne||16,s[J]=+fe||16e3,I.state=0,I._S=9,I.Sync={O:9,C:9}}f.Sync={O:9,C:9},f.prototype=bt.prototype={CLog:Xe,_streamStore:function(){return this.set.sourceStream?this:f},_streamGet:function(){return this._streamStore().Stream},_streamCtx:function(){var E=this._streamGet();return E&&E._c},open:function(E,I){var s=this,X=s.set,ne=s._streamStore(),fe=0;E=E||a;var ue=function(O,G){G=!!G,s.CLog(pe("5tWi::录音open失败：")+O+",isUserNotAllow:"+G,1),fe&&f.CloseNewCtx(fe),I&&I(O,G)};s._streamTag=A;var ke=function(){s.CLog("open ok, id:"+s.id+" stream:"+s._streamTag),E(),s._SO=0},Me=ne.Sync,Te=++Me.O,ge=Me.C;s._O=s._O_=Te,s._SO=s._S;var it=function(){if(ge!=Me.C||!s._O){var O=pe("dFm8::open被取消");return Te==Me.O?s.close():O=pe("VtJO::open被中断"),ue(O),!0}};if(!n){ue(pe.G("NonBrowser-1",["open"])+pe("EMJq::，可尝试使用RecordApp解决方案")+"("+j+"/tree/master/app-support-sample)");return}var Fe=s.envCheck({envName:"H5",canProcess:!0});if(Fe){ue(pe("A5bm::不能录音：")+Fe);return}var qe,Le=function(){qe=X.runningContext,qe||(qe=fe=f.GetContext(!0))};if(X.sourceStream){if(s._streamTag="set.sourceStream",!f.GetContext()){ue(pe("1iU7::不支持此浏览器从流中获取录音"));return}Le(),Ae(ne);var Qe=s.Stream=X.sourceStream;Qe._c=qe,Qe._RC=X.runningContext,Qe._call={};try{Ne(ne)}catch(O){Ae(ne),ue(pe("BTW2::从流中打开录音失败：")+O.message);return}ke();return}var p=function(O,G){try{window.top.a}catch{ue(pe("Nclz::无权录音(跨域，请尝试给iframe添加麦克风访问策略，如{1})",0,'allow="camera;microphone"'));return}P(1,O)&&(/Found/i.test(O)?ue(G+pe("jBa9::，无可用麦克风")):ue(G))},P=function(O,G){if(/Permission|Allow/i.test(G))O&&ue(pe("gyO5::用户拒绝了录音权限"),!0);else if(window.isSecureContext===!1)O&&ue(pe("oWNo::浏览器禁止不安全页面录音，可开启https解决"));else return 1};if(f.IsOpen()){ke();return}if(!f.Support()){p("",pe("COxc::此浏览器不支持录音"));return}Le();var U=function(O){setTimeout(function(){O._call={};var G=f.Stream;G&&(Ae(),O._call=G._call),f.Stream=O,O._c=qe,O._RC=X.runningContext,!it()&&(f.IsOpen()?(G&&s.CLog(pe("upb8::发现同时多次调用open"),1),Ne(ne),ke()):ue(pe("Q1GA::录音功能无效：无音频流")))},100)},S=function(O){var G=O.name||O.message||O.code+":"+O,h="";ae==1&&P(0,G)&&(h=pe("KxE2::，将尝试禁用回声消除后重试"));var $=pe("xEQR::请求录音权限错误"),i=pe("bDOG::无法录音：");s.CLog($+h+"|"+O,h||D?3:1,O),h?(L=G,D=O,le(1)):D?(s.CLog($+"|"+D,1,D),p(L,i+D)):p(G,i+O)},ae=0,L,D,le=function(O){ae++;var G="audioTrackSet",h="autoGainControl",$="echoCancellation",i="noiseSuppression",R=G+":{"+$+","+i+","+h+"}",T=JSON.parse(u(X[G]||!0));s.CLog("open... "+ae+" "+G+":"+u(T)),O&&(typeof T!="object"&&(T={}),T[h]=!1,T[$]=!1,T[i]=!1),T[J]&&s.CLog(pe("IjL3::注意：已配置{1}参数，可能会出现浏览器不能正确选用麦克风、移动端无法启用回声消除等现象",0,G+"."+J),3);var d={audio:T,video:X.videoTrackSet||!1};try{var g=f.Scope[A](d,U,S)}catch(y){s.CLog(A,3,y),d={audio:!0,video:!1},g=f.Scope[A](d,U,S)}s.CLog(A+"("+u(d)+") "+Be(qe)+pe("RiWe::，未配置 {1} 时浏览器可能会自动启用回声消除，移动端未禁用回声消除时可能会降低系统播放音量（关闭录音后可恢复）和仅提供16k采样率的音频流（不需要回声消除时可明确配置成禁用来获得48k高音质的流），请参阅文档中{2}配置",0,R,G)+"("+j+") LM:"+M+" UA:"+navigator.userAgent),g&&g.then&&g.then(U)[z](S)};le()},close:function(E){E=E||a;var I=this,s=I._streamStore();I._stop();var X=" stream:"+I._streamTag,ne=s.Sync;if(I._O=0,I._O_!=ne.O){I.CLog(pe("hWVz::close被忽略（因为同时open了多个rec，只有最后一个会真正close）")+X,3),E();return}ne.C++,Ae(s),I.CLog("close,"+X),E()},mock:function(E,I){var s=this;return s._stop(),s.isMock=1,s.mockEnvInfo=null,s.buffers=[E],s.recSize=E.length,s._setSrcSR(I),s._streamTag="mock",s},_setSrcSR:function(E){var I=this,s=I.set,X=s[J];X>E?s[J]=E:X=0,I[de]=E,I.CLog(de+": "+E+" set."+J+": "+s[J]+(X?" "+pe("UHvm::忽略")+": "+X:""),X?3:0)},envCheck:function(E){var I,s=this,X=s.set,ne="CPU_BE";if(!I&&!f[ne]&&typeof Int8Array=="function"&&!new Int8Array(new Int32Array([1]).buffer)[0]&&(Qt(ne),I=pe("Essp::不支持{1}架构",0,ne)),!I){var fe=X.type,ue=s[fe+"_envCheck"];X.takeoffEncodeChunk&&(ue?E.canProcess||(I=pe("7uMV::{1}环境不支持实时处理",0,E.envName)):I=pe("2XBl::{1}类型不支持设置takeoffEncodeChunk",0,fe)+(s[fe]?"":pe("LG7e::(未加载编码器)"))),!I&&ue&&(I=s[fe+"_envCheck"](E,X))}return I||""},envStart:function(E,I){var s=this,X=s.set;if(s.isMock=E?1:0,s.mockEnvInfo=E,s.buffers=[],s.recSize=0,E&&(s._streamTag="env$"+E.envName),s.state=1,s.envInLast=0,s.envInFirst=0,s.envInFix=0,s.envInFixTs=[],s._setSrcSR(I),s.engineCtx=0,s[X.type+"_start"]){var ne=s.engineCtx=s[X.type+"_start"](X);ne&&(ne.pcmDatas=[],ne.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(E,I){var s=this,X=s.set,ne=s.engineCtx;if(s.state!=1){s.state||s.CLog("envIn at state=0",3);return}var fe=s[de],ue=E.length,ke=f.PowerLevel(I,ue),Me=s.buffers,Te=Me.length;Me.push(E);var ge=Me,it=Te,Fe=Date.now(),qe=Math.round(ue/fe*1e3);s.envInLast=Fe,s.buffers.length==1&&(s.envInFirst=Fe-qe);var Le=s.envInFixTs;Le.splice(0,0,{t:Fe,d:qe});for(var Qe=Fe,p=0,P=0;P<Le.length;P++){var U=Le[P];if(Fe-U.t>3e3){Le.length=P;break}Qe=U.t,p+=U.d}var S=Le[1],ae=Fe-Qe,L=ae-p;if(L>ae/3&&(S&&ae>1e3||Le.length>=6)){var D=Fe-S.t-qe;if(D>qe/5){var le=!X.disableEnvInFix;if(s.CLog("["+Fe+"]"+vt.get(pe(le?"4Kfd::补偿{1}ms":"bM5i::未补偿{1}ms",1),[D]),3),s.envInFix+=D,le){var O=new Int16Array(D*fe/1e3);ue+=O.length,Me.push(O)}}}var G=s.recSize,h=ue,$=G+h;if(s.recSize=$,ne){var i=f.SampleData(Me,fe,X[J],ne.chunkInfo);ne.chunkInfo=i,G=ne.pcmSize,h=i.data.length,$=G+h,ne.pcmSize=$,Me=ne.pcmDatas,Te=Me.length,Me.push(i.data),fe=i[J]}var R=Math.round($/fe*1e3),T=Me.length,d=ge.length,g=function(){for(var t=y?0:-h,B=Me[0]==null,x=Te;x<T;x++){var q=Me[x];q==null?B=1:(t+=q.length,ne&&q.length&&s[X.type+"_encode"](ne,q))}if(B&&ne){var x=it;for(ge[0]&&(x=0);x<d;x++)ge[x]=null}B&&(t=y?h:0,Me[0]=null),ne?ne.pcmSize+=t:s.recSize+=t},y=0,C="rec.set.onProcess";try{y=X.onProcess(Me,ke,R,fe,Te,g),y=y===!0}catch(t){console.error(C+pe("gFUF::回调出错是不允许的，需保证不会抛异常"),t)}var v=Date.now()-Fe;if(v>10&&s.envInFirst-Fe>1e3&&s.CLog(C+pe("2ghS::低性能，耗时{1}ms",0,v),3),y){for(var w=0,P=Te;P<T;P++)Me[P]==null?w=1:Me[P]=new Int16Array(0);w?s.CLog(pe("ufqH::未进入异步前不能清除buffers"),3):ne?ne.pcmSize-=h:s.recSize-=h}else g()},start:function(){var E=this,I=1;if(E.set.sourceStream?E.Stream||(I=0):f.IsOpen()||(I=0),!I){E.CLog(pe("6WmN::start失败：未open"),1);return}var s=E._streamCtx();if(E.CLog(pe("kLDN::start 开始录音，")+Be(s)+" stream:"+E._streamTag),E._stop(),E.envStart(null,s[J]),E.state=3,E._SO&&E._SO+1!=E._S){E.CLog(pe("Bp2y::start被中断"),3);return}E._SO=0;var X=function(){E.state==3&&(E.state=1,E.resume())},ne="AudioContext resume: ",fe=E._streamGet();fe._call[E.id]=function(){E.CLog(ne+s.state+"|stream ok"),X()},te(s,function(ue){return ue&&E.CLog(ne+"wait..."),E.state==3},function(ue){ue&&E.CLog(ne+s.state),X()},function(ue){E.CLog(ne+s.state+pe("upkE::，可能无法录音：")+ue,1),X()})},pause:function(){var E=this,I=E._streamGet();E.state&&(E.state=2,E.CLog("pause"),I&&delete I._call[E.id])},resume:function(){var E=this,I=E._streamGet(),s="resume",X=s+"(wait ctx)";if(E.state==3)E.CLog(X);else if(E.state){E.state=1,E.CLog(s),E.envResume(),I&&(I._call[E.id]=function(fe,ue){E.state==1&&E.envIn(fe,ue)},Ye(I));var ne=E._streamCtx();ne&&te(ne,function(fe){return fe&&E.CLog(X+"..."),E.state==1},function(fe){fe&&E.CLog(X+ne.state),Ye(I)},function(fe){E.CLog(X+ne.state+"[err]"+fe,1)})}},_stop:function(E){var I=this,s=I.set;I.isMock||I._S++,I.state&&(I.pause(),I.state=0),!E&&I[s.type+"_stop"]&&(I[s.type+"_stop"](I.engineCtx),I.engineCtx=0)},stop:function(E,I,s){var X=this,ne=X.set,fe,ue=X.envInLast-X.envInFirst,ke=ue&&X.buffers.length;X.CLog(pe("Xq4s::stop 和start时差:")+(ue?ue+"ms "+pe("3CQP::补偿:")+X.envInFix+"ms envIn:"+ke+" fps:"+(ke/ue*1e3).toFixed(1):"-")+" stream:"+X._streamTag+" ("+j+") LM:"+M);var Me=function(){X._stop(),s&&X.close()},Te=function(U){X.CLog(pe("u8JG::结束录音失败：")+U,1),I&&I(U),Me()},ge=function(U,S,ae){var L="blob",D="arraybuffer",le="dataType",O="DefaultDataType",G=X[le]||f[O]||L,h=le+"="+G,$=U instanceof ArrayBuffer,i=0,R=$?U.byteLength:U.size;if(G==D?$||(i=1):G==L?typeof Blob!="function"?i=pe.G("NonBrowser-1",[h])+pe("1skY::，请设置{1}",0,V+"."+O+'="'+D+'"'):($&&(U=new Blob([U],{type:S})),U instanceof Blob||(i=1),S=U.type||S):i=pe.G("NotSupport-1",[h]),X.CLog(pe("Wv7l::结束录音 编码花{1}ms 音频时长{2}ms 文件大小{3}b",0,Date.now()-fe,ae,R)+" "+h+","+S),i){Te(i!=1?i:pe("Vkbd::{1}编码器返回的不是{2}",0,ne.type,G)+", "+h);return}if(ne.takeoffEncodeChunk)X.CLog(pe("QWnr::启用takeoffEncodeChunk后stop返回的blob长度为0不提供音频数据"),3);else if(R<Math.max(50,ae/5)){Te(pe("Sz2H::生成的{1}无效",0,ne.type));return}E&&E(U,ae,S),Me()};if(!X.isMock){var it=X.state==3;if(!X.state||it){Te(pe("wf9t::未开始录音")+(it?pe("Dl2c::，开始录音前无用户交互导致AudioContext未运行"):""));return}}X._stop(!0);var Fe=X.recSize;if(!Fe){Te(pe("Ltz3::未采集到录音"));return}if(!X[ne.type]){Te(pe("xGuI::未加载{1}编码器，请尝试到{2}的src/engine内找到{1}的编码器并加载",0,ne.type,V));return}if(X.isMock){var qe=X.envCheck(X.mockEnvInfo||{envName:"mock",canProcess:!1});if(qe){Te(pe("AxOH::录音错误：")+qe);return}}var Le=X.engineCtx;if(X[ne.type+"_complete"]&&Le){var P=Math.round(Le.pcmSize/ne[J]*1e3);fe=Date.now(),X[ne.type+"_complete"](Le,function(S,ae){ge(S,ae,P)},Te);return}if(fe=Date.now(),!X.buffers[0]){Te(pe("xkKd::音频buffers被释放"));return}var Qe=f.SampleData(X.buffers,X[de],ne[J]);ne[J]=Qe[J];var p=Qe.data,P=Math.round(p.length/ne[J]*1e3);X.CLog(pe("CxeT::采样:{1} 花:{2}ms",0,Fe+"->"+p.length,Date.now()-fe)),setTimeout(function(){fe=Date.now(),X[ne.type](p,function(U,S){ge(U,S,P)},function(U){Te(U)})})}};var Rt=function(E,I){I.pos||(I.pos=[0],I.tracks={},I.bytes=[]);var s=I.tracks,X=[I.pos[0]],ne=function(){I.pos[0]=X[0]},fe=I.bytes.length,ue=new Uint8Array(fe+E.length);if(ue.set(I.bytes),ue.set(E,fe),I.bytes=ue,!I._ht){if(tt(ue,X),At(ue,X),!wt(tt(ue,X),[24,83,128,103]))return;for(tt(ue,X);X[0]<ue.length;){var ke=tt(ue,X),Me=At(ue,X),Te=[0],ge=0;if(!Me)return;if(wt(ke,[22,84,174,107])){for(;Te[0]<Me.length;){var it=tt(Me,Te),Fe=At(Me,Te),qe=[0],Le={channels:0,sampleRate:0};if(wt(it,[174]))for(;qe[0]<Fe.length;){var Qe=tt(Fe,qe),p=At(Fe,qe),P=[0];if(wt(Qe,[215])){var U=rt(p);Le.number=U,s[U]=Le}else if(wt(Qe,[131])){var U=rt(p);U==1?Le.type="video":U==2?(Le.type="audio",ge||(I.track0=Le),Le.idx=ge++):Le.type="Type-"+U}else if(wt(Qe,[134])){for(var S="",ae=0;ae<p.length;ae++)S+=String.fromCharCode(p[ae]);Le.codec=S}else if(wt(Qe,[225]))for(;P[0]<p.length;){var L=tt(p,P),D=At(p,P);if(wt(L,[181])){var U=0,le=new Uint8Array(D.reverse()).buffer;D.length==4?U=new Float32Array(le)[0]:D.length==8?U=new Float64Array(le)[0]:Xe("WebM Track !Float",1,D),Le[J]=Math.round(U)}else wt(L,[98,100])?Le.bitDepth=rt(D):wt(L,[159])&&(Le.channels=rt(D))}}}I._ht=1,Xe("WebM Tracks",s),ne();break}}}var O=I.track0;if(O){var G=O[J];if(I.webmSR=G,O.bitDepth==16&&/FLOAT/i.test(O.codec)&&(O.bitDepth=32,Xe("WebM 16->32 bit",3)),G<8e3||O.bitDepth!=32||O.channels<1||!/(\b|_)PCM\b/i.test(O.codec))return I.bytes=[],I.bad||Xe("WebM Track Unexpected",3,I),I.bad=1,-1;for(var h=[],$=0;X[0]<ue.length;){var it=tt(ue,X),Fe=At(ue,X);if(!Fe)break;if(wt(it,[163])){var i=Fe[0]&15,Le=s[i];if(Le){if(Le.idx===0){for(var R=new Uint8Array(Fe.length-4),ae=4;ae<Fe.length;ae++)R[ae-4]=Fe[ae];h.push(R),$+=R.length}}else return Xe("WebM !Track"+i,1,s),-1}ne()}if($){var T=new Uint8Array(ue.length-I.pos[0]);T.set(ue.subarray(I.pos[0])),I.bytes=T,I.pos[0]=0;for(var R=new Uint8Array($),ae=0,d=0;ae<h.length;ae++)R.set(h[ae],d),d+=h[ae].length;var le=new Float32Array(R.buffer);if(O.channels>1){for(var g=[],ae=0;ae<le.length;)g.push(le[ae]),ae+=O.channels;le=new Float32Array(g)}return le}}},wt=function(E,I){if(!E||E.length!=I.length)return!1;if(E.length==1)return E[0]==I[0];for(var s=0;s<E.length;s++)if(E[s]!=I[s])return!1;return!0},rt=function(E){for(var I="",s=0;s<E.length;s++){var X=E[s];I+=(X<16?"0":"")+X.toString(16)}return parseInt(I,16)||0},tt=function(E,I,s){var X=I[0];if(!(X>=E.length)){var ne=E[X],fe=("0000000"+ne.toString(2)).substr(-8),ue=/^(0*1)(\d*)$/.exec(fe);if(ue){var ke=ue[1].length,Me=[];if(!(X+ke>E.length)){for(var Te=0;Te<ke;Te++)Me[Te]=E[X],X++;return s&&(Me[0]=parseInt(ue[2]||"0",2)),I[0]=X,Me}}}},At=function(E,I){var s=tt(E,I,1);if(s){var X=rt(s),ne=I[0],fe=[];if(X<2147483647){if(ne+X>E.length)return;for(var ue=0;ue<X;ue++)fe[ue]=E[ne],ne++}return I[0]=ne,fe}},vt=f.i18n={lang:"zh-CN",alias:{"zh-CN":"zh","en-US":"en"},locales:{},data:{},put:function(E,I){var s=V+".i18n.put: ",X=E.overwrite;X=X==null||X;var ne=E.lang;if(ne=vt.alias[ne]||ne,!ne)throw new Error(s+"set.lang?");var fe=vt.locales[ne];fe||(fe={},vt.locales[ne]=fe);for(var ue=/^([\w\-]+):/,ke,Me=0;Me<I.length;Me++){var ge=I[Me];if(ke=ue.exec(ge),!ke){Xe(s+"'key:'? "+ge,3,E);continue}var Te=ke[1],ge=ge.substr(Te.length+1);!X&&fe[Te]||(fe[Te]=ge)}},get:function(){return vt.v_G.apply(null,arguments)},v_G:function(E,I,s){I=I||[],s=s||vt.lang,s=vt.alias[s]||s;var X=vt.locales[s],ne=X&&X[E]||"";return!ne&&s!="zh"?s=="en"?vt.v_G(E,I,"zh"):vt.v_G(E,I,"en"):(vt.lastLang=s,ne=="=Empty"?"":ne.replace(/\{(\d+)(\!?)\}/g,function(fe,ue,ke){return ue=+ue||0,fe=I[ue-1],(ue<1||ue>I.length)&&(fe="{?}",Xe("i18n["+E+"] no {"+ue+"}: "+ne,3)),ke?"":fe}))},$T:function(){return vt.v_T.apply(null,arguments)},v_T:function(){for(var E=arguments,I="",s=[],X=0,ne=V+".i18n.$T:",fe=/^([\w\-]*):/,ue,ke=0;ke<E.length;ke++){var Me=E[ke];if(ke==0){if(ue=fe.exec(Me),I=ue&&ue[1],!I)throw new Error(ne+"0 'key:'?");Me=Me.substr(I.length+1)}if(X===-1)s.push(Me);else{if(X)throw new Error(ne+" bad args");if(Me===0)X=-1;else if(c(Me)){if(Me<1)throw new Error(ne+" bad args");X=Me}else{var Te=ke==1?"en":ke?"":"zh";if(ue=fe.exec(Me),ue&&(Te=ue[1]||Te,Me=Me.substr(ue[1].length+1)),!ue||!Te)throw new Error(ne+ke+" 'lang:'?");vt.put({lang:Te,overwrite:!1},[I+":"+Me])}}}return I?X>0?I:vt.v_G(I,s):""}},pe=vt.$T;pe.G=vt.get,pe("NonBrowser-1::非浏览器环境，不支持{1}",1),pe("IllegalArgs-1::参数错误：{1}",1),pe("NeedImport-2::调用{1}需要先导入{2}",2),pe("NotSupport-1::不支持：{1}",1),f.TrafficImgUrl="//ia.51.la/go1?id=20469973&pvFlag=1";var Qt=f.Traffic=function(E){if(n){E=E?"/"+V+"/Report/"+E:"";var I=f.TrafficImgUrl;if(I){var s=f.Traffic,X=/^(https?:..[^\/#]*\/?)[^#]*/i.exec(location.href)||[],ne=X[1]||"http://file/",fe=(X[0]||ne)+E;if(I.indexOf("//")==0&&(/^https:/i.test(fe)?I="https:"+I:I="http:"+I),E&&(I=I+"&cu="+encodeURIComponent(ne+E)),!s[fe]){s[fe]=1;var ue=new Image;ue.src=I,Xe("Traffic Analysis Image: "+(E||V+".TrafficImgUrl="+f.TrafficImgUrl))}}}};ee&&(Xe(pe("8HO5::覆盖导入{1}",0,V),1),ee.Destroy()),e[V]=f})})(T0)),T0.exports}var Hr=Dr();const Or=Xn(Hr);(function(o){var e=typeof window=="object"&&!!window.document,n=e?window:Object,a=n.Recorder,c=a.i18n;o(a,c,c.$T,e)})(function(o,e,n,a){var c="48000, 44100, 32000, 24000, 22050, 16000, 12000, 11025, 8000",u="8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, 192, 224, 256, 320";o.prototype.enc_mp3={stable:!0,takeEC:"full",getTestMsg:function(){return n("Zm7L::采样率范围：{1}；比特率范围：{2}（不同比特率支持的采样率范围不同，小于32kbps时采样率需小于32000）",0,c,u)}};var f=function(z){var ee=z.bitRate,re=z.sampleRate,Se=re;if((" "+u+",").indexOf(" "+ee+",")==-1&&o.CLog(n("eGB9::{1}不在mp3支持的取值范围：{2}",0,"bitRate="+ee,u),3),(" "+c+",").indexOf(" "+re+",")==-1){for(var te=c.split(", "),Ce=[],Be=0;Be<te.length;Be++)Ce.push({v:+te[Be],s:Math.abs(te[Be]-re)});Ce.sort(function(Ve,De){return Ve.s-De.s}),Se=Ce[0].v,z.sampleRate=Se,o.CLog(n("zLTa::sampleRate已更新为{1}，因为{2}不在mp3支持的取值范围：{3}",0,Se,re,c),3)}},M=function(){return n.G("NeedImport-2",["mp3.js","src/engine/mp3-engine.js"])},j=a&&typeof Worker=="function";o.prototype.mp3=function(z,ee,re){var Se=this,te=Se.set,Ce=z.length;if(!o.lamejs){re(M());return}if(j){var Be=Se.mp3_start(te);if(Be){if(Be.isW){Se.mp3_encode(Be,z),Se.mp3_complete(Be,ee,re,1);return}Se.mp3_stop(Be)}}f(te);var Ve=new o.lamejs.Mp3Encoder(1,te.sampleRate,te.bitRate),De=57600,Ne=new Int8Array(5e5),Ye=0,_t=0,We=0,Ae=function(){try{if(_t<Ce)var W=Ve.encodeBuffer(z.subarray(_t,_t+De));else{We=1;var W=Ve.flush()}}catch(bt){if(console.error(bt),!We)try{Ve.flush()}catch(Rt){console.error(Rt)}re("MP3 Encoder: "+bt.message);return}var dt=W.length;if(dt>0){if(Ye+dt>Ne.length){var Xe=new Int8Array(Ne.length+Math.max(5e5,dt));Xe.set(Ne.subarray(0,Ye)),Ne=Xe}Ne.set(W,Ye),Ye+=dt}if(_t<Ce)_t+=De,setTimeout(Ae);else{var Ue=[Ne.buffer.slice(0,Ye)],Tt=J.fn(Ue,Ye,Ce,te.sampleRate);_e(Tt,te),ee(Ue[0]||new ArrayBuffer(0),"audio/mp3")}};Ae()};var V;o.BindDestroy("mp3Worker",function(){V&&(o.CLog("mp3Worker Destroy"),V.terminate(),V=null)}),o.prototype.mp3_envCheck=function(z,ee){var re="";return ee.takeoffEncodeChunk&&(de()||(re=n("yhUs::当前浏览器版本太低，无法实时处理"))),!re&&!o.lamejs&&(re=M()),re},o.prototype.mp3_start=function(z){return de(z)};var A={id:0},de=function(z,ee){var re=function(We){var Ae=We.data,W=Ce.wkScope.wk_ctxs,dt=Ce.wkScope.wk_lame,Xe=Ce.wkScope.wk_mp3TrimFix,Ue=W[Ae.id];if(Ae.action=="init")W[Ae.id]={sampleRate:Ae.sampleRate,bitRate:Ae.bitRate,takeoff:Ae.takeoff,pcmSize:0,memory:new Int8Array(5e5),mOffset:0,encObj:new dt.Mp3Encoder(1,Ae.sampleRate,Ae.bitRate)};else if(!Ue)return;var Tt=function(rt){var tt=rt.length;if(Ue.mOffset+tt>Ue.memory.length){var At=new Int8Array(Ue.memory.length+Math.max(5e5,tt));At.set(Ue.memory.subarray(0,Ue.mOffset)),Ue.memory=At}Ue.memory.set(rt,Ue.mOffset),Ue.mOffset+=tt};switch(Ae.action){case"stop":if(!Ue.isCp)try{Ue.encObj.flush()}catch(rt){console.error(rt)}Ue.encObj=null,delete W[Ae.id];break;case"encode":if(Ue.isCp)break;Ue.pcmSize+=Ae.pcm.length;try{var bt=Ue.encObj.encodeBuffer(Ae.pcm)}catch(rt){Ue.err=rt,console.error(rt)}bt&&bt.length>0&&(Ue.takeoff?Be.onmessage({action:"takeoff",id:Ae.id,chunk:bt}):Tt(bt));break;case"complete":Ue.isCp=1;try{var bt=Ue.encObj.flush()}catch(rt){Ue.err=rt,console.error(rt)}if(bt&&bt.length>0&&(Ue.takeoff?Be.onmessage({action:"takeoff",id:Ae.id,chunk:bt}):Tt(bt)),Ue.err){Be.onmessage({action:Ae.action,id:Ae.id,err:"MP3 Encoder: "+Ue.err.message});break}var Rt=[Ue.memory.buffer.slice(0,Ue.mOffset)],wt=Xe.fn(Rt,Ue.mOffset,Ue.pcmSize,Ue.sampleRate);Be.onmessage({action:Ae.action,id:Ae.id,blob:Rt[0]||new ArrayBuffer(0),meta:wt});break}},Se=function(We){Be.onmessage=function(Ae){var W=Ae;We&&(W=Ae.data);var dt=A[W.id];dt&&(W.action=="takeoff"?dt.set.takeoffEncodeChunk(new Uint8Array(W.chunk.buffer)):(dt.call&&dt.call(W),dt.call=null))}},te=function(){var We={worker:Be,set:z};return z?(We.id=++A.id,A[We.id]=We,f(z),Be.postMessage({action:"init",id:We.id,sampleRate:z.sampleRate,bitRate:z.bitRate,takeoff:!!z.takeoffEncodeChunk,x:new Int16Array(5)})):Be.postMessage({x:new Int16Array(5)}),We},Ce,Be=V;if(ee||!j)return o.CLog(n("k9PT::当前环境不支持Web Worker，mp3实时编码器运行在主线程中"),3),Be={postMessage:function(We){re({data:We})}},Ce={wkScope:{wk_ctxs:{},wk_lame:o.lamejs,wk_mp3TrimFix:J}},Se(),te();try{if(!Be){var Ve=(re+"").replace(/[\w\$]+\.onmessage/g,"self.postMessage");Ve=Ve.replace(/[\w\$]+\.wkScope/g,"wkScope");var De=");wk_lame();self.onmessage="+Ve;De+=";var wkScope={ wk_ctxs:{},wk_lame:wk_lame",De+=",wk_mp3TrimFix:{rm:"+J.rm+",fn:"+J.fn+"} }";var Ne=o.lamejs.toString(),Ye=(window.URL||webkitURL).createObjectURL(new Blob(["var wk_lame=(",Ne,De],{type:"text/javascript"}));Be=new Worker(Ye),setTimeout(function(){(window.URL||webkitURL).revokeObjectURL(Ye)},1e4),Se(1)}var _t=te();return _t.isW=1,V=Be,_t}catch(We){return Be&&Be.terminate(),console.error(We),de(z,1)}};o.prototype.mp3_stop=function(z){if(z&&z.worker){z.worker.postMessage({action:"stop",id:z.id}),z.worker=null,delete A[z.id];var ee=-1;for(var re in A)ee++;ee&&o.CLog(n("fT6M::mp3 worker剩{1}个未stop",0,ee),3)}},o.prototype.mp3_encode=function(z,ee){z&&z.worker&&z.worker.postMessage({action:"encode",id:z.id,pcm:ee})},o.prototype.mp3_complete=function(z,ee,re,Se){var te=this;z&&z.worker?(z.call=function(Ce){Se&&te.mp3_stop(z),Ce.err?re(Ce.err):(_e(Ce.meta,z.set),ee(Ce.blob,"audio/mp3"))},z.worker.postMessage({action:"complete",id:z.id})):re(n("mPxH::mp3编码器未start"))},o.mp3ReadMeta=function(z,ee){var re=typeof window<"u"&&window.parseInt||typeof self<"u"&&self.parseInt||parseInt,Se=new Uint8Array(z[0]||[]);if(Se.length<4)return null;var te=function(rt,tt){return("0000000"+((tt||Se)[rt]||0).toString(2)).substr(-8)},Ce=te(0)+te(1),Be=te(2)+te(3);if(!/^1{11}/.test(Ce))return null;var Ve={"00":2.5,10:2,11:1}[Ce.substr(11,2)],De={"01":3}[Ce.substr(13,2)],Ne={1:[44100,48e3,32e3],2:[22050,24e3,16e3],"2.5":[11025,12e3,8e3]}[Ve];Ne&&(Ne=Ne[re(Be.substr(4,2),2)]);var Ye=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320]][Ve==1?1:0][re(Be.substr(0,4),2)];if(!Ve||!De||!Ye||!Ne)return null;for(var _t=Math.round(ee*8/Ye),We=De==1?384:De==2||Ve==1?1152:576,Ae=We/Ne*1e3,W=Math.floor(We*Ye/8/Ne*1e3),dt=0,Xe=0,Ue=0;Ue<z.length;Ue++){var Tt=z[Ue];if(Xe+=Tt.byteLength,Xe>=W+3){var bt=new Uint8Array(Tt),Rt=Tt.byteLength-(Xe-(W+3)+1),wt=te(Rt,bt);dt=wt.charAt(6)=="1";break}}return dt&&W++,{version:Ve,layer:De,sampleRate:Ne,bitRate:Ye,duration:_t,size:ee,hasPadding:dt,frameSize:W,frameDurationFloat:Ae}};var J={rm:o.mp3ReadMeta,fn:function(z,ee,re,Se){var te=this.rm(z,ee);if(!te)return{size:ee,err:"mp3 unknown format"};var Ce=Math.round(re/Se*1e3),Be=Math.floor((te.duration-Ce)/te.frameDurationFloat);if(Be>0){var Ve=Be*te.frameSize-(te.hasPadding?1:0);ee-=Ve;for(var De=0,Ne=[],Ye=0;Ye<z.length;Ye++){var _t=z[Ye];if(Ve<=0)break;Ve>=_t.byteLength?(Ve-=_t.byteLength,Ne.push(_t),z.splice(Ye,1),Ye--):(z[Ye]=_t.slice(Ve),De=_t,Ve=0)}var We=this.rm(z,ee);if(!We){De&&(z[0]=De);for(var Ye=0;Ye<Ne.length;Ye++)z.splice(Ye,0,Ne[Ye]);te.err="mp3 fix error: 已还原，错误原因不明"}var Ae=te.trimFix={};Ae.remove=Be,Ae.removeDuration=Math.round(Be*te.frameDurationFloat),Ae.duration=Math.round(ee*8/te.bitRate)}return te}},_e=function(z,ee){var re="MP3 Info: ";(z.sampleRate&&z.sampleRate!=ee.sampleRate||z.bitRate&&z.bitRate!=ee.bitRate)&&(o.CLog(re+n("uY9i::和设置的不匹配{1}，已更新成{2}",0,"set:"+ee.bitRate+"kbps "+ee.sampleRate+"hz","set:"+z.bitRate+"kbps "+z.sampleRate+"hz"),3,ee),ee.sampleRate=z.sampleRate,ee.bitRate=z.bitRate);var Se=z.trimFix;Se?(re+=n("iMSm::Fix移除{1}帧",0,Se.remove)+" "+Se.removeDuration+"ms -> "+Se.duration+"ms",Se.remove>2&&(z.err=(z.err?z.err+", ":"")+n("b9zm::移除帧数过多"))):re+=(z.duration||"-")+"ms",z.err?o.CLog(re,z.size?1:0,z.err,z):o.CLog(re,z)}});var mn={},bn;function Nr(){return bn||(bn=1,(function(o){var e=typeof window=="object"&&!!window.document,n=e?window:Object,a=n.Recorder;o(a)})(function(o){function e(){var n=function(p){return Math.log(p)/Math.log(10)},a=function(p){throw new Error("abort("+p+")")};function c(p){return new Int8Array(p)}function u(p){return new Int16Array(p)}function f(p){return new Int32Array(p)}function M(p){return new Float32Array(p)}function j(p){return new Float64Array(p)}function V(p){if(p.length==1)return M(p[0]);var P=p[0];p=p.slice(1);for(var U=[],S=0;S<P;S++)U.push(V(p));return U}function A(p){if(p.length==1)return f(p[0]);var P=p[0];p=p.slice(1);for(var U=[],S=0;S<P;S++)U.push(A(p));return U}function de(p){if(p.length==1)return u(p[0]);var P=p[0];p=p.slice(1);for(var U=[],S=0;S<P;S++)U.push(de(p));return U}function J(p){if(p.length==1)return new Array(p[0]);var P=p[0];p=p.slice(1);for(var U=[],S=0;S<P;S++)U.push(J(p));return U}var _e={};_e.fill=function(p,P,U,S){if(arguments.length==2)for(var ae=0;ae<p.length;ae++)p[ae]=arguments[1];else for(var ae=P;ae<U;ae++)p[ae]=S};var z={};z.arraycopy=function(p,P,U,S,ae){for(var L=P+ae;P<L;)U[S++]=p[P++]};var ee={};ee.SQRT2=1.4142135623730951,ee.FAST_LOG10=function(p){return n(p)},ee.FAST_LOG10_X=function(p,P){return n(p)*P};function re(p){this.ordinal=p}re.short_block_allowed=new re(0),re.short_block_coupled=new re(1),re.short_block_dispensed=new re(2),re.short_block_forced=new re(3);var Se={};Se.MAX_VALUE=34028235e31;function te(p){this.ordinal=p}te.vbr_off=new te(0),te.vbr_mt=new te(1),te.vbr_rh=new te(2),te.vbr_abr=new te(3),te.vbr_mtrh=new te(4),te.vbr_default=te.vbr_mtrh;function Ce(p){var P=p;this.ordinal=function(){return P}}Ce.STEREO=new Ce(0),Ce.JOINT_STEREO=new Ce(1),Ce.DUAL_CHANNEL=new Ce(2),Ce.MONO=new Ce(3),Ce.NOT_SET=new Ce(4);function Be(){var p=3,P=98,U=4;this.getLameShortVersion=function(){return p+"."+P+"."+U}}function Ve(){var p=null;this.qupvt=null,this.setModules=function(m){this.qupvt=m,p=m};function P(m){this.bits=0|m}var U=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]];function S(m,_,b,k,N,r){var l=.5946/_;for(m=m>>1;m--!=0;)N[r++]=l>b[k++]?0:1,N[r++]=l>b[k++]?0:1}function ae(m,_,b,k,N,r){m=m>>1;var l=m%2;for(m=m>>1;m--!=0;){var Z,H,K,se,ce,he,Re,He;Z=b[k++]*_,H=b[k++]*_,ce=0|Z,K=b[k++]*_,he=0|H,se=b[k++]*_,Re=0|K,Z+=p.adj43[ce],He=0|se,H+=p.adj43[he],N[r++]=0|Z,K+=p.adj43[Re],N[r++]=0|H,se+=p.adj43[He],N[r++]=0|K,N[r++]=0|se}if(l!=0){var Z,H,ce,he;Z=b[k++]*_,H=b[k++]*_,ce=0|Z,he=0|H,Z+=p.adj43[ce],H+=p.adj43[he],N[r++]=0|Z,N[r++]=0|H}}function L(m,_,b,k,N){var r,l,Z=0,H,K=0,se=0,ce=0,he=_,Re=0,He=he,$e=0,ut=m,ft=0;for(H=N!=null&&k.global_gain==N.global_gain,k.block_type==s.SHORT_TYPE?l=38:l=21,r=0;r<=l;r++){var at=-1;if((H||k.block_type==s.NORM_TYPE)&&(at=k.global_gain-(k.scalefac[r]+(k.preflag!=0?p.pretab[r]:0)<<k.scalefac_scale+1)-k.subblock_gain[k.window[r]]*8),H&&N.step[r]==at)K!=0&&(ae(K,b,ut,ft,He,$e),K=0),se!=0&&a();else{var lt=k.width[r];if(Z+k.width[r]>k.max_nonzero_coeff){var mt;mt=k.max_nonzero_coeff-Z+1,_e.fill(_,k.max_nonzero_coeff,576,0),lt=mt,lt<0&&(lt=0),r=l+1}if(K==0&&se==0&&(He=he,$e=Re,ut=m,ft=ce),N!=null&&N.sfb_count1>0&&r>=N.sfb_count1&&N.step[r]>0&&at>=N.step[r]?(K!=0&&(ae(K,b,ut,ft,He,$e),K=0,He=he,$e=Re,ut=m,ft=ce),se+=lt):(se!=0&&(S(se,b,ut,ft,He,$e),se=0,He=he,$e=Re,ut=m,ft=ce),K+=lt),lt<=0){se!=0&&a(),K!=0&&a();break}}r<=l&&(Re+=k.width[r],ce+=k.width[r],Z+=k.width[r])}K!=0&&(ae(K,b,ut,ft,He,$e),K=0),se!=0&&a()}function D(m,_,b){var k=0,N=0;do{var r=m[_++],l=m[_++];k<r&&(k=r),N<l&&(N=l)}while(_<b);return k<N&&(k=N),k}function le(m,_,b,k,N,r){var l=W.ht[k].xlen*65536+W.ht[N].xlen,Z=0,H;do{var K=m[_++],se=m[_++];K!=0&&(K>14&&(K=15,Z+=l),K*=16),se!=0&&(se>14&&(se=15,Z+=l),K+=se),Z+=W.largetbl[K]}while(_<b);return H=Z&65535,Z>>=16,Z>H&&(Z=H,k=N),r.bits+=Z,k}function O(m,_,b,k){var N=0,r=W.ht[1].hlen;do{var l=m[_+0]*2+m[_+1];_+=2,N+=r[l]}while(_<b);return k.bits+=N,1}function G(m,_,b,k,N){var r=0,l,Z=W.ht[k].xlen,H;k==2?H=W.table23:H=W.table56;do{var K=m[_+0]*Z+m[_+1];_+=2,r+=H[K]}while(_<b);return l=r&65535,r>>=16,r>l&&(r=l,k++),N.bits+=r,k}function h(m,_,b,k,N){var r=0,l=0,Z=0,H=W.ht[k].xlen,K=W.ht[k].hlen,se=W.ht[k+1].hlen,ce=W.ht[k+2].hlen;do{var he=m[_+0]*H+m[_+1];_+=2,r+=K[he],l+=se[he],Z+=ce[he]}while(_<b);var Re=k;return r>l&&(r=l,Re++),r>Z&&(r=Z,Re=k+2),N.bits+=r,Re}var $=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];function i(m,_,b,k){var N=D(m,_,b);switch(N){case 0:return N;case 1:return O(m,_,b,k);case 2:case 3:return G(m,_,b,$[N-1],k);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return h(m,_,b,$[N-1],k);default:N>tt.IXMAX_VAL&&a(),N-=15;var r;for(r=24;r<32&&!(W.ht[r].linmax>=N);r++);var l;for(l=r-8;l<24&&!(W.ht[l].linmax>=N);l++);return le(m,_,b,l,r,k)}}this.noquant_count_bits=function(m,_,b){var k=_.l3_enc,N=Math.min(576,_.max_nonzero_coeff+2>>1<<1);for(b!=null&&(b.sfb_count1=0);N>1&&(k[N-1]|k[N-2])==0;N-=2);_.count1=N;for(var r=0,l=0;N>3;N-=4){var Z;if(((k[N-1]|k[N-2]|k[N-3]|k[N-4])&2147483647)>1)break;Z=((k[N-4]*2+k[N-3])*2+k[N-2])*2+k[N-1],r+=W.t32l[Z],l+=W.t33l[Z]}var H=r;if(_.count1table_select=0,r>l&&(H=l,_.count1table_select=1),_.count1bits=H,_.big_values=N,N==0)return H;if(_.block_type==s.SHORT_TYPE)r=3*m.scalefac_band.s[3],r>_.big_values&&(r=_.big_values),l=_.big_values;else if(_.block_type==s.NORM_TYPE){if(r=_.region0_count=m.bv_scf[N-2],l=_.region1_count=m.bv_scf[N-1],l=m.scalefac_band.l[r+l+2],r=m.scalefac_band.l[r+1],l<N){var K=new P(H);_.table_select[2]=i(k,l,N,K),H=K.bits}}else _.region0_count=7,_.region1_count=s.SBMAX_l-1-7-1,r=m.scalefac_band.l[8],l=N,r>l&&(r=l);if(r=Math.min(r,N),l=Math.min(l,N),0<r){var K=new P(H);_.table_select[0]=i(k,0,r,K),H=K.bits}if(r<l){var K=new P(H);_.table_select[1]=i(k,r,l,K),H=K.bits}if(m.use_best_huffman==2&&a(),b!=null&&_.block_type==s.NORM_TYPE){for(var se=0;m.scalefac_band.l[se]<_.big_values;)se++;b.sfb_count1=se}return H},this.count_bits=function(m,_,b,k){var N=b.l3_enc,r=tt.IXMAX_VAL/p.IPOW20(b.global_gain);return b.xrpow_max>r?tt.LARGE_BITS:(L(_,N,p.IPOW20(b.global_gain),b,k),(m.substep_shaping&2)!=0&&a(),this.noquant_count_bits(m,b,k))};function R(m,_,b,k,N,r,l){for(var Z=_.big_values,H=0;H<=22;H++)k[H]=tt.LARGE_BITS;for(var H=0;H<16;H++){var K=m.scalefac_band.l[H+1];if(K>=Z)break;var se=0,ce=new P(se),he=i(b,0,K,ce);se=ce.bits;for(var Re=0;Re<8;Re++){var He=m.scalefac_band.l[H+Re+2];if(He>=Z)break;var $e=se;ce=new P($e);var ut=i(b,K,He,ce);$e=ce.bits,k[H+Re]>$e&&(k[H+Re]=$e,N[H+Re]=H,r[H+Re]=he,l[H+Re]=ut)}}}function T(m,_,b,k,N,r,l,Z){for(var H=_.big_values,K=2;K<s.SBMAX_l+1;K++){var se=m.scalefac_band.l[K];if(se>=H)break;var ce=N[K-2]+_.count1bits;if(b.part2_3_length<=ce)break;var he=new P(ce),Re=i(k,se,H,he);ce=he.bits,!(b.part2_3_length<=ce)&&(b.assign(_),b.part2_3_length=ce,b.region0_count=r[K-2],b.region1_count=K-2-r[K-2],b.table_select[0]=l[K-2],b.table_select[1]=Z[K-2],b.table_select[2]=Re)}}this.best_huffman_divide=function(m,_){var b=new vt,k=_.l3_enc,N=f(23),r=f(23),l=f(23),Z=f(23);if(!(_.block_type==s.SHORT_TYPE&&m.mode_gr==1)){b.assign(_),_.block_type==s.NORM_TYPE&&(R(m,_,k,N,r,l,Z),T(m,b,_,k,N,r,l,Z));var H=b.big_values;if(!(H==0||(k[H-2]|k[H-1])>1)&&(H=_.count1+2,!(H>576))){b.assign(_),b.count1=H;for(var K=0,se=0;H>b.big_values;H-=4){var ce=((k[H-4]*2+k[H-3])*2+k[H-2])*2+k[H-1];K+=W.t32l[ce],se+=W.t33l[ce]}if(b.big_values=H,b.count1table_select=0,K>se&&(K=se,b.count1table_select=1),b.count1bits=K,b.block_type==s.NORM_TYPE)T(m,b,_,k,N,r,l,Z);else{if(b.part2_3_length=K,K=m.scalefac_band.l[8],K>H&&(K=H),K>0){var he=new P(b.part2_3_length);b.table_select[0]=i(k,0,K,he),b.part2_3_length=he.bits}if(H>K){var he=new P(b.part2_3_length);b.table_select[1]=i(k,K,H,he),b.part2_3_length=he.bits}_.part2_3_length>b.part2_3_length&&_.assign(b)}}}};var d=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],g=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],y=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],C=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];Ve.slen1_tab=y,Ve.slen2_tab=C;function v(m,_){for(var b,k=_.tt[1][m],N=_.tt[0][m],r=0;r<W.scfsi_band.length-1;r++){for(b=W.scfsi_band[r];b<W.scfsi_band[r+1]&&!(N.scalefac[b]!=k.scalefac[b]&&k.scalefac[b]>=0);b++);if(b==W.scfsi_band[r+1]){for(b=W.scfsi_band[r];b<W.scfsi_band[r+1];b++)k.scalefac[b]=-1;_.scfsi[m][r]=1}}var l=0,Z=0;for(b=0;b<11;b++)k.scalefac[b]!=-1&&(Z++,l<k.scalefac[b]&&(l=k.scalefac[b]));for(var H=0,K=0;b<s.SBPSY_l;b++)k.scalefac[b]!=-1&&(K++,H<k.scalefac[b]&&(H=k.scalefac[b]));for(var r=0;r<16;r++)if(l<d[r]&&H<g[r]){var se=y[r]*Z+C[r]*K;k.part2_length>se&&(k.part2_length=se,k.scalefac_compress=r)}}this.best_scalefac_store=function(m,_,b,k){var N=k.tt[_][b],r,l,Z,H,K=0;for(Z=0,r=0;r<N.sfbmax;r++){var se=N.width[r];for(Z+=se,H=-se;H<0&&N.l3_enc[H+Z]==0;H++);H==0&&(N.scalefac[r]=K=-2)}if(N.scalefac_scale==0&&N.preflag==0){var ce=0;for(r=0;r<N.sfbmax;r++)N.scalefac[r]>0&&(ce|=N.scalefac[r]);if((ce&1)==0&&ce!=0){for(r=0;r<N.sfbmax;r++)N.scalefac[r]>0&&(N.scalefac[r]>>=1);N.scalefac_scale=K=1}}if(N.preflag==0&&N.block_type!=s.SHORT_TYPE&&m.mode_gr==2){for(r=11;r<s.SBPSY_l&&!(N.scalefac[r]<p.pretab[r]&&N.scalefac[r]!=-2);r++);if(r==s.SBPSY_l){for(r=11;r<s.SBPSY_l;r++)N.scalefac[r]>0&&(N.scalefac[r]-=p.pretab[r]);N.preflag=K=1}}for(l=0;l<4;l++)k.scfsi[b][l]=0;for(m.mode_gr==2&&_==1&&k.tt[0][b].block_type!=s.SHORT_TYPE&&k.tt[1][b].block_type!=s.SHORT_TYPE&&(v(b,k),K=0),r=0;r<N.sfbmax;r++)N.scalefac[r]==-2&&(N.scalefac[r]=0);K!=0&&(m.mode_gr==2?this.scale_bitcount(N):this.scale_bitcount_lsf(m,N))};var w=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],t=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],B=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(m){var _,b,k=0,N=0,r,l=m.scalefac;if(m.block_type==s.SHORT_TYPE)r=w,m.mixed_block_flag!=0&&(r=t);else if(r=B,m.preflag==0){for(b=11;b<s.SBPSY_l&&!(l[b]<p.pretab[b]);b++);if(b==s.SBPSY_l)for(m.preflag=1,b=11;b<s.SBPSY_l;b++)l[b]-=p.pretab[b]}for(b=0;b<m.sfbdivide;b++)k<l[b]&&(k=l[b]);for(;b<m.sfbmax;b++)N<l[b]&&(N=l[b]);for(m.part2_length=tt.LARGE_BITS,_=0;_<16;_++)k<d[_]&&N<g[_]&&m.part2_length>r[_]&&(m.part2_length=r[_],m.scalefac_compress=_);return m.part2_length==tt.LARGE_BITS};var x=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(m,_){var b,k,N,r,l,Z,H,K,se=f(4),ce=_.scalefac;for(_.preflag!=0?b=2:b=0,H=0;H<4;H++)se[H]=0;if(_.block_type==s.SHORT_TYPE){k=1;var he=p.nr_of_sfb_block[b][k];for(K=0,N=0;N<4;N++)for(r=he[N]/3,H=0;H<r;H++,K++)for(l=0;l<3;l++)ce[K*3+l]>se[N]&&(se[N]=ce[K*3+l])}else{k=0;var he=p.nr_of_sfb_block[b][k];for(K=0,N=0;N<4;N++)for(r=he[N],H=0;H<r;H++,K++)ce[K]>se[N]&&(se[N]=ce[K])}for(Z=!1,N=0;N<4;N++)se[N]>x[b][N]&&(Z=!0);if(!Z){var Re,He,$e,ut;for(_.sfb_partition_table=p.nr_of_sfb_block[b][k],N=0;N<4;N++)_.slen[N]=q[se[N]];switch(Re=_.slen[0],He=_.slen[1],$e=_.slen[2],ut=_.slen[3],b){case 0:_.scalefac_compress=(Re*5+He<<4)+($e<<2)+ut;break;case 1:_.scalefac_compress=400+(Re*5+He<<2)+$e;break;case 2:_.scalefac_compress=500+Re*3+He;break}}if(!Z)for(_.part2_length=0,N=0;N<4;N++)_.part2_length+=_.slen[N]*_.sfb_partition_table[N];return Z};var q=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(m){for(var _=2;_<=576;_+=2){for(var b=0,k;m.scalefac_band.l[++b]<_;);for(k=U[b][0];m.scalefac_band.l[k+1]>_;)k--;for(k<0&&(k=U[b][0]),m.bv_scf[_-2]=k,k=U[b][1];m.scalefac_band.l[k+m.bv_scf[_-2]+2]>_;)k--;k<0&&(k=U[b][1]),m.bv_scf[_-1]=k}}}De.STEPS_per_dB=100,De.MAX_dB=120,De.GAIN_NOT_ENOUGH_SAMPLES=-24601,De.GAIN_ANALYSIS_ERROR=0,De.GAIN_ANALYSIS_OK=1,De.INIT_GAIN_ANALYSIS_ERROR=0,De.INIT_GAIN_ANALYSIS_OK=1,De.YULE_ORDER=10,De.MAX_ORDER=De.YULE_ORDER,De.MAX_SAMP_FREQ=48e3,De.RMS_WINDOW_TIME_NUMERATOR=1,De.RMS_WINDOW_TIME_DENOMINATOR=20,De.MAX_SAMPLES_PER_WINDOW=De.MAX_SAMP_FREQ*De.RMS_WINDOW_TIME_NUMERATOR/De.RMS_WINDOW_TIME_DENOMINATOR+1;function De(){}function Ne(){function p(L,D,le,O,G,h,$,i,R,T,d,g,y,C){this.quant_comp=D,this.quant_comp_s=le,this.safejoint=O,this.nsmsfix=G,this.st_lrm=h,this.st_s=$,this.nsbass=i,this.scale=R,this.masking_adj=T,this.ath_lower=d,this.ath_curve=g,this.interch=y,this.sfscale=C}var P;this.setModules=function(L){P=L};function U(L,D,le){a()}var S=[new p(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new p(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new p(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new p(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new p(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new p(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new p(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new p(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new p(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new p(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new p(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new p(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new p(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new p(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new p(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new p(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new p(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];function ae(L,D,le){var O=D,G=P.nearestBitrateFullIndex(D);if(L.VBR=te.vbr_abr,L.VBR_mean_bitrate_kbps=O,L.VBR_mean_bitrate_kbps=Math.min(L.VBR_mean_bitrate_kbps,320),L.VBR_mean_bitrate_kbps=Math.max(L.VBR_mean_bitrate_kbps,8),L.brate=L.VBR_mean_bitrate_kbps,L.VBR_mean_bitrate_kbps>320&&(L.disable_reservoir=!0),S[G].safejoint>0&&(L.exp_nspsytune=L.exp_nspsytune|2),S[G].sfscale>0&&(L.internal_flags.noise_shaping=2),Math.abs(S[G].nsbass)>0){var h=int(S[G].nsbass*4);h<0&&(h+=64),L.exp_nspsytune=L.exp_nspsytune|h<<2}return le!=0?L.quant_comp=S[G].quant_comp:Math.abs(L.quant_comp- -1)>0||(L.quant_comp=S[G].quant_comp),le!=0?L.quant_comp_short=S[G].quant_comp_s:Math.abs(L.quant_comp_short- -1)>0||(L.quant_comp_short=S[G].quant_comp_s),le!=0?L.msfix=S[G].nsmsfix:Math.abs(L.msfix- -1)>0||(L.msfix=S[G].nsmsfix),le!=0?L.internal_flags.nsPsy.attackthre=S[G].st_lrm:Math.abs(L.internal_flags.nsPsy.attackthre- -1)>0||(L.internal_flags.nsPsy.attackthre=S[G].st_lrm),le!=0?L.internal_flags.nsPsy.attackthre_s=S[G].st_s:Math.abs(L.internal_flags.nsPsy.attackthre_s- -1)>0||(L.internal_flags.nsPsy.attackthre_s=S[G].st_s),le!=0?L.scale=S[G].scale:Math.abs(L.scale- -1)>0||(L.scale=S[G].scale),le!=0?L.maskingadjust=S[G].masking_adj:Math.abs(L.maskingadjust-0)>0||(L.maskingadjust=S[G].masking_adj),S[G].masking_adj>0?le!=0?L.maskingadjust_short=S[G].masking_adj*.9:Math.abs(L.maskingadjust_short-0)>0||(L.maskingadjust_short=S[G].masking_adj*.9):le!=0?L.maskingadjust_short=S[G].masking_adj*1.1:Math.abs(L.maskingadjust_short-0)>0||(L.maskingadjust_short=S[G].masking_adj*1.1),le!=0?L.ATHlower=-S[G].ath_lower/10:Math.abs(-L.ATHlower*10-0)>0||(L.ATHlower=-S[G].ath_lower/10),le!=0?L.ATHcurve=S[G].ath_curve:Math.abs(L.ATHcurve- -1)>0||(L.ATHcurve=S[G].ath_curve),le!=0?L.interChRatio=S[G].interch:Math.abs(L.interChRatio- -1)>0||(L.interChRatio=S[G].interch),D}this.apply_preset=function(L,D,le){switch(D){case ge.R3MIX:{D=ge.V3,L.VBR=te.vbr_mtrh;break}case ge.MEDIUM:{D=ge.V4,L.VBR=te.vbr_rh;break}case ge.MEDIUM_FAST:{D=ge.V4,L.VBR=te.vbr_mtrh;break}case ge.STANDARD:{D=ge.V2,L.VBR=te.vbr_rh;break}case ge.STANDARD_FAST:{D=ge.V2,L.VBR=te.vbr_mtrh;break}case ge.EXTREME:{D=ge.V0,L.VBR=te.vbr_rh;break}case ge.EXTREME_FAST:{D=ge.V0,L.VBR=te.vbr_mtrh;break}case ge.INSANE:return D=320,L.preset=D,ae(L,D,le),L.VBR=te.vbr_off,D}switch(L.preset=D,D){case ge.V9:return U(),D;case ge.V8:return U(),D;case ge.V7:return U(),D;case ge.V6:return U(),D;case ge.V5:return U(),D;case ge.V4:return U(),D;case ge.V3:return U(),D;case ge.V2:return U(),D;case ge.V1:return U(),D;case ge.V0:return U(),D}return 8<=D&&D<=320?ae(L,D,le):(L.preset=0,D)}}function Ye(){var p;this.setModules=function(P){p=P},this.ResvFrameBegin=function(P,U){var S=P.internal_flags,ae,L=S.l3_side,D=p.getframebits(P);U.bits=(D-S.sideinfo_len*8)/S.mode_gr;var le=8*256*S.mode_gr-8;P.brate>320?a():(ae=8*1440,P.strict_ISO&&a()),S.ResvMax=ae-D,S.ResvMax>le&&(S.ResvMax=le),(S.ResvMax<0||P.disable_reservoir)&&(S.ResvMax=0);var O=U.bits*S.mode_gr+Math.min(S.ResvSize,S.ResvMax);return O>ae&&(O=ae),L.resvDrain_pre=0,S.pinfo!=null&&a(),O},this.ResvMaxBits=function(P,U,S,ae){var L=P.internal_flags,D,le=L.ResvSize,O=L.ResvMax;ae!=0&&(le+=U),(L.substep_shaping&1)!=0&&(O*=.9),S.bits=U,le*10>O*9?(D=le-O*9/10,S.bits+=D,L.substep_shaping|=128):(D=0,L.substep_shaping&=127,!P.disable_reservoir&&(L.substep_shaping&1)==0&&(S.bits-=.1*U));var G=le<L.ResvMax*6/10?le:L.ResvMax*6/10;return G-=D,G<0&&(G=0),G},this.ResvAdjust=function(P,U){P.ResvSize-=U.part2_3_length+U.part2_length},this.ResvFrameEnd=function(P,U){var S,ae=P.l3_side;P.ResvSize+=U*P.mode_gr;var L=0;ae.resvDrain_post=0,ae.resvDrain_pre=0,(S=P.ResvSize%8)!=0&&(L+=S),S=P.ResvSize-L-P.ResvMax,S>0&&(L+=S);{var D=Math.min(ae.main_data_begin*8,L)/8;ae.resvDrain_pre+=8*D,L-=8*D,P.ResvSize-=8*D,ae.main_data_begin-=D}ae.resvDrain_post+=L,P.ResvSize-=L}}_t.NUMTOCENTRIES=100,_t.MAXFRAMESIZE=2880;function _t(){this.setModules=function(U,S,ae){};var p=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];function P(U,S){var ae=S^U;return S=S>>8^p[ae&255],S}this.updateMusicCRC=function(U,S,ae,L){for(var D=0;D<L;++D)U[0]=P(S[ae+D],U[0])}}We.EQ=function(p,P){return Math.abs(p)>Math.abs(P)?Math.abs(p-P)<=Math.abs(p)*1e-6:Math.abs(p-P)<=Math.abs(P)*1e-6},We.NEQ=function(p,P){return!We.EQ(p,P)};function We(){var p=this,P=null,U=null;this.setModules=function(v,w,t,B){P=t,U=B};var S=null,ae=0,L=0,D=0;this.getframebits=function(v){var w=v.internal_flags,t;w.bitrate_index!=0?t=W.bitrate_table[v.version][w.bitrate_index]:t=v.brate;var B=0|(v.version+1)*72e3*t/v.out_samplerate+w.padding;return 8*B};function le(v){z.arraycopy(v.header[v.w_ptr].buf,0,S,L,v.sideinfo_len),L+=v.sideinfo_len,ae+=v.sideinfo_len*8,v.w_ptr=v.w_ptr+1&ke.MAX_HEADER_BUF-1}function O(v,w,t){for(;t>0;){var B;D==0&&(D=8,L++,v.header[v.w_ptr].write_timing==ae&&le(v),S[L]=0),B=Math.min(t,D),t-=B,D-=B,S[L]|=w>>t<<D,ae+=B}}function G(v,w){var t=v.internal_flags,B;if(w>=8&&(O(t,76,8),w-=8),w>=8&&(O(t,65,8),w-=8),w>=8&&(O(t,77,8),w-=8),w>=8&&(O(t,69,8),w-=8),w>=32){var x=P.getLameShortVersion();if(w>=32)for(B=0;B<x.length&&w>=8;++B)w-=8,O(t,x.charCodeAt(B),8)}for(;w>=1;w-=1)O(t,t.ancillary_flag,1),t.ancillary_flag^=v.disable_reservoir?0:1}function h(v,w,t){for(var B=v.header[v.h_ptr].ptr;t>0;){var x=Math.min(t,8-(B&7));t-=x,v.header[v.h_ptr].buf[B>>3]|=w>>t<<8-(B&7)-x,B+=x}v.header[v.h_ptr].ptr=B}function $(v,w){var t=v.internal_flags,B,x,q;if(B=t.l3_side,t.header[t.h_ptr].ptr=0,_e.fill(t.header[t.h_ptr].buf,0,t.sideinfo_len,0),v.out_samplerate<16e3?h(t,4094,12):h(t,4095,12),h(t,v.version,1),h(t,1,2),h(t,v.error_protection?0:1,1),h(t,t.bitrate_index,4),h(t,t.samplerate_index,2),h(t,t.padding,1),h(t,v.extension,1),h(t,v.mode.ordinal(),2),h(t,t.mode_ext,2),h(t,v.copyright,1),h(t,v.original,1),h(t,v.emphasis,2),v.error_protection&&h(t,0,16),v.version==1){for(h(t,B.main_data_begin,9),t.channels_out==2?h(t,B.private_bits,3):h(t,B.private_bits,5),q=0;q<t.channels_out;q++){var m;for(m=0;m<4;m++)h(t,B.scfsi[q][m],1)}for(x=0;x<2;x++)for(q=0;q<t.channels_out;q++){var _=B.tt[x][q];h(t,_.part2_3_length+_.part2_length,12),h(t,_.big_values/2,9),h(t,_.global_gain,8),h(t,_.scalefac_compress,4),_.block_type!=s.NORM_TYPE?(h(t,1,1),h(t,_.block_type,2),h(t,_.mixed_block_flag,1),_.table_select[0]==14&&(_.table_select[0]=16),h(t,_.table_select[0],5),_.table_select[1]==14&&(_.table_select[1]=16),h(t,_.table_select[1],5),h(t,_.subblock_gain[0],3),h(t,_.subblock_gain[1],3),h(t,_.subblock_gain[2],3)):(h(t,0,1),_.table_select[0]==14&&(_.table_select[0]=16),h(t,_.table_select[0],5),_.table_select[1]==14&&(_.table_select[1]=16),h(t,_.table_select[1],5),_.table_select[2]==14&&(_.table_select[2]=16),h(t,_.table_select[2],5),h(t,_.region0_count,4),h(t,_.region1_count,3)),h(t,_.preflag,1),h(t,_.scalefac_scale,1),h(t,_.count1table_select,1)}}else for(h(t,B.main_data_begin,8),h(t,B.private_bits,t.channels_out),x=0,q=0;q<t.channels_out;q++){var _=B.tt[x][q];h(t,_.part2_3_length+_.part2_length,12),h(t,_.big_values/2,9),h(t,_.global_gain,8),h(t,_.scalefac_compress,9),_.block_type!=s.NORM_TYPE?(h(t,1,1),h(t,_.block_type,2),h(t,_.mixed_block_flag,1),_.table_select[0]==14&&(_.table_select[0]=16),h(t,_.table_select[0],5),_.table_select[1]==14&&(_.table_select[1]=16),h(t,_.table_select[1],5),h(t,_.subblock_gain[0],3),h(t,_.subblock_gain[1],3),h(t,_.subblock_gain[2],3)):(h(t,0,1),_.table_select[0]==14&&(_.table_select[0]=16),h(t,_.table_select[0],5),_.table_select[1]==14&&(_.table_select[1]=16),h(t,_.table_select[1],5),_.table_select[2]==14&&(_.table_select[2]=16),h(t,_.table_select[2],5),h(t,_.region0_count,4),h(t,_.region1_count,3)),h(t,_.scalefac_scale,1),h(t,_.count1table_select,1)}v.error_protection&&a();{var b=t.h_ptr;t.h_ptr=b+1&ke.MAX_HEADER_BUF-1,t.header[t.h_ptr].write_timing=t.header[b].write_timing+w,t.h_ptr==t.w_ptr}}function i(v,w){var t=W.ht[w.count1table_select+32],B,x=0,q=w.big_values,m=w.big_values;for(B=(w.count1-w.big_values)/4;B>0;--B){var _=0,b=0,k;k=w.l3_enc[q+0],k!=0&&(b+=8,w.xr[m+0]<0&&_++),k=w.l3_enc[q+1],k!=0&&(b+=4,_*=2,w.xr[m+1]<0&&_++),k=w.l3_enc[q+2],k!=0&&(b+=2,_*=2,w.xr[m+2]<0&&_++),k=w.l3_enc[q+3],k!=0&&(b++,_*=2,w.xr[m+3]<0&&_++),q+=4,m+=4,O(v,_+t.table[b],t.hlen[b]),x+=t.hlen[b]}return x}function R(v,w,t,B,x){var q=W.ht[w],m=0;if(w==0)return m;for(var _=t;_<B;_+=2){var b=0,k=0,N=q.xlen,r=q.xlen,l=0,Z=x.l3_enc[_],H=x.l3_enc[_+1];if(Z!=0&&(x.xr[_]<0&&l++,b--),w>15){if(Z>14){var K=Z-15;l|=K<<1,k=N,Z=15}if(H>14){var se=H-15;l<<=N,l|=se,k+=N,H=15}r=16}H!=0&&(l<<=1,x.xr[_+1]<0&&l++,b--),Z=Z*r+H,k-=b,b+=q.hlen[Z],O(v,q.table[Z],b),O(v,l,k),m+=b+k}return m}function T(v,w){var t=3*v.scalefac_band.s[3];t>w.big_values&&(t=w.big_values);var B=R(v,w.table_select[0],0,t,w);return B+=R(v,w.table_select[1],t,w.big_values,w),B}function d(v,w){var t,B,x,q;t=w.big_values;var m=w.region0_count+1;return x=v.scalefac_band.l[m],m+=w.region1_count+1,q=v.scalefac_band.l[m],x>t&&(x=t),q>t&&(q=t),B=R(v,w.table_select[0],0,x,w),B+=R(v,w.table_select[1],x,q,w),B+=R(v,w.table_select[2],q,t,w),B}function g(v){var w,t,B,x,q=0,m=v.internal_flags,_=m.l3_side;if(v.version==1)for(w=0;w<2;w++)for(t=0;t<m.channels_out;t++){var b=_.tt[w][t],k=Ve.slen1_tab[b.scalefac_compress],N=Ve.slen2_tab[b.scalefac_compress];for(x=0,B=0;B<b.sfbdivide;B++)b.scalefac[B]!=-1&&(O(m,b.scalefac[B],k),x+=k);for(;B<b.sfbmax;B++)b.scalefac[B]!=-1&&(O(m,b.scalefac[B],N),x+=N);b.block_type==s.SHORT_TYPE?x+=T(m,b):x+=d(m,b),x+=i(m,b),q+=x}else for(w=0,t=0;t<m.channels_out;t++){var b=_.tt[w][t],r,l,Z=0;if(x=0,B=0,l=0,b.block_type==s.SHORT_TYPE){for(;l<4;l++){var H=b.sfb_partition_table[l]/3,K=b.slen[l];for(r=0;r<H;r++,B++)O(m,Math.max(b.scalefac[B*3+0],0),K),O(m,Math.max(b.scalefac[B*3+1],0),K),O(m,Math.max(b.scalefac[B*3+2],0),K),Z+=3*K}x+=T(m,b)}else{for(;l<4;l++){var H=b.sfb_partition_table[l],K=b.slen[l];for(r=0;r<H;r++,B++)O(m,Math.max(b.scalefac[B],0),K),Z+=K}x+=d(m,b)}x+=i(m,b),q+=Z+x}return q}function y(){this.total=0}function C(v,w){var t=v.internal_flags,B,x,q;return t.w_ptr,q=t.h_ptr-1,q==-1&&(q=ke.MAX_HEADER_BUF-1),B=t.header[q].write_timing-ae,w.total=B,B>=0&&a(),x=p.getframebits(v),B+=x,w.total+=x,w.total%8!=0?w.total=1+w.total/8:w.total=w.total/8,w.total+=L+1,B}this.flush_bitstream=function(v){var w=v.internal_flags,t,B;w.h_ptr-1,t=w.l3_side,!((B=C(v,new y))<0)&&(G(v,B),w.ResvSize=0,t.main_data_begin=0,w.findReplayGain&&a(),w.findPeakSample&&a())},this.format_bitstream=function(v){var w=v.internal_flags,t;t=w.l3_side;var B=this.getframebits(v);G(v,t.resvDrain_pre),$(v,B);var x=8*w.sideinfo_len;if(x+=g(v),G(v,t.resvDrain_post),x+=t.resvDrain_post,t.main_data_begin+=(B-x)/8,C(v,new y)!=w.ResvSize,t.main_data_begin*8!=w.ResvSize&&(w.ResvSize=t.main_data_begin*8),ae>1e9){var q;for(q=0;q<ke.MAX_HEADER_BUF;++q)w.header[q].write_timing-=ae;ae=0}return 0},this.copy_buffer=function(v,w,t,B,x){var q=L+1;if(q<=0)return 0;if(B!=0&&q>B)return-1;if(z.arraycopy(S,0,w,t,q),L=-1,D=0,x!=0){var m=f(1);m[0]=v.nMusicCRC,U.updateMusicCRC(m,w,t,q),v.nMusicCRC=m[0],q>0&&(v.VBR_seek_table.nBytesWritten+=q),v.decode_on_the_fly&&a()}return q},this.init_bit_stream_w=function(v){S=c(ge.LAME_MAXMP3BUFFER),v.h_ptr=v.w_ptr=0,v.header[v.h_ptr].write_timing=0,L=-1,D=0,ae=0}}function Ae(p,P,U,S){this.xlen=p,this.linmax=P,this.table=U,this.hlen=S}var W={};W.t1HB=[1,1,1,0],W.t2HB=[1,2,1,3,1,1,3,2,0],W.t3HB=[3,2,1,1,1,1,3,2,0],W.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],W.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],W.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],W.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],W.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],W.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],W.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],W.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],W.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],W.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],W.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],W.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],W.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],W.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],W.t1l=[1,4,3,5],W.t2l=[1,4,7,4,5,7,6,7,8],W.t3l=[2,3,7,4,4,7,6,7,8],W.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],W.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],W.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],W.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],W.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],W.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],W.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],W.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],W.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],W.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],W.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],W.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],W.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],W.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],W.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],W.ht=[new Ae(0,0,null,null),new Ae(2,0,W.t1HB,W.t1l),new Ae(3,0,W.t2HB,W.t2l),new Ae(3,0,W.t3HB,W.t3l),new Ae(0,0,null,null),new Ae(4,0,W.t5HB,W.t5l),new Ae(4,0,W.t6HB,W.t6l),new Ae(6,0,W.t7HB,W.t7l),new Ae(6,0,W.t8HB,W.t8l),new Ae(6,0,W.t9HB,W.t9l),new Ae(8,0,W.t10HB,W.t10l),new Ae(8,0,W.t11HB,W.t11l),new Ae(8,0,W.t12HB,W.t12l),new Ae(16,0,W.t13HB,W.t13l),new Ae(0,0,null,W.t16_5l),new Ae(16,0,W.t15HB,W.t15l),new Ae(1,1,W.t16HB,W.t16l),new Ae(2,3,W.t16HB,W.t16l),new Ae(3,7,W.t16HB,W.t16l),new Ae(4,15,W.t16HB,W.t16l),new Ae(6,63,W.t16HB,W.t16l),new Ae(8,255,W.t16HB,W.t16l),new Ae(10,1023,W.t16HB,W.t16l),new Ae(13,8191,W.t16HB,W.t16l),new Ae(4,15,W.t24HB,W.t24l),new Ae(5,31,W.t24HB,W.t24l),new Ae(6,63,W.t24HB,W.t24l),new Ae(7,127,W.t24HB,W.t24l),new Ae(8,255,W.t24HB,W.t24l),new Ae(9,511,W.t24HB,W.t24l),new Ae(11,2047,W.t24HB,W.t24l),new Ae(13,8191,W.t24HB,W.t24l),new Ae(0,0,W.t32HB,W.t32l),new Ae(0,0,W.t33HB,W.t33l)],W.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],W.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],W.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],W.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],W.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],W.scfsi_band=[0,6,11,16,21];function dt(p){this.bits=p}function Xe(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}function Ue(){this.setModules=function(p,P){}}function Tt(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=M(s.SBMAX_l),this.s=M(s.SBMAX_s),this.psfb21=M(s.PSFB21),this.psfb12=M(s.PSFB12),this.cb_l=M(s.CBANDS),this.cb_s=M(s.CBANDS),this.eql_w=M(s.BLKSIZE/2)}function bt(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=Ce.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}function Rt(p){var P=p;this.quantize=P,this.iteration_loop=function(U,S,ae,L){var D=U.internal_flags,le=M(pe.SFBMAX),O=M(576),G=f(2),h=0,$=D.l3_side,i=new dt(h);this.quantize.rv.ResvFrameBegin(U,i),h=i.bits;for(var R=0;R<D.mode_gr;R++){this.quantize.qupvt.on_pe(U,S,G,h,R,R),D.mode_ext==s.MPG_MD_MS_LR&&a();for(var T=0;T<D.channels_out;T++){var d,g,y=$.tt[R][T];y.block_type!=s.SHORT_TYPE?(d=0,g=D.PSY.mask_adjust-d):(d=0,g=D.PSY.mask_adjust_short-d),D.masking_lower=Math.pow(10,g*.1),this.quantize.init_outer_loop(D,y),this.quantize.init_xrpow(D,y,O)&&(this.quantize.qupvt.calc_xmin(U,L[R][T],y,le),this.quantize.outer_loop(U,y,le,O,T,G[T])),this.quantize.iteration_finish_one(D,R,T)}}this.quantize.rv.ResvFrameEnd(D,h)}}function wt(){}function rt(p,P,U,S){this.l=f(1+s.SBMAX_l),this.s=f(1+s.SBMAX_s),this.psfb21=f(1+s.PSFB21),this.psfb12=f(1+s.PSFB12);var ae=this.l,L=this.s;arguments.length==4&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],z.arraycopy(this.arrL,0,ae,0,Math.min(this.arrL.length,this.l.length)),z.arraycopy(this.arrS,0,L,0,Math.min(this.arrS.length,this.s.length)),z.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),z.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}tt.Q_MAX=257,tt.Q_MAX2=116,tt.LARGE_BITS=1e5,tt.IXMAX_VAL=8206;function tt(){var p=null,P=null,U=null;this.setModules=function(C,v,w){p=C,P=v,U=w};function S(C){return $[C+tt.Q_MAX2]}this.IPOW20=function(C){return i[C]};var ae=2220446049250313e-31,L=tt.IXMAX_VAL,D=L+2,le=tt.Q_MAX,O=tt.Q_MAX2,G=100;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var h=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=h,this.sfBandIndex=[new rt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new rt([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new rt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new rt([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new rt([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new rt([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new rt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new rt([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0/3,12/3,24/3,36/3,54/3,78/3,108/3,144/3,186/3,240/3,312/3,402/3,522/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new rt([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0/3,24/3,48/3,72/3,108/3,156/3,216/3,288/3,372/3,480/3,486/3,492/3,498/3,576/3],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var $=M(le+O+1),i=M(le),R=M(D),T=M(D);this.adj43=T;function d(C,v){var w=U.ATHformula(v,C);return w-=G,w=Math.pow(10,w/10+C.ATHlower),w}function g(C){for(var v=C.internal_flags.ATH.l,w=C.internal_flags.ATH.psfb21,t=C.internal_flags.ATH.s,B=C.internal_flags.ATH.psfb12,x=C.internal_flags,q=C.out_samplerate,m=0;m<s.SBMAX_l;m++){var _=x.scalefac_band.l[m],b=x.scalefac_band.l[m+1];v[m]=Se.MAX_VALUE;for(var k=_;k<b;k++){var N=k*q/1152,r=d(C,N);v[m]=Math.min(v[m],r)}}for(var m=0;m<s.PSFB21;m++){var _=x.scalefac_band.psfb21[m],b=x.scalefac_band.psfb21[m+1];w[m]=Se.MAX_VALUE;for(var k=_;k<b;k++){var N=k*q/1152,r=d(C,N);w[m]=Math.min(w[m],r)}}for(var m=0;m<s.SBMAX_s;m++){var _=x.scalefac_band.s[m],b=x.scalefac_band.s[m+1];t[m]=Se.MAX_VALUE;for(var k=_;k<b;k++){var N=k*q/384,r=d(C,N);t[m]=Math.min(t[m],r)}t[m]*=x.scalefac_band.s[m+1]-x.scalefac_band.s[m]}for(var m=0;m<s.PSFB12;m++){var _=x.scalefac_band.psfb12[m],b=x.scalefac_band.psfb12[m+1];B[m]=Se.MAX_VALUE;for(var k=_;k<b;k++){var N=k*q/384,r=d(C,N);B[m]=Math.min(B[m],r)}B[m]*=x.scalefac_band.s[13]-x.scalefac_band.s[12]}C.noATH&&a(),x.ATH.floor=10*n(d(C,-1))}this.iteration_init=function(C){var v=C.internal_flags,w=v.l3_side,t;if(v.iteration_init_init==0){for(v.iteration_init_init=1,w.main_data_begin=0,g(C),R[0]=0,t=1;t<D;t++)R[t]=Math.pow(t,4/3);for(t=0;t<D-1;t++)T[t]=t+1-Math.pow(.5*(R[t]+R[t+1]),.75);for(T[t]=.5,t=0;t<le;t++)i[t]=Math.pow(2,(t-210)*-.1875);for(t=0;t<=le+O;t++)$[t]=Math.pow(2,(t-210-O)*.25);p.huffman_init(v);{var B,x,q,m;for(t=C.exp_nspsytune>>2&63,t>=32&&(t-=64),B=Math.pow(10,t/4/10),t=C.exp_nspsytune>>8&63,t>=32&&(t-=64),x=Math.pow(10,t/4/10),t=C.exp_nspsytune>>14&63,t>=32&&(t-=64),q=Math.pow(10,t/4/10),t=C.exp_nspsytune>>20&63,t>=32&&(t-=64),m=q*Math.pow(10,t/4/10),t=0;t<s.SBMAX_l;t++){var _;t<=6?_=B:t<=13?_=x:t<=20?_=q:_=m,v.nsPsy.longfact[t]=_}for(t=0;t<s.SBMAX_s;t++){var _;t<=5?_=B:t<=10?_=x:t<=11?_=q:_=m,v.nsPsy.shortfact[t]=_}}}},this.on_pe=function(C,v,w,t,B,x){var q=C.internal_flags,m=0,_,b=f(2),k,N=new dt(m),r=P.ResvMaxBits(C,t,N,x);m=N.bits;var l=m+r;for(l>ke.MAX_BITS_PER_GRANULE&&(l=ke.MAX_BITS_PER_GRANULE),_=0,k=0;k<q.channels_out;++k)w[k]=Math.min(ke.MAX_BITS_PER_CHANNEL,m/q.channels_out),b[k]=0|w[k]*v[B][k]/700-w[k],b[k]>t*3/4&&(b[k]=t*3/4),b[k]<0&&(b[k]=0),b[k]+w[k]>ke.MAX_BITS_PER_CHANNEL&&(b[k]=Math.max(0,ke.MAX_BITS_PER_CHANNEL-w[k])),_+=b[k];if(_>r)for(k=0;k<q.channels_out;++k)b[k]=r*b[k]/_;for(k=0;k<q.channels_out;++k)w[k]+=b[k],r-=b[k];for(_=0,k=0;k<q.channels_out;++k)_+=w[k];return _>ke.MAX_BITS_PER_GRANULE&&a(),l},this.athAdjust=function(C,v,w){var t=90.30873362,B=94.82444863,x=ee.FAST_LOG10_X(v,10),q=C*C,m=0;return x-=w,q>1e-20&&(m=1+ee.FAST_LOG10_X(q,10/t)),m<0&&(m=0),x*=m,x+=w+t-B,Math.pow(10,.1*x)},this.calc_xmin=function(C,v,w,t){var B=0,x=C.internal_flags,q,m=0,_=0,b=x.ATH,k=w.xr,N=C.VBR==te.vbr_mtrh?1:0,r=x.masking_lower;for((C.VBR==te.vbr_mtrh||C.VBR==te.vbr_mt)&&(r=1),q=0;q<w.psy_lmax;q++){var l,Z,H,K,se,ce;C.VBR==te.vbr_rh||C.VBR==te.vbr_mtrh?Z=athAdjust(b.adjust,b.l[q],b.floor):Z=b.adjust*b.l[q],se=w.width[q],H=Z/se,K=ae,ce=se>>1,l=0;do{var he,Re;he=k[m]*k[m],l+=he,K+=he<H?he:H,m++,Re=k[m]*k[m],l+=Re,K+=Re<H?Re:H,m++}while(--ce>0);if(l>Z&&_++,q==s.SBPSY_l&&a(),N!=0&&(Z=K),!C.ATHonly){var He=v.en.l[q];if(He>0){var $e;$e=l*v.thm.l[q]*r/He,N!=0&&($e*=x.nsPsy.longfact[q]),Z<$e&&(Z=$e)}}N!=0?t[B++]=Z:t[B++]=Z*x.nsPsy.longfact[q]}var ut=575;if(w.block_type!=s.SHORT_TYPE)for(var ft=576;ft--!=0&&We.EQ(k[ft],0);)ut=ft;w.max_nonzero_coeff=ut;for(var at=w.sfb_smin;q<w.psymax;at++,q+=3){var se,lt,mt;for(C.VBR==te.vbr_rh||C.VBR==te.vbr_mtrh?mt=athAdjust(b.adjust,b.s[at],b.floor):mt=b.adjust*b.s[at],se=w.width[q],lt=0;lt<3;lt++){var l=0,Z,H,K,ce=se>>1;H=mt/se,K=ae;do{var he,Re;he=k[m]*k[m],l+=he,K+=he<H?he:H,m++,Re=k[m]*k[m],l+=Re,K+=Re<H?Re:H,m++}while(--ce>0);if(l>mt&&_++,at==s.SBPSY_s&&a(),N!=0?Z=K:Z=mt,!C.ATHonly&&!C.ATHshort){var He=v.en.s[at][lt];if(He>0){var $e;$e=l*v.thm.s[at][lt]*r/He,N!=0&&($e*=x.nsPsy.shortfact[at]),Z<$e&&(Z=$e)}}N!=0?t[B++]=Z:t[B++]=Z*x.nsPsy.shortfact[at]}C.useTemporal&&(t[B-3]>t[B-3+1]&&(t[B-3+1]+=(t[B-3]-t[B-3+1])*x.decay),t[B-3+1]>t[B-3+2]&&(t[B-3+2]+=(t[B-3+1]-t[B-3+2])*x.decay))}return _};function y(C){this.s=C}this.calc_noise_core=function(C,v,w,t){var B=0,x=v.s,q=C.l3_enc;if(x>C.count1)for(;w--!=0;){var m;m=C.xr[x],x++,B+=m*m,m=C.xr[x],x++,B+=m*m}else if(x>C.big_values){var _=M(2);for(_[0]=0,_[1]=t;w--!=0;){var m;m=Math.abs(C.xr[x])-_[q[x]],x++,B+=m*m,m=Math.abs(C.xr[x])-_[q[x]],x++,B+=m*m}}else for(;w--!=0;){var m;m=Math.abs(C.xr[x])-R[q[x]]*t,x++,B+=m*m,m=Math.abs(C.xr[x])-R[q[x]]*t,x++,B+=m*m}return v.s=x,B},this.calc_noise=function(C,v,w,t,B){var x=0,q=0,m,_,b=0,k=0,N=0,r=-20,l=0,Z=C.scalefac,H=0;for(t.over_SSD=0,m=0;m<C.psymax;m++){var K=C.global_gain-(Z[H++]+(C.preflag!=0?h[m]:0)<<C.scalefac_scale+1)-C.subblock_gain[C.window[m]]*8,se=0;if(B!=null&&B.step[m]==K)se=B.noise[m],l+=C.width[m],w[x++]=se/v[q++],se=B.noise_log[m];else{var ce=S(K);if(_=C.width[m]>>1,l+C.width[m]>C.max_nonzero_coeff){var he;he=C.max_nonzero_coeff-l+1,he>0?_=he>>1:_=0}var Re=new y(l);se=this.calc_noise_core(C,Re,_,ce),l=Re.s,B!=null&&(B.step[m]=K,B.noise[m]=se),se=w[x++]=se/v[q++],se=ee.FAST_LOG10(Math.max(se,1e-20)),B!=null&&(B.noise_log[m]=se)}if(B!=null&&(B.global_gain=C.global_gain),N+=se,se>0){var He;He=Math.max(0|se*10+.5,1),t.over_SSD+=He*He,b++,k+=se}r=Math.max(r,se)}return t.over_count=b,t.tot_noise=N,t.over_noise=k,t.max_noise=r,b}}function At(){this.global_gain=0,this.sfb_count1=0,this.step=f(39),this.noise=M(39),this.noise_log=M(39)}function vt(){this.xr=M(576),this.l3_enc=f(576),this.scalefac=f(pe.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=f(3),this.subblock_gain=f(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=f(pe.SFBMAX),this.window=f(pe.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=f(4),this.max_nonzero_coeff=0;var p=this;function P(S){return new Int32Array(S)}function U(S){return new Float32Array(S)}this.assign=function(S){p.xr=U(S.xr),p.l3_enc=P(S.l3_enc),p.scalefac=P(S.scalefac),p.xrpow_max=S.xrpow_max,p.part2_3_length=S.part2_3_length,p.big_values=S.big_values,p.count1=S.count1,p.global_gain=S.global_gain,p.scalefac_compress=S.scalefac_compress,p.block_type=S.block_type,p.mixed_block_flag=S.mixed_block_flag,p.table_select=P(S.table_select),p.subblock_gain=P(S.subblock_gain),p.region0_count=S.region0_count,p.region1_count=S.region1_count,p.preflag=S.preflag,p.scalefac_scale=S.scalefac_scale,p.count1table_select=S.count1table_select,p.part2_length=S.part2_length,p.sfb_lmax=S.sfb_lmax,p.sfb_smin=S.sfb_smin,p.psy_lmax=S.psy_lmax,p.sfbmax=S.sfbmax,p.psymax=S.psymax,p.sfbdivide=S.sfbdivide,p.width=P(S.width),p.window=P(S.window),p.count1bits=S.count1bits,p.sfb_partition_table=S.sfb_partition_table.slice(0),p.slen=P(S.slen),p.max_nonzero_coeff=S.max_nonzero_coeff}}var pe={};pe.SFBMAX=s.SBMAX_s*3;function Qt(){this.rv=null;var p;this.qupvt=null;var P,U=new Ue,S;this.setModules=function(T,d,g,y){p=d,this.rv=d,P=g,this.qupvt=g,S=y,U.setModules(P,S)};function ae(T,d,g,y){y=0;for(var C=0;C<=g;++C){var v=Math.abs(T.xr[C]);y+=v,d[C]=Math.sqrt(v*Math.sqrt(v)),d[C]>T.xrpow_max&&(T.xrpow_max=d[C])}return y}this.init_xrpow=function(T,d,g){var y=0,C=0|d.max_nonzero_coeff;if(d.xrpow_max=0,_e.fill(g,C,576,0),y=ae(d,g,C,y),y>1e-20){var v=0;(T.substep_shaping&2)!=0&&(v=1);for(var w=0;w<d.psymax;w++)T.pseudohalf[w]=v;return!0}return _e.fill(d.l3_enc,0,576,0),!1};function L(T,d){var g=T.ATH,y=d.xr;if(d.block_type!=s.SHORT_TYPE)for(var C=!1,v=s.PSFB21-1;v>=0&&!C;v--){var w=T.scalefac_band.psfb21[v],t=T.scalefac_band.psfb21[v+1],B=P.athAdjust(g.adjust,g.psfb21[v],g.floor);T.nsPsy.longfact[21]>1e-12&&(B*=T.nsPsy.longfact[21]);for(var x=t-1;x>=w;x--)if(Math.abs(y[x])<B)y[x]=0;else{C=!0;break}}else for(var q=0;q<3;q++)for(var C=!1,v=s.PSFB12-1;v>=0&&!C;v--){var w=T.scalefac_band.s[12]*3+(T.scalefac_band.s[13]-T.scalefac_band.s[12])*q+(T.scalefac_band.psfb12[v]-T.scalefac_band.psfb12[0]),t=w+(T.scalefac_band.psfb12[v+1]-T.scalefac_band.psfb12[v]),m=P.athAdjust(g.adjust,g.psfb12[v],g.floor);T.nsPsy.shortfact[12]>1e-12&&(m*=T.nsPsy.shortfact[12]);for(var x=t-1;x>=w;x--)if(Math.abs(y[x])<m)y[x]=0;else{C=!0;break}}}this.init_outer_loop=function(T,d){d.part2_3_length=0,d.big_values=0,d.count1=0,d.global_gain=210,d.scalefac_compress=0,d.table_select[0]=0,d.table_select[1]=0,d.table_select[2]=0,d.subblock_gain[0]=0,d.subblock_gain[1]=0,d.subblock_gain[2]=0,d.subblock_gain[3]=0,d.region0_count=0,d.region1_count=0,d.preflag=0,d.scalefac_scale=0,d.count1table_select=0,d.part2_length=0,d.sfb_lmax=s.SBPSY_l,d.sfb_smin=s.SBPSY_s,d.psy_lmax=T.sfb21_extra?s.SBMAX_l:s.SBPSY_l,d.psymax=d.psy_lmax,d.sfbmax=d.sfb_lmax,d.sfbdivide=11;for(var g=0;g<s.SBMAX_l;g++)d.width[g]=T.scalefac_band.l[g+1]-T.scalefac_band.l[g],d.window[g]=3;if(d.block_type==s.SHORT_TYPE){var y=M(576);d.sfb_smin=0,d.sfb_lmax=0,d.mixed_block_flag!=0&&a(),d.psymax=d.sfb_lmax+3*((T.sfb21_extra?s.SBMAX_s:s.SBPSY_s)-d.sfb_smin),d.sfbmax=d.sfb_lmax+3*(s.SBPSY_s-d.sfb_smin),d.sfbdivide=d.sfbmax-18,d.psy_lmax=d.sfb_lmax;var C=T.scalefac_band.l[d.sfb_lmax];z.arraycopy(d.xr,0,y,0,576);for(var g=d.sfb_smin;g<s.SBMAX_s;g++)for(var v=T.scalefac_band.s[g],w=T.scalefac_band.s[g+1],t=0;t<3;t++)for(var B=v;B<w;B++)d.xr[C++]=y[3*B+t];for(var x=d.sfb_lmax,g=d.sfb_smin;g<s.SBMAX_s;g++)d.width[x]=d.width[x+1]=d.width[x+2]=T.scalefac_band.s[g+1]-T.scalefac_band.s[g],d.window[x]=0,d.window[x+1]=1,d.window[x+2]=2,x+=3}d.count1bits=0,d.sfb_partition_table=P.nr_of_sfb_block[0][0],d.slen[0]=0,d.slen[1]=0,d.slen[2]=0,d.slen[3]=0,d.max_nonzero_coeff=575,_e.fill(d.scalefac,0),L(T,d)};function D(T){this.ordinal=T}D.BINSEARCH_NONE=new D(0),D.BINSEARCH_UP=new D(1),D.BINSEARCH_DOWN=new D(2);function le(T,d,g,y,C){var v,w=T.CurrentStep[y],t=!1,B=T.OldValue[y],x=D.BINSEARCH_NONE;for(d.global_gain=B,g-=d.part2_length;;){var q;if(v=S.count_bits(T,C,d,null),w==1||v==g)break;v>g?(x==D.BINSEARCH_DOWN&&(t=!0),t&&(w/=2),x=D.BINSEARCH_UP,q=w):(x==D.BINSEARCH_UP&&(t=!0),t&&(w/=2),x=D.BINSEARCH_DOWN,q=-w),d.global_gain+=q,d.global_gain<0&&a(),d.global_gain>255&&a()}for(;v>g&&d.global_gain<255;)d.global_gain++,v=S.count_bits(T,C,d,null);return T.CurrentStep[y]=B-d.global_gain>=4?4:2,T.OldValue[y]=d.global_gain,d.part2_3_length=v,v}function O(T){for(var d=0;d<T.sfbmax;d++)if(T.scalefac[d]+T.subblock_gain[T.window[d]]==0)return!1;return!0}function G(T,d,g,y,C){var v;switch(T){default:case 9:{d.over_count>0?(v=g.over_SSD<=d.over_SSD,g.over_SSD==d.over_SSD&&(v=g.bits<d.bits)):v=g.max_noise<0&&g.max_noise*10+g.bits<=d.max_noise*10+d.bits;break}case 0:v=g.over_count<d.over_count||g.over_count==d.over_count&&g.over_noise<d.over_noise||g.over_count==d.over_count&&We.EQ(g.over_noise,d.over_noise)&&g.tot_noise<d.tot_noise;break;case 8:a();case 1:v=g.max_noise<d.max_noise;break;case 2:v=g.tot_noise<d.tot_noise;break;case 3:v=g.tot_noise<d.tot_noise&&g.max_noise<d.max_noise;break;case 4:v=g.max_noise<=0&&d.max_noise>.2||g.max_noise<=0&&d.max_noise<0&&d.max_noise>g.max_noise-.2&&g.tot_noise<d.tot_noise||g.max_noise<=0&&d.max_noise>0&&d.max_noise>g.max_noise-.2&&g.tot_noise<d.tot_noise+d.over_noise||g.max_noise>0&&d.max_noise>-.05&&d.max_noise>g.max_noise-.1&&g.tot_noise+g.over_noise<d.tot_noise+d.over_noise||g.max_noise>0&&d.max_noise>-.1&&d.max_noise>g.max_noise-.15&&g.tot_noise+g.over_noise+g.over_noise<d.tot_noise+d.over_noise+d.over_noise;break;case 5:v=g.over_noise<d.over_noise||We.EQ(g.over_noise,d.over_noise)&&g.tot_noise<d.tot_noise;break;case 6:v=g.over_noise<d.over_noise||We.EQ(g.over_noise,d.over_noise)&&(g.max_noise<d.max_noise||We.EQ(g.max_noise,d.max_noise)&&g.tot_noise<=d.tot_noise);break;case 7:v=g.over_count<d.over_count||g.over_noise<d.over_noise;break}return d.over_count==0&&(v=v&&g.bits<d.bits),v}function h(T,d,g,y,C){var v=T.internal_flags,w;d.scalefac_scale==0?w=1.2968395546510096:w=1.6817928305074292;for(var t=0,B=0;B<d.sfbmax;B++)t<g[B]&&(t=g[B]);var x=v.noise_shaping_amp;switch(x==3&&a(),x){case 2:break;case 1:t>1?t=Math.pow(t,.5):t*=.95;break;case 0:default:t>1?t=1:t*=.95;break}for(var q=0,B=0;B<d.sfbmax;B++){var m=d.width[B],_;if(q+=m,!(g[B]<t)){for((v.substep_shaping&2)!=0&&a(),d.scalefac[B]++,_=-m;_<0;_++)y[q+_]*=w,y[q+_]>d.xrpow_max&&(d.xrpow_max=y[q+_]);if(v.noise_shaping_amp==2)return}}}function $(T,d){for(var g=1.2968395546510096,y=0,C=0;C<T.sfbmax;C++){var v=T.width[C],w=T.scalefac[C];if(T.preflag!=0&&(w+=P.pretab[C]),y+=v,(w&1)!=0){w++;for(var t=-v;t<0;t++)d[y+t]*=g,d[y+t]>T.xrpow_max&&(T.xrpow_max=d[y+t])}T.scalefac[C]=w>>1}T.preflag=0,T.scalefac_scale=1}function i(T,d,g){var y,C=d.scalefac;for(y=0;y<d.sfb_lmax;y++)if(C[y]>=16)return!0;for(var v=0;v<3;v++){var w=0,t=0;for(y=d.sfb_lmax+v;y<d.sfbdivide;y+=3)w<C[y]&&(w=C[y]);for(;y<d.sfbmax;y+=3)t<C[y]&&(t=C[y]);if(!(w<16&&t<8)){if(d.subblock_gain[v]>=7)return!0;d.subblock_gain[v]++;var B=T.scalefac_band.l[d.sfb_lmax];for(y=d.sfb_lmax+v;y<d.sfbmax;y+=3){var x,q=d.width[y],m=C[y];if(m=m-(4>>d.scalefac_scale),m>=0){C[y]=m,B+=q*3;continue}C[y]=0;{var _=210+(m<<d.scalefac_scale+1);x=P.IPOW20(_)}B+=q*(v+1);for(var b=-q;b<0;b++)g[B+b]*=x,g[B+b]>d.xrpow_max&&(d.xrpow_max=g[B+b]);B+=q*(3-v-1)}{var x=P.IPOW20(202);B+=d.width[y]*(v+1);for(var b=-d.width[y];b<0;b++)g[B+b]*=x,g[B+b]>d.xrpow_max&&(d.xrpow_max=g[B+b])}}}return!1}function R(T,d,g,y,C){var v=T.internal_flags;h(T,d,g,y);var w=O(d);return w?!1:(v.mode_gr==2?w=S.scale_bitcount(d):w=S.scale_bitcount_lsf(v,d),w?(v.noise_shaping>1&&(_e.fill(v.pseudohalf,0),d.scalefac_scale==0?($(d,y),w=!1):d.block_type==s.SHORT_TYPE&&v.subblock_gain>0&&(w=i(v,d,y)||O(d))),w||(v.mode_gr==2?w=S.scale_bitcount(d):w=S.scale_bitcount_lsf(v,d)),!w):!0)}this.outer_loop=function(T,d,g,y,C,v){var w=T.internal_flags,t=new vt,B=M(576),x=M(pe.SFBMAX),q=new Xe,m,_=new At,b=9999999,k=!1,N=!1;if(le(w,d,v,C,y),w.noise_shaping==0)return 100;P.calc_noise(d,g,x,q,_),q.bits=d.part2_3_length,t.assign(d);var r=0;for(z.arraycopy(y,0,B,0,576);!k;){do{var l=new Xe,Z,H=255;if((w.substep_shaping&2)!=0?Z=20:Z=3,w.sfb21_extra&&a(),!R(T,t,x,y))break;t.scalefac_scale!=0&&(H=254);var K=v-t.part2_length;if(K<=0)break;for(;(t.part2_3_length=S.count_bits(w,y,t,_))>K&&t.global_gain<=H;)t.global_gain++;if(t.global_gain>H)break;if(q.over_count==0){for(;(t.part2_3_length=S.count_bits(w,y,t,_))>b&&t.global_gain<=H;)t.global_gain++;if(t.global_gain>H)break}if(P.calc_noise(t,g,x,l,_),l.bits=t.part2_3_length,d.block_type!=s.SHORT_TYPE?m=T.quant_comp:m=T.quant_comp_short,m=G(m,q,l)?1:0,m!=0)b=d.part2_3_length,q=l,d.assign(t),r=0,z.arraycopy(y,0,B,0,576);else if(w.full_outer_loop==0){if(++r>Z&&q.over_count==0)break;w.noise_shaping_amp==3,w.noise_shaping_amp==3}}while(t.global_gain+t.scalefac_scale<255);w.noise_shaping_amp==3?a():k=!0}return T.VBR==te.vbr_rh||T.VBR==te.vbr_mtrh?z.arraycopy(B,0,y,0,576):(w.substep_shaping&1)!=0&&a(),q.over_count},this.iteration_finish_one=function(T,d,g){var y=T.l3_side,C=y.tt[d][g];S.best_scalefac_store(T,d,g,y),T.use_best_huffman==1&&S.best_huffman_divide(T,C),p.ResvAdjust(T,C)}}function E(){var p=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*ee.SQRT2*.5/2384e-9,.017876148*ee.SQRT2*.5/2384e-9,.003134727*ee.SQRT2*.5/2384e-9,.002457142*ee.SQRT2*.5/2384e-9,971317e-9*ee.SQRT2*.5/2384e-9,218868e-9*ee.SQRT2*.5/2384e-9,101566e-9*ee.SQRT2*.5/2384e-9,13828e-9*ee.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],P=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],U=P[s.SHORT_TYPE],S=P[s.SHORT_TYPE],ae=P[s.SHORT_TYPE],L=P[s.SHORT_TYPE],D=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];function le(h,$,i){for(var R=10,T=$+238-14-286,d=-15;d<0;d++){var g,y,C;g=p[R+-10],y=h[T+-224]*g,C=h[$+224]*g,g=p[R+-9],y+=h[T+-160]*g,C+=h[$+160]*g,g=p[R+-8],y+=h[T+-96]*g,C+=h[$+96]*g,g=p[R+-7],y+=h[T+-32]*g,C+=h[$+32]*g,g=p[R+-6],y+=h[T+32]*g,C+=h[$+-32]*g,g=p[R+-5],y+=h[T+96]*g,C+=h[$+-96]*g,g=p[R+-4],y+=h[T+160]*g,C+=h[$+-160]*g,g=p[R+-3],y+=h[T+224]*g,C+=h[$+-224]*g,g=p[R+-2],y+=h[$+-256]*g,C-=h[T+256]*g,g=p[R+-1],y+=h[$+-192]*g,C-=h[T+192]*g,g=p[R+0],y+=h[$+-128]*g,C-=h[T+128]*g,g=p[R+1],y+=h[$+-64]*g,C-=h[T+64]*g,g=p[R+2],y+=h[$+0]*g,C-=h[T+0]*g,g=p[R+3],y+=h[$+64]*g,C-=h[T+-64]*g,g=p[R+4],y+=h[$+128]*g,C-=h[T+-128]*g,g=p[R+5],y+=h[$+192]*g,C-=h[T+-192]*g,y*=p[R+6],g=C-y,i[30+d*2]=C+y,i[31+d*2]=p[R+7]*g,R+=18,$--,T++}{var y,C,v,w;C=h[$+-16]*p[R+-10],y=h[$+-32]*p[R+-2],C+=(h[$+-48]-h[$+16])*p[R+-9],y+=h[$+-96]*p[R+-1],C+=(h[$+-80]+h[$+48])*p[R+-8],y+=h[$+-160]*p[R+0],C+=(h[$+-112]-h[$+80])*p[R+-7],y+=h[$+-224]*p[R+1],C+=(h[$+-144]+h[$+112])*p[R+-6],y-=h[$+32]*p[R+2],C+=(h[$+-176]-h[$+144])*p[R+-5],y-=h[$+96]*p[R+3],C+=(h[$+-208]+h[$+176])*p[R+-4],y-=h[$+160]*p[R+4],C+=(h[$+-240]-h[$+208])*p[R+-3],y-=h[$+224],v=y-C,w=y+C,C=i[14],y=i[15]-C,i[31]=w+C,i[30]=v+y,i[15]=v-y,i[14]=w-C}{var t;t=i[28]-i[0],i[0]+=i[28],i[28]=t*p[R+-36+7],t=i[29]-i[1],i[1]+=i[29],i[29]=t*p[R+-36+7],t=i[26]-i[2],i[2]+=i[26],i[26]=t*p[R+-72+7],t=i[27]-i[3],i[3]+=i[27],i[27]=t*p[R+-72+7],t=i[24]-i[4],i[4]+=i[24],i[24]=t*p[R+-108+7],t=i[25]-i[5],i[5]+=i[25],i[25]=t*p[R+-108+7],t=i[22]-i[6],i[6]+=i[22],i[22]=t*ee.SQRT2,t=i[23]-i[7],i[7]+=i[23],i[23]=t*ee.SQRT2-i[7],i[7]-=i[6],i[22]-=i[7],i[23]-=i[22],t=i[6],i[6]=i[31]-t,i[31]=i[31]+t,t=i[7],i[7]=i[30]-t,i[30]=i[30]+t,t=i[22],i[22]=i[15]-t,i[15]=i[15]+t,t=i[23],i[23]=i[14]-t,i[14]=i[14]+t,t=i[20]-i[8],i[8]+=i[20],i[20]=t*p[R+-180+7],t=i[21]-i[9],i[9]+=i[21],i[21]=t*p[R+-180+7],t=i[18]-i[10],i[10]+=i[18],i[18]=t*p[R+-216+7],t=i[19]-i[11],i[11]+=i[19],i[19]=t*p[R+-216+7],t=i[16]-i[12],i[12]+=i[16],i[16]=t*p[R+-252+7],t=i[17]-i[13],i[13]+=i[17],i[17]=t*p[R+-252+7],t=-i[20]+i[24],i[20]+=i[24],i[24]=t*p[R+-216+7],t=-i[21]+i[25],i[21]+=i[25],i[25]=t*p[R+-216+7],t=i[4]-i[8],i[4]+=i[8],i[8]=t*p[R+-216+7],t=i[5]-i[9],i[5]+=i[9],i[9]=t*p[R+-216+7],t=i[0]-i[12],i[0]+=i[12],i[12]=t*p[R+-72+7],t=i[1]-i[13],i[1]+=i[13],i[13]=t*p[R+-72+7],t=i[16]-i[28],i[16]+=i[28],i[28]=t*p[R+-72+7],t=-i[17]+i[29],i[17]+=i[29],i[29]=t*p[R+-72+7],t=ee.SQRT2*(i[2]-i[10]),i[2]+=i[10],i[10]=t,t=ee.SQRT2*(i[3]-i[11]),i[3]+=i[11],i[11]=t,t=ee.SQRT2*(-i[18]+i[26]),i[18]+=i[26],i[26]=t-i[18],t=ee.SQRT2*(-i[19]+i[27]),i[19]+=i[27],i[27]=t-i[19],t=i[2],i[19]-=i[3],i[3]-=t,i[2]=i[31]-t,i[31]+=t,t=i[3],i[11]-=i[19],i[18]-=t,i[3]=i[30]-t,i[30]+=t,t=i[18],i[27]-=i[11],i[19]-=t,i[18]=i[15]-t,i[15]+=t,t=i[19],i[10]-=t,i[19]=i[14]-t,i[14]+=t,t=i[10],i[11]-=t,i[10]=i[23]-t,i[23]+=t,t=i[11],i[26]-=t,i[11]=i[22]-t,i[22]+=t,t=i[26],i[27]-=t,i[26]=i[7]-t,i[7]+=t,t=i[27],i[27]=i[6]-t,i[6]+=t,t=ee.SQRT2*(i[0]-i[4]),i[0]+=i[4],i[4]=t,t=ee.SQRT2*(i[1]-i[5]),i[1]+=i[5],i[5]=t,t=ee.SQRT2*(i[16]-i[20]),i[16]+=i[20],i[20]=t,t=ee.SQRT2*(i[17]-i[21]),i[17]+=i[21],i[21]=t,t=-ee.SQRT2*(i[8]-i[12]),i[8]+=i[12],i[12]=t-i[8],t=-ee.SQRT2*(i[9]-i[13]),i[9]+=i[13],i[13]=t-i[9],t=-ee.SQRT2*(i[25]-i[29]),i[25]+=i[29],i[29]=t-i[25],t=-ee.SQRT2*(i[24]+i[28]),i[24]-=i[28],i[28]=t-i[24],t=i[24]-i[16],i[24]=t,t=i[20]-t,i[20]=t,t=i[28]-t,i[28]=t,t=i[25]-i[17],i[25]=t,t=i[21]-t,i[21]=t,t=i[29]-t,i[29]=t,t=i[17]-i[1],i[17]=t,t=i[9]-t,i[9]=t,t=i[25]-t,i[25]=t,t=i[5]-t,i[5]=t,t=i[21]-t,i[21]=t,t=i[13]-t,i[13]=t,t=i[29]-t,i[29]=t,t=i[1]-i[0],i[1]=t,t=i[16]-t,i[16]=t,t=i[17]-t,i[17]=t,t=i[8]-t,i[8]=t,t=i[9]-t,i[9]=t,t=i[24]-t,i[24]=t,t=i[25]-t,i[25]=t,t=i[4]-t,i[4]=t,t=i[5]-t,i[5]=t,t=i[20]-t,i[20]=t,t=i[21]-t,i[21]=t,t=i[12]-t,i[12]=t,t=i[13]-t,i[13]=t,t=i[28]-t,i[28]=t,t=i[29]-t,i[29]=t,t=i[0],i[0]+=i[31],i[31]-=t,t=i[1],i[1]+=i[30],i[30]-=t,t=i[16],i[16]+=i[15],i[15]-=t,t=i[17],i[17]+=i[14],i[14]-=t,t=i[8],i[8]+=i[23],i[23]-=t,t=i[9],i[9]+=i[22],i[22]-=t,t=i[24],i[24]+=i[7],i[7]-=t,t=i[25],i[25]+=i[6],i[6]-=t,t=i[4],i[4]+=i[27],i[27]-=t,t=i[5],i[5]+=i[26],i[26]-=t,t=i[20],i[20]+=i[11],i[11]-=t,t=i[21],i[21]+=i[10],i[10]-=t,t=i[12],i[12]+=i[19],i[19]-=t,t=i[13],i[13]+=i[18],i[18]-=t,t=i[28],i[28]+=i[3],i[3]-=t,t=i[29],i[29]+=i[2],i[2]-=t}}function O(h,$){for(var i=0;i<3;i++){var R,T,d,g,y,C;g=h[$+6]*P[s.SHORT_TYPE][0]-h[$+15],R=h[$+0]*P[s.SHORT_TYPE][2]-h[$+9],T=g+R,d=g-R,g=h[$+15]*P[s.SHORT_TYPE][0]+h[$+6],R=h[$+9]*P[s.SHORT_TYPE][2]+h[$+0],y=g+R,C=-g+R,R=(h[$+3]*P[s.SHORT_TYPE][1]-h[$+12])*2069978111953089e-26,g=(h[$+12]*P[s.SHORT_TYPE][1]+h[$+3])*2069978111953089e-26,h[$+0]=T*190752519173728e-25+R,h[$+15]=-y*190752519173728e-25+g,d=d*.8660254037844387*1907525191737281e-26,y=y*.5*1907525191737281e-26+g,h[$+3]=d-y,h[$+6]=d+y,T=T*.5*1907525191737281e-26-R,C=C*.8660254037844387*1907525191737281e-26,h[$+9]=T+C,h[$+12]=T-C,$++}}function G(h,$,i){var R,T;{var d,g,y,C,v,w,t,B;d=i[17]-i[9],y=i[15]-i[11],C=i[14]-i[12],v=i[0]+i[8],w=i[1]+i[7],t=i[2]+i[6],B=i[3]+i[5],h[$+17]=v+t-B-(w-i[4]),T=(v+t-B)*S[19]+(w-i[4]),R=(d-y-C)*S[18],h[$+5]=R+T,h[$+6]=R-T,g=(i[16]-i[10])*S[18],w=w*S[19]+i[4],R=d*S[12]+g+y*S[13]+C*S[14],T=-v*S[16]+w-t*S[17]+B*S[15],h[$+1]=R+T,h[$+2]=R-T,R=d*S[13]-g-y*S[14]+C*S[12],T=-v*S[17]+w-t*S[15]+B*S[16],h[$+9]=R+T,h[$+10]=R-T,R=d*S[14]-g+y*S[12]-C*S[13],T=v*S[15]-w+t*S[16]-B*S[17],h[$+13]=R+T,h[$+14]=R-T}{var x,q,m,_,b,k,N,r;x=i[8]-i[0],m=i[6]-i[2],_=i[5]-i[3],b=i[17]+i[9],k=i[16]+i[10],N=i[15]+i[11],r=i[14]+i[12],h[$+0]=b+N+r+(k+i[13]),R=(b+N+r)*S[19]-(k+i[13]),T=(x-m+_)*S[18],h[$+11]=R+T,h[$+12]=R-T,q=(i[7]-i[1])*S[18],k=i[13]-k*S[19],R=b*S[15]-k+N*S[16]+r*S[17],T=x*S[14]+q+m*S[12]+_*S[13],h[$+3]=R+T,h[$+4]=R-T,R=-b*S[17]+k-N*S[15]-r*S[16],T=x*S[13]+q-m*S[14]-_*S[12],h[$+7]=R+T,h[$+8]=R-T,R=-b*S[16]+k-N*S[17]-r*S[15],T=x*S[12]-q+m*S[13]-_*S[14],h[$+15]=R+T,h[$+16]=R-T}}this.mdct_sub48=function(h,$,i){for(var R=$,T=286,d=0;d<h.channels_out;d++){for(var g=0;g<h.mode_gr;g++){for(var y,C=h.l3_side.tt[g][d],v=C.xr,w=0,t=h.sb_sample[d][1-g],B=0,x=0;x<18/2;x++)for(le(R,T,t[B]),le(R,T+32,t[B+1]),B+=2,T+=64,y=1;y<32;y+=2)t[B-1][y]*=-1;for(y=0;y<32;y++,w+=18){var q=C.block_type,m=h.sb_sample[d][g],_=h.sb_sample[d][1-g];if(C.mixed_block_flag!=0&&y<2&&(q=0),h.amp_filter[y]<1e-12)_e.fill(v,w+0,w+18,0);else if(h.amp_filter[y]<1&&a(),q==s.SHORT_TYPE){for(var x=-12/4;x<0;x++){var b=P[s.SHORT_TYPE][x+3];v[w+x*3+9]=m[9+x][D[y]]*b-m[8-x][D[y]],v[w+x*3+18]=m[14-x][D[y]]*b+m[15+x][D[y]],v[w+x*3+10]=m[15+x][D[y]]*b-m[14-x][D[y]],v[w+x*3+19]=_[2-x][D[y]]*b+_[3+x][D[y]],v[w+x*3+11]=_[3+x][D[y]]*b-_[2-x][D[y]],v[w+x*3+20]=_[8-x][D[y]]*b+_[9+x][D[y]]}O(v,w)}else{for(var k=M(18),x=-36/4;x<0;x++){var N,r;N=P[q][x+27]*_[x+9][D[y]]+P[q][x+36]*_[8-x][D[y]],r=P[q][x+9]*m[x+9][D[y]]-P[q][x+18]*m[8-x][D[y]],k[x+9]=N-r*U[3+x+9],k[x+18]=N*U[3+x+9]+r}G(v,w,k)}if(q!=s.SHORT_TYPE&&y!=0)for(var x=7;x>=0;--x){var l,Z;l=v[w+x]*ae[20+x]+v[w+-1-x]*L[28+x],Z=v[w+x]*L[28+x]-v[w+-1-x]*ae[20+x],v[w+-1-x]=l,v[w+x]=Z}}}if(R=i,T=286,h.mode_gr==1)for(var H=0;H<18;H++)z.arraycopy(h.sb_sample[d][1][H],0,h.sb_sample[d][0][H],0,32)}}}function I(){this.thm=new fe,this.en=new fe}s.ENCDELAY=576,s.POSTDELAY=1152,s.MDCTDELAY=48,s.FFTOFFSET=224+s.MDCTDELAY,s.DECDELAY=528,s.SBLIMIT=32,s.CBANDS=64,s.SBPSY_l=21,s.SBPSY_s=12,s.SBMAX_l=22,s.SBMAX_s=13,s.PSFB21=6,s.PSFB12=6,s.BLKSIZE=1024,s.HBLKSIZE=s.BLKSIZE/2+1,s.BLKSIZE_s=256,s.HBLKSIZE_s=s.BLKSIZE_s/2+1,s.NORM_TYPE=0,s.START_TYPE=1,s.SHORT_TYPE=2,s.STOP_TYPE=3,s.MPG_MD_LR_LR=0,s.MPG_MD_LR_I=1,s.MPG_MD_MS_LR=2,s.MPG_MD_MS_I=3,s.fircoef=[-.0207887*5,-.0378413*5,-.0432472*5,-.031183*5,779609e-23*5,.0467745*5,.10091*5,.151365*5,.187098*5];function s(){var p=s.MPG_MD_MS_LR,P=null;this.psy=null;var U=null,S=null;this.setModules=function(O,G,h,$){P=O,this.psy=G,U=G,S=$};var ae=new E;function L(O){var G,h;if(O.ATH.useAdjust==0){O.ATH.adjust=1;return}if(h=O.loudness_sq[0][0],G=O.loudness_sq[1][0],O.channels_out==2?a():(h+=h,G+=G),O.mode_gr==2&&(h=Math.max(h,G)),h*=.5,h*=O.ATH.aaSensitivityP,h>.03125)O.ATH.adjust>=1?O.ATH.adjust=1:O.ATH.adjust<O.ATH.adjustLimit&&(O.ATH.adjust=O.ATH.adjustLimit),O.ATH.adjustLimit=1;else{var $=31.98*h+625e-6;O.ATH.adjust>=$?(O.ATH.adjust*=$*.075+.925,O.ATH.adjust<$&&(O.ATH.adjust=$)):O.ATH.adjustLimit>=$?O.ATH.adjust=$:O.ATH.adjust<O.ATH.adjustLimit&&(O.ATH.adjust=O.ATH.adjustLimit),O.ATH.adjustLimit=$}}function D(O){var G,h;for(O.bitrate_stereoMode_Hist[O.bitrate_index][4]++,O.bitrate_stereoMode_Hist[15][4]++,O.channels_out==2&&a(),G=0;G<O.mode_gr;++G)for(h=0;h<O.channels_out;++h){var $=O.l3_side.tt[G][h].block_type|0;O.l3_side.tt[G][h].mixed_block_flag!=0&&($=4),O.bitrate_blockType_Hist[O.bitrate_index][$]++,O.bitrate_blockType_Hist[O.bitrate_index][5]++,O.bitrate_blockType_Hist[15][$]++,O.bitrate_blockType_Hist[15][5]++}}function le(O,G){var h=O.internal_flags,$,i;if(h.lame_encode_frame_init==0){var R,T,d=M(2014),g=M(2014);for(h.lame_encode_frame_init=1,R=0,T=0;R<286+576*(1+h.mode_gr);++R)R<576*h.mode_gr?(d[R]=0,h.channels_out==2&&(g[R]=0)):(d[R]=G[0][T],h.channels_out==2&&(g[R]=G[1][T]),++T);for(i=0;i<h.mode_gr;i++)for($=0;$<h.channels_out;$++)h.l3_side.tt[i][$].block_type=s.SHORT_TYPE;ae.mdct_sub48(h,d,g)}}this.lame_encode_mp3_frame=function(O,G,h,$,i,R){var T,d=J([2,2]);d[0][0]=new I,d[0][1]=new I,d[1][0]=new I,d[1][1]=new I;var g=J([2,2]);g[0][0]=new I,g[0][1]=new I,g[1][0]=new I,g[1][1]=new I;var y,C=[null,null],v=O.internal_flags,w=V([2,4]),t=[.5,.5],B=[[0,0],[0,0]],x=[[0,0],[0,0]],q,m,_;if(C[0]=G,C[1]=h,v.lame_encode_frame_init==0&&le(O,C),v.padding=0,(v.slot_lag-=v.frac_SpF)<0&&(v.slot_lag+=O.out_samplerate,v.padding=1),v.psymodel!=0){var b,k=[null,null],N=0,r=f(2);for(_=0;_<v.mode_gr;_++){for(m=0;m<v.channels_out;m++)k[m]=C[m],N=576+_*576-s.FFTOFFSET;if(O.VBR==te.vbr_mtrh||O.VBR==te.vbr_mt?a():b=U.L3psycho_anal_ns(O,k,N,_,d,g,B[_],x[_],w[_],r),b!=0)return-4;for(O.mode==Ce.JOINT_STEREO&&a(),m=0;m<v.channels_out;m++){var l=v.l3_side.tt[_][m];l.block_type=r[m],l.mixed_block_flag=0}}}else a();if(L(v),ae.mdct_sub48(v,C[0],C[1]),v.mode_ext=s.MPG_MD_LR_LR,O.force_ms?v.mode_ext=s.MPG_MD_MS_LR:O.mode==Ce.JOINT_STEREO&&a(),v.mode_ext==p?(y=g,q=x):(y=d,q=B),O.analysis&&v.pinfo!=null&&a(),O.VBR==te.vbr_off||O.VBR==te.vbr_abr){var Z,H;for(Z=0;Z<18;Z++)v.nsPsy.pefirbuf[Z]=v.nsPsy.pefirbuf[Z+1];for(H=0,_=0;_<v.mode_gr;_++)for(m=0;m<v.channels_out;m++)H+=q[_][m];for(v.nsPsy.pefirbuf[18]=H,H=v.nsPsy.pefirbuf[9],Z=0;Z<9;Z++)H+=(v.nsPsy.pefirbuf[Z]+v.nsPsy.pefirbuf[18-Z])*s.fircoef[Z];for(H=670*5*v.mode_gr*v.channels_out/H,_=0;_<v.mode_gr;_++)for(m=0;m<v.channels_out;m++)q[_][m]*=H}return v.iteration_loop.iteration_loop(O,q,t,y),P.format_bitstream(O),T=P.copy_buffer(v,$,i,R,1),O.bWriteVbrTag&&S.addVbrFrame(O),O.analysis&&v.pinfo!=null&&a(),D(v),T}}function X(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}function ne(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[f(4),f(4)];for(var p=0;p<2;p++)for(var P=0;P<2;P++)this.tt[p][P]=new vt}function fe(){this.l=M(s.SBMAX_l),this.s=V([s.SBMAX_s,3]);var p=this;this.assign=function(P){z.arraycopy(P.l,0,p.l,0,s.SBMAX_l);for(var U=0;U<s.SBMAX_s;U++)for(var S=0;S<3;S++)p.s[U][S]=P.s[U][S]}}function ue(){this.last_en_subshort=V([4,9]),this.lastAttacks=f(4),this.pefirbuf=M(19),this.longfact=M(s.SBMAX_l),this.shortfact=M(s.SBMAX_s),this.attackthre=0,this.attackthre_s=0}ke.MFSIZE=3*1152+s.ENCDELAY-s.MDCTDELAY,ke.MAX_HEADER_BUF=256,ke.MAX_BITS_PER_CHANNEL=4095,ke.MAX_BITS_PER_GRANULE=7680,ke.BPC=320;function ke(){var p=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=V([2,ke.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new ne,this.ms_ratio=M(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=f(2),this.CurrentStep=f(2),this.masking_lower=0,this.bv_scf=f(576),this.pseudohalf=f(pe.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*ke.BPC+1),this.itime=j(2),this.sideinfo_len=0,this.sb_sample=V([2,2,18,s.SBLIMIT]),this.amp_filter=M(32);function P(){this.write_timing=0,this.ptr=0,this.buf=c(p)}this.header=new Array(ke.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new rt,this.minval_l=M(s.CBANDS),this.minval_s=M(s.CBANDS),this.nb_1=V([4,s.CBANDS]),this.nb_2=V([4,s.CBANDS]),this.nb_s1=V([4,s.CBANDS]),this.nb_s2=V([4,s.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=M(4),this.loudness_sq=V([2,2]),this.loudness_sq_save=M(2),this.mld_l=M(s.SBMAX_l),this.mld_s=M(s.SBMAX_s),this.bm_l=f(s.SBMAX_l),this.bo_l=f(s.SBMAX_l),this.bm_s=f(s.SBMAX_s),this.bo_s=f(s.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=A([s.CBANDS,2]),this.s3ind_s=A([s.CBANDS,2]),this.numlines_s=f(s.CBANDS),this.numlines_l=f(s.CBANDS),this.rnumlines_l=M(s.CBANDS),this.mld_cb_l=M(s.CBANDS),this.mld_cb_s=M(s.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=M(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=f(2),this.nsPsy=new ue,this.VBR_seek_table=new X,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=A([16,5]),this.bitrate_blockType_Hist=A([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var U=0;U<this.en.length;U++)this.en[U]=new fe;for(var U=0;U<this.thm.length;U++)this.thm[U]=new fe;for(var U=0;U<this.header.length;U++)this.header[U]=new P}function Me(){var p=M(s.BLKSIZE),P=M(s.BLKSIZE_s/2),U=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475];function S(L,D,le){var O=0,G,h,$;le<<=1;var i=D+le;G=4;do{var R,T,d,g,y,C,v;v=G>>1,g=G,y=G<<1,C=y+g,G=y<<1,h=D,$=h+v;do{var w,t,B,x;t=L[h+0]-L[h+g],w=L[h+0]+L[h+g],x=L[h+y]-L[h+C],B=L[h+y]+L[h+C],L[h+y]=w-B,L[h+0]=w+B,L[h+C]=t-x,L[h+g]=t+x,t=L[$+0]-L[$+g],w=L[$+0]+L[$+g],x=ee.SQRT2*L[$+C],B=ee.SQRT2*L[$+y],L[$+y]=w-B,L[$+0]=w+B,L[$+C]=t-x,L[$+g]=t+x,$+=G,h+=G}while(h<i);for(T=U[O+0],R=U[O+1],d=1;d<v;d++){var q,m;q=1-2*R*R,m=2*R*T,h=D+d,$=D+g-d;do{var _,b,k,w,t,N,B,r,x,l;b=m*L[h+g]-q*L[$+g],_=q*L[h+g]+m*L[$+g],t=L[h+0]-_,w=L[h+0]+_,N=L[$+0]-b,k=L[$+0]+b,b=m*L[h+C]-q*L[$+C],_=q*L[h+C]+m*L[$+C],x=L[h+y]-_,B=L[h+y]+_,l=L[$+y]-b,r=L[$+y]+b,b=R*B-T*l,_=T*B+R*l,L[h+y]=w-_,L[h+0]=w+_,L[$+C]=N-b,L[$+g]=N+b,b=T*r-R*x,_=R*r+T*x,L[$+y]=k-_,L[$+0]=k+_,L[h+C]=t-b,L[h+g]=t+b,$+=G,h+=G}while(h<i);q=T,T=q*U[O+0]-R*U[O+1],R=q*U[O+1]+R*U[O+0]}O+=2}while(G<le)}var ae=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(L,D,le,O,G){for(var h=0;h<3;h++){var $=s.BLKSIZE_s/2,i=65535&576/3*(h+1),R=s.BLKSIZE_s/8-1;do{var T,d,g,y,C,v=ae[R<<2]&255;T=P[v]*O[le][G+v+i],C=P[127-v]*O[le][G+v+i+128],d=T-C,T=T+C,g=P[v+64]*O[le][G+v+i+64],C=P[63-v]*O[le][G+v+i+192],y=g-C,g=g+C,$-=4,D[h][$+0]=T+g,D[h][$+2]=T-g,D[h][$+1]=d+y,D[h][$+3]=d-y,T=P[v+1]*O[le][G+v+i+1],C=P[126-v]*O[le][G+v+i+129],d=T-C,T=T+C,g=P[v+65]*O[le][G+v+i+65],C=P[62-v]*O[le][G+v+i+193],y=g-C,g=g+C,D[h][$+s.BLKSIZE_s/2+0]=T+g,D[h][$+s.BLKSIZE_s/2+2]=T-g,D[h][$+s.BLKSIZE_s/2+1]=d+y,D[h][$+s.BLKSIZE_s/2+3]=d-y}while(--R>=0);S(D[h],$,s.BLKSIZE_s/2)}},this.fft_long=function(L,D,le,O,G){var h=s.BLKSIZE/8-1,$=s.BLKSIZE/2;do{var i,R,T,d,g,y=ae[h]&255;i=p[y]*O[le][G+y],g=p[y+512]*O[le][G+y+512],R=i-g,i=i+g,T=p[y+256]*O[le][G+y+256],g=p[y+768]*O[le][G+y+768],d=T-g,T=T+g,$-=4,D[$+0]=i+T,D[$+2]=i-T,D[$+1]=R+d,D[$+3]=R-d,i=p[y+1]*O[le][G+y+1],g=p[y+513]*O[le][G+y+513],R=i-g,i=i+g,T=p[y+257]*O[le][G+y+257],g=p[y+769]*O[le][G+y+769],d=T-g,T=T+g,D[$+s.BLKSIZE/2+0]=i+T,D[$+s.BLKSIZE/2+2]=i-T,D[$+s.BLKSIZE/2+1]=R+d,D[$+s.BLKSIZE/2+3]=R-d}while(--h>=0);S(D,$,s.BLKSIZE/2)},this.init_fft=function(L){for(var D=0;D<s.BLKSIZE;D++)p[D]=.42-.5*Math.cos(2*Math.PI*(D+.5)/s.BLKSIZE)+.08*Math.cos(4*Math.PI*(D+.5)/s.BLKSIZE);for(var D=0;D<s.BLKSIZE_s/2;D++)P[D]=.5*(1-Math.cos(2*Math.PI*(D+.5)/s.BLKSIZE_s))}}function Te(){var p=new Me,P=2.302585092994046,U=2,S=16,ae=2,L=16,D=.34,le=1/(14752*14752)/(s.BLKSIZE/2),O=.01,G=.8,h=.6,$=.3,i=3.5,R=21,T=.2302585093;function d(Q,F){for(var Y=0,we=0;we<s.BLKSIZE/2;++we)Y+=Q[we]*F.ATH.eql_w[we];return Y*=le,Y}function g(Q,F,Y,we,be,ie,ve,me,xe,Pe,ye){var st=Q.internal_flags;xe<2?(p.fft_long(st,we[be],xe,Pe,ye),p.fft_short(st,ie[ve],xe,Pe,ye)):xe==2&&a(),F[0]=we[be+0][0],F[0]*=F[0];for(var Ge=s.BLKSIZE/2-1;Ge>=0;--Ge){var nt=we[be+0][s.BLKSIZE/2-Ge],ct=we[be+0][s.BLKSIZE/2+Ge];F[s.BLKSIZE/2-Ge]=(nt*nt+ct*ct)*.5}for(var Ze=2;Ze>=0;--Ze){Y[Ze][0]=ie[ve+0][Ze][0],Y[Ze][0]*=Y[Ze][0];for(var Ge=s.BLKSIZE_s/2-1;Ge>=0;--Ge){var nt=ie[ve+0][Ze][s.BLKSIZE_s/2-Ge],ct=ie[ve+0][Ze][s.BLKSIZE_s/2+Ge];Y[Ze][s.BLKSIZE_s/2-Ge]=(nt*nt+ct*ct)*.5}}{for(var Oe=0,Ge=11;Ge<s.HBLKSIZE;Ge++)Oe+=F[Ge];st.tot_ener[xe]=Oe}Q.analysis&&a(),Q.athaa_loudapprox==2&&xe<2&&(st.loudness_sq[me][xe]=st.loudness_sq_save[xe],st.loudness_sq_save[xe]=d(F,st))}var y=8,C=23,v=15,w,t,B,x=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749];function q(){w=Math.pow(10,(y+1)/16),t=Math.pow(10,(C+1)/16),B=Math.pow(10,v/10)}var m=[3.3246*3.3246,3.23837*3.23837,3.15437*3.15437,3.00412*3.00412,2.86103*2.86103,2.65407*2.65407,2.46209*2.46209,2.284*2.284,2.11879*2.11879,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,1.56911*1.56911,1.46658*1.46658,1.37074*1.37074,1.31036*1.31036,1.25264*1.25264,1.20648*1.20648,1.16203*1.16203,1.12765*1.12765,1.09428*1.09428,1.0659*1.0659,1.03826*1.03826,1.01895*1.01895,1],_=[1.33352*1.33352,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.30382*1.30382,1.22321*1.22321,1.14758*1.14758,1],b=[2.35364*2.35364,2.29259*2.29259,2.23313*2.23313,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,1.49999*1.49999,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.11084*1.11084,1.03826*1.03826];function k(Q,F,Y,we,be,ie){var ve;if(F>Q)if(F<Q*t)ve=F/Q;else return Q+F;else{if(Q>=F*t)return Q+F;ve=Q/F}if(Q+=F,we+3<=6){if(ve>=w)return Q;var me=0|ee.FAST_LOG10_X(ve,16);return Q*_[me]}var me=0|ee.FAST_LOG10_X(ve,16);if(F=be.ATH.cb_l[Y]*be.ATH.adjust,Q<B*F){if(Q>F){var xe,Pe;return xe=1,me<=13&&(xe=b[me]),Pe=ee.FAST_LOG10_X(Q/F,10/15),Q*((m[me]-xe)*Pe+xe)}return me>13?Q:Q*b[me]}return Q*m[me]}function N(Q,F,Y,we,be){var ie,ve,me=0,xe=0;for(ie=ve=0;ie<s.SBMAX_s;++ve,++ie){for(var Pe=Q.bo_s[ie],ye=Q.npart_s,st=Pe<ye?Pe:ye;ve<st;)me+=F[ve],xe+=Y[ve],ve++;if(Q.en[we].s[ie][be]=me,Q.thm[we].s[ie][be]=xe,ve>=ye){++ie;break}{var Ge=Q.PSY.bo_s_weight[ie],nt=1-Ge;me=Ge*F[ve],xe=Ge*Y[ve],Q.en[we].s[ie][be]+=me,Q.thm[we].s[ie][be]+=xe,me=nt*F[ve],xe=nt*Y[ve]}}for(;ie<s.SBMAX_s;++ie)Q.en[we].s[ie][be]=0,Q.thm[we].s[ie][be]=0}function r(Q,F,Y,we){var be,ie,ve=0,me=0;for(be=ie=0;be<s.SBMAX_l;++ie,++be){for(var xe=Q.bo_l[be],Pe=Q.npart_l,ye=xe<Pe?xe:Pe;ie<ye;)ve+=F[ie],me+=Y[ie],ie++;if(Q.en[we].l[be]=ve,Q.thm[we].l[be]=me,ie>=Pe){++be;break}{var st=Q.PSY.bo_l_weight[be],Ge=1-st;ve=st*F[ie],me=st*Y[ie],Q.en[we].l[be]+=ve,Q.thm[we].l[be]+=me,ve=Ge*F[ie],me=Ge*Y[ie]}}for(;be<s.SBMAX_l;++be)Q.en[we].l[be]=0,Q.thm[we].l[be]=0}function l(Q,F,Y,we,be,ie){var ve=Q.internal_flags,me,xe;for(xe=me=0;xe<ve.npart_s;++xe){for(var Pe=0,ye=ve.numlines_s[xe],st=0;st<ye;++st,++me){var Ge=F[ie][me];Pe+=Ge}Y[xe]=Pe}for(me=xe=0;xe<ve.npart_s;xe++){var nt=ve.s3ind_s[xe][0],ct=ve.s3_ss[me++]*Y[nt];for(++nt;nt<=ve.s3ind_s[xe][1];)ct+=ve.s3_ss[me]*Y[nt],++me,++nt;{var Ze=ae*ve.nb_s1[be][xe];we[xe]=Math.min(ct,Ze)}if(ve.blocktype_old[be&1]==s.SHORT_TYPE){var Ze=L*ve.nb_s2[be][xe],Oe=we[xe];we[xe]=Math.min(Ze,Oe)}ve.nb_s2[be][xe]=ve.nb_s1[be][xe],ve.nb_s1[be][xe]=ct}for(;xe<=s.CBANDS;++xe)Y[xe]=0,we[xe]=0}function Z(Q,F,Y,we){var be=Q.internal_flags;Q.short_blocks==re.short_block_coupled&&!(F[0]!=0&&F[1]!=0)&&(F[0]=F[1]=0);for(var ie=0;ie<be.channels_out;ie++)we[ie]=s.NORM_TYPE,Q.short_blocks==re.short_block_dispensed&&(F[ie]=1),Q.short_blocks==re.short_block_forced&&(F[ie]=0),F[ie]!=0?be.blocktype_old[ie]==s.SHORT_TYPE&&(we[ie]=s.STOP_TYPE):(we[ie]=s.SHORT_TYPE,be.blocktype_old[ie]==s.NORM_TYPE&&(be.blocktype_old[ie]=s.START_TYPE),be.blocktype_old[ie]==s.STOP_TYPE&&(be.blocktype_old[ie]=s.SHORT_TYPE)),Y[ie]=be.blocktype_old[ie],be.blocktype_old[ie]=we[ie]}function H(Q,F,Y){return Y>=1?Q:Y<=0?F:F>0?Math.pow(Q/F,Y)*F:0}var K=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130];function se(Q,F){for(var Y=309.07,we=0;we<s.SBMAX_s-1;we++)for(var be=0;be<3;be++){var ie=Q.thm.s[we][be];if(ie>0){var ve=ie*F,me=Q.en.s[we][be];me>ve&&(me>ve*1e10?Y+=K[we]*(10*P):Y+=K[we]*ee.FAST_LOG10(me/ve))}}return Y}var ce=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1];function he(Q,F){for(var Y=281.0575,we=0;we<s.SBMAX_l-1;we++){var be=Q.thm.l[we];if(be>0){var ie=be*F,ve=Q.en.l[we];ve>ie&&(ve>ie*1e10?Y+=ce[we]*(10*P):Y+=ce[we]*ee.FAST_LOG10(ve/ie))}}return Y}function Re(Q,F,Y,we,be){var ie,ve;for(ie=ve=0;ie<Q.npart_l;++ie){var me=0,xe=0,Pe;for(Pe=0;Pe<Q.numlines_l[ie];++Pe,++ve){var ye=F[ve];me+=ye,xe<ye&&(xe=ye)}Y[ie]=me,we[ie]=xe,be[ie]=me*Q.rnumlines_l[ie]}}function He(Q,F,Y,we){var be=x.length-1,ie=0,ve=Y[ie]+Y[ie+1];if(ve>0){var me=F[ie];me<F[ie+1]&&(me=F[ie+1]),ve=20*(me*2-ve)/(ve*(Q.numlines_l[ie]+Q.numlines_l[ie+1]-1));var xe=0|ve;xe>be&&(xe=be),we[ie]=xe}else we[ie]=0;for(ie=1;ie<Q.npart_l-1;ie++)if(ve=Y[ie-1]+Y[ie]+Y[ie+1],ve>0){var me=F[ie-1];me<F[ie]&&(me=F[ie]),me<F[ie+1]&&(me=F[ie+1]),ve=20*(me*3-ve)/(ve*(Q.numlines_l[ie-1]+Q.numlines_l[ie]+Q.numlines_l[ie+1]-1));var xe=0|ve;xe>be&&(xe=be),we[ie]=xe}else we[ie]=0;if(ve=Y[ie-1]+Y[ie],ve>0){var me=F[ie-1];me<F[ie]&&(me=F[ie]),ve=20*(me*2-ve)/(ve*(Q.numlines_l[ie-1]+Q.numlines_l[ie]-1));var xe=0|ve;xe>be&&(xe=be),we[ie]=xe}else we[ie]=0}var $e=[-865163e-23*2,-.00851586*2,-674764e-23*2,.0209036*2,-336639e-22*2,-.0438162*2,-154175e-22*2,.0931738*2,-552212e-22*2,-.313819*2];this.L3psycho_anal_ns=function(Q,F,Y,we,be,ie,ve,me,xe,Pe){var ye=Q.internal_flags,st=V([2,s.BLKSIZE]),Ge=V([2,3,s.BLKSIZE_s]),nt=M(s.CBANDS+1),ct=M(s.CBANDS+1),Ze=M(s.CBANDS+2),Oe=f(2),et=f(2),pt,Ee,ze,Ie,ot,Dt,yt,Je,Jt=V([2,576]),kt,jt=f(s.CBANDS+2),Vt=f(s.CBANDS+2);for(_e.fill(Vt,0),pt=ye.channels_out,Q.mode==Ce.JOINT_STEREO&&(pt=4),Q.VBR==te.vbr_off?kt=ye.ResvMax==0?0:ye.ResvSize/ye.ResvMax*.5:Q.VBR==te.vbr_rh||Q.VBR==te.vbr_mtrh||Q.VBR==te.vbr_mt?kt=.6:kt=1,Ee=0;Ee<ye.channels_out;Ee++){var Wt=F[Ee],Yt=Y+576-350-R+192;for(Ie=0;Ie<576;Ie++){var v0,m0;for(v0=Wt[Yt+Ie+10],m0=0,ot=0;ot<(R-1)/2-1;ot+=2)v0+=$e[ot]*(Wt[Yt+Ie+ot]+Wt[Yt+Ie+R-ot]),m0+=$e[ot+1]*(Wt[Yt+Ie+ot+1]+Wt[Yt+Ie+R-ot-1]);Jt[Ee][Ie]=v0+m0}be[we][Ee].en.assign(ye.en[Ee]),be[we][Ee].thm.assign(ye.thm[Ee]),pt>2&&a()}for(Ee=0;Ee<pt;Ee++){var H0,O0,Mt=M(12),Ht=[0,0,0,0],b0=M(12),N0=1,j0,P0=M(s.CBANDS),F0=M(s.CBANDS),ht=[0,0,0,0],z0=M(s.HBLKSIZE),V0=V([3,s.HBLKSIZE_s]);for(Ie=0;Ie<3;Ie++)Mt[Ie]=ye.nsPsy.last_en_subshort[Ee][Ie+6],b0[Ie]=Mt[Ie]/ye.nsPsy.last_en_subshort[Ee][Ie+4],Ht[0]+=Mt[Ie];Ee==2&&a();{var q0=Jt[Ee&1],Gt=0;for(Ie=0;Ie<9;Ie++){for(var Vn=Gt+64,gt=1;Gt<Vn;Gt++)gt<Math.abs(q0[Gt])&&(gt=Math.abs(q0[Gt]));ye.nsPsy.last_en_subshort[Ee][Ie]=Mt[Ie+3]=gt,Ht[1+Ie/3]+=gt,gt>Mt[Ie+3-2]?gt=gt/Mt[Ie+3-2]:Mt[Ie+3-2]>gt*10?gt=Mt[Ie+3-2]/(gt*10):gt=0,b0[Ie+3]=gt}}for(Q.analysis&&a(),j0=Ee==3?ye.nsPsy.attackthre_s:ye.nsPsy.attackthre,Ie=0;Ie<12;Ie++)ht[Ie/3]==0&&b0[Ie]>j0&&(ht[Ie/3]=Ie%3+1);for(Ie=1;Ie<4;Ie++){var p0;Ht[Ie-1]>Ht[Ie]?p0=Ht[Ie-1]/Ht[Ie]:p0=Ht[Ie]/Ht[Ie-1],p0<1.7&&(ht[Ie]=0,Ie==1&&(ht[0]=0))}for(ht[0]!=0&&ye.nsPsy.lastAttacks[Ee]!=0&&(ht[0]=0),(ye.nsPsy.lastAttacks[Ee]==3||ht[0]+ht[1]+ht[2]+ht[3]!=0)&&(N0=0,ht[1]!=0&&ht[0]!=0&&(ht[1]=0),ht[2]!=0&&ht[1]!=0&&(ht[2]=0),ht[3]!=0&&ht[2]!=0&&(ht[3]=0)),Ee<2?et[Ee]=N0:a(),xe[Ee]=ye.tot_ener[Ee],O0=Ge,H0=st,g(Q,z0,V0,H0,Ee&1,O0,Ee&1,we,Ee,F,Y),Re(ye,z0,nt,P0,F0),He(ye,P0,F0,jt),Je=0;Je<3;Je++){var g0,Ct;for(l(Q,V0,ct,Ze,Ee,Je),N(ye,ct,Ze,Ee,Je),yt=0;yt<s.SBMAX_s;yt++){if(Ct=ye.thm[Ee].s[yt][Je],Ct*=G,ht[Je]>=2||ht[Je+1]==1){var Kt=Je!=0?Je-1:2,gt=H(ye.thm[Ee].s[yt][Kt],Ct,h*kt);Ct=Math.min(Ct,gt)}if(ht[Je]==1){var Kt=Je!=0?Je-1:2,gt=H(ye.thm[Ee].s[yt][Kt],Ct,$*kt);Ct=Math.min(Ct,gt)}else if(Je!=0&&ht[Je-1]==3||Je==0&&ye.nsPsy.lastAttacks[Ee]==3){var Kt=Je!=2?Je+1:0,gt=H(ye.thm[Ee].s[yt][Kt],Ct,$*kt);Ct=Math.min(Ct,gt)}g0=Mt[Je*3+3]+Mt[Je*3+4]+Mt[Je*3+5],Mt[Je*3+5]*6<g0&&(Ct*=.5,Mt[Je*3+4]*6<g0&&(Ct*=.5)),ye.thm[Ee].s[yt][Je]=Ct}}for(ye.nsPsy.lastAttacks[Ee]=ht[2],Dt=0,ze=0;ze<ye.npart_l;ze++){for(var Pt=ye.s3ind[ze][0],w0=nt[Pt]*x[jt[Pt]],Ft=ye.s3_ll[Dt++]*w0;++Pt<=ye.s3ind[ze][1];)w0=nt[Pt]*x[jt[Pt]],Ft=k(Ft,ye.s3_ll[Dt++]*w0,Pt,Pt-ze,ye);Ft*=.158489319246111,ye.blocktype_old[Ee&1]==s.SHORT_TYPE?Ze[ze]=Ft:Ze[ze]=H(Math.min(Ft,Math.min(U*ye.nb_1[Ee][ze],S*ye.nb_2[Ee][ze])),Ft,kt),ye.nb_2[Ee][ze]=ye.nb_1[Ee][ze],ye.nb_1[Ee][ze]=Ft}for(;ze<=s.CBANDS;++ze)nt[ze]=0,Ze[ze]=0;r(ye,nt,Ze,Ee)}for((Q.mode==Ce.STEREO||Q.mode==Ce.JOINT_STEREO)&&a(),Q.mode==Ce.JOINT_STEREO&&a(),Z(Q,et,Pe,Oe),Ee=0;Ee<pt;Ee++){var e0,t0=0,X0,x0;Ee>1?a():(e0=ve,t0=0,X0=Pe[Ee],x0=be[we][Ee]),X0==s.SHORT_TYPE?e0[t0+Ee]=se(x0,ye.masking_lower):e0[t0+Ee]=he(x0,ye.masking_lower),Q.analysis&&(ye.pinfo.pe[we][Ee]=e0[t0+Ee])}return 0};function ut(Q){var F,Y,we,be;return F=Q,F>=0?F*=3:F*=1.5,F>=.5&&F<=2.5?(be=F-.5,Y=8*(be*be-2*be)):Y=0,F+=.474,we=15.811389+7.5*F-17.5*Math.sqrt(1+F*F),we<=-60?0:(F=Math.exp((Y+we)*T),F/=.6609193,F)}function ft(Q){return Q<0&&(Q=0),Q=Q*.001,13*Math.atan(.76*Q)+3.5*Math.atan(Q*Q/(7.5*7.5))}function at(Q,F,Y,we,be,ie,ve,me,xe,Pe,ye,st){var Ge=M(s.CBANDS+1),nt=me/(st>15?2*576:384),ct=f(s.HBLKSIZE),Ze;me/=xe;var Oe=0,et=0;for(Ze=0;Ze<s.CBANDS;Ze++){var pt,Ee;for(pt=ft(me*Oe),Ge[Ze]=me*Oe,Ee=Oe;ft(me*Ee)-pt<D&&Ee<=xe/2;Ee++);for(Q[Ze]=Ee-Oe,et=Ze+1;Oe<Ee;)ct[Oe++]=Ze;if(Oe>xe/2){Oe=xe/2,++Ze;break}}Ge[Ze]=me*Oe;for(var ze=0;ze<st;ze++){var Ie,ot,Dt,yt,Je;Dt=Pe[ze],yt=Pe[ze+1],Ie=0|Math.floor(.5+ye*(Dt-.5)),Ie<0&&(Ie=0),ot=0|Math.floor(.5+ye*(yt-.5)),ot>xe/2&&(ot=xe/2),Y[ze]=(ct[Ie]+ct[ot])/2,F[ze]=ct[ot];var Jt=nt*yt;ve[ze]=(Jt-Ge[F[ze]])/(Ge[F[ze]+1]-Ge[F[ze]]),ve[ze]<0?ve[ze]=0:ve[ze]>1&&(ve[ze]=1),Je=ft(me*Pe[ze]*ye),Je=Math.min(Je,15.5)/15.5,ie[ze]=Math.pow(10,1.25*(1-Math.cos(Math.PI*Je))-2.5)}Oe=0;for(var kt=0;kt<et;kt++){var jt=Q[kt],pt,Vt;pt=ft(me*Oe),Vt=ft(me*(Oe+jt-1)),we[kt]=.5*(pt+Vt),pt=ft(me*(Oe-.5)),Vt=ft(me*(Oe+jt-.5)),be[kt]=Vt-pt,Oe+=jt}return et}function lt(Q,F,Y,we,be,ie){var ve=V([s.CBANDS,s.CBANDS]),me,xe=0;if(ie)for(var Pe=0;Pe<F;Pe++)for(me=0;me<F;me++){var ye=ut(Y[Pe]-Y[me])*we[me];ve[Pe][me]=ye*be[Pe]}else a();for(var Pe=0;Pe<F;Pe++){for(me=0;me<F&&!(ve[Pe][me]>0);me++);for(Q[Pe][0]=me,me=F-1;me>0&&!(ve[Pe][me]>0);me--);Q[Pe][1]=me,xe+=Q[Pe][1]-Q[Pe][0]+1}for(var st=M(xe),Ge=0,Pe=0;Pe<F;Pe++)for(me=Q[Pe][0];me<=Q[Pe][1];me++)st[Ge++]=ve[Pe][me];return st}function mt(Q){var F=ft(Q);return F=Math.min(F,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*F))-2.5)}this.psymodel_init=function(Q){var F=Q.internal_flags,Y,we=!0,be=13,ie=24,ve=0,me=0,xe=-8.25,Pe=-4.5,ye=M(s.CBANDS),st=M(s.CBANDS),Ge=M(s.CBANDS),nt=Q.out_samplerate;switch(Q.experimentalZ){default:case 0:we=!0;break;case 1:we=!(Q.VBR==te.vbr_mtrh||Q.VBR==te.vbr_mt);break;case 2:we=!1;break;case 3:be=8,ve=-1.75,me=-.0125,xe=-8.25,Pe=-2.25;break}for(F.ms_ener_ratio_old=.25,F.blocktype_old[0]=F.blocktype_old[1]=s.NORM_TYPE,Y=0;Y<4;++Y){for(var Oe=0;Oe<s.CBANDS;++Oe)F.nb_1[Y][Oe]=1e20,F.nb_2[Y][Oe]=1e20,F.nb_s1[Y][Oe]=F.nb_s2[Y][Oe]=1;for(var ct=0;ct<s.SBMAX_l;ct++)F.en[Y].l[ct]=1e20,F.thm[Y].l[ct]=1e20;for(var Oe=0;Oe<3;++Oe){for(var ct=0;ct<s.SBMAX_s;ct++)F.en[Y].s[ct][Oe]=1e20,F.thm[Y].s[ct][Oe]=1e20;F.nsPsy.lastAttacks[Y]=0}for(var Oe=0;Oe<9;Oe++)F.nsPsy.last_en_subshort[Y][Oe]=10}for(F.loudness_sq_save[0]=F.loudness_sq_save[1]=0,F.npart_l=at(F.numlines_l,F.bo_l,F.bm_l,ye,st,F.mld_l,F.PSY.bo_l_weight,nt,s.BLKSIZE,F.scalefac_band.l,s.BLKSIZE/(2*576),s.SBMAX_l),Y=0;Y<F.npart_l;Y++){var Ze=ve;ye[Y]>=be&&(Ze=me*(ye[Y]-be)/(ie-be)+ve*(ie-ye[Y])/(ie-be)),Ge[Y]=Math.pow(10,Ze/10),F.numlines_l[Y]>0?F.rnumlines_l[Y]=1/F.numlines_l[Y]:F.rnumlines_l[Y]=0}F.s3_ll=lt(F.s3ind,F.npart_l,ye,st,Ge,we);var Oe=0;for(Y=0;Y<F.npart_l;Y++){var et;et=Se.MAX_VALUE;for(var pt=0;pt<F.numlines_l[Y];pt++,Oe++){var Ee=nt*Oe/(1e3*s.BLKSIZE),ze;ze=this.ATHformula(Ee*1e3,Q)-20,ze=Math.pow(10,.1*ze),ze*=F.numlines_l[Y],et>ze&&(et=ze)}F.ATH.cb_l[Y]=et,et=-20+ye[Y]*20/10,et>6&&(et=100),et<-15&&(et=-15),et-=8,F.minval_l[Y]=Math.pow(10,et/10)*F.numlines_l[Y]}for(F.npart_s=at(F.numlines_s,F.bo_s,F.bm_s,ye,st,F.mld_s,F.PSY.bo_s_weight,nt,s.BLKSIZE_s,F.scalefac_band.s,s.BLKSIZE_s/384,s.SBMAX_s),Oe=0,Y=0;Y<F.npart_s;Y++){var et,Ze=xe;ye[Y]>=be&&(Ze=Pe*(ye[Y]-be)/(ie-be)+xe*(ie-ye[Y])/(ie-be)),Ge[Y]=Math.pow(10,Ze/10),et=Se.MAX_VALUE;for(var pt=0;pt<F.numlines_s[Y];pt++,Oe++){var Ee=nt*Oe/(1e3*s.BLKSIZE_s),ze;ze=this.ATHformula(Ee*1e3,Q)-20,ze=Math.pow(10,.1*ze),ze*=F.numlines_s[Y],et>ze&&(et=ze)}F.ATH.cb_s[Y]=et,et=-7+ye[Y]*7/12,ye[Y]>12&&(et*=1+Math.log(1+et)*3.1),ye[Y]<12&&(et*=1+Math.log(1-et)*2.3),et<-15&&(et=-15),et-=8,F.minval_s[Y]=Math.pow(10,et/10)*F.numlines_s[Y]}F.s3_ss=lt(F.s3ind_s,F.npart_s,ye,st,Ge,we),q(),p.init_fft(F),F.decay=Math.exp(-1*P/(O*nt/192));{var Ie;Ie=i,(Q.exp_nspsytune&2)!=0&&(Ie=1),Math.abs(Q.msfix)>0&&(Ie=Q.msfix),Q.msfix=Ie;for(var ot=0;ot<F.npart_l;ot++)F.s3ind[ot][1]>F.npart_l-1&&(F.s3ind[ot][1]=F.npart_l-1)}var Dt=576*F.mode_gr/nt;if(F.ATH.decay=Math.pow(10,-12/10*Dt),F.ATH.adjust=.01,F.ATH.adjustLimit=1,Q.ATHtype!=-1){var Ee,yt=Q.out_samplerate/s.BLKSIZE,Je=0;for(Ee=0,Y=0;Y<s.BLKSIZE/2;++Y)Ee+=yt,F.ATH.eql_w[Y]=1/Math.pow(10,this.ATHformula(Ee,Q)/10),Je+=F.ATH.eql_w[Y];for(Je=1/Je,Y=s.BLKSIZE/2;--Y>=0;)F.ATH.eql_w[Y]*=Je}{for(var ot=Oe=0;ot<F.npart_s;++ot)for(Y=0;Y<F.numlines_s[ot];++Y)++Oe;for(var ot=Oe=0;ot<F.npart_l;++ot)for(Y=0;Y<F.numlines_l[ot];++Y)++Oe}for(Oe=0,Y=0;Y<F.npart_l;Y++){var Ee=nt*(Oe+F.numlines_l[Y]/2)/(1*s.BLKSIZE);F.mld_cb_l[Y]=mt(Ee),Oe+=F.numlines_l[Y]}for(;Y<s.CBANDS;++Y)F.mld_cb_l[Y]=1;for(Oe=0,Y=0;Y<F.npart_s;Y++){var Ee=nt*(Oe+F.numlines_s[Y]/2)/(1*s.BLKSIZE_s);F.mld_cb_s[Y]=mt(Ee),Oe+=F.numlines_s[Y]}for(;Y<s.CBANDS;++Y)F.mld_cb_s[Y]=1;return 0};function Lt(Q,F){Q<-.3&&(Q=3410),Q/=1e3,Q=Math.max(.1,Q);var Y=3.64*Math.pow(Q,-.8)-6.8*Math.exp(-.6*Math.pow(Q-3.4,2))+6*Math.exp(-.15*Math.pow(Q-8.7,2))+(.6+.04*F)*.001*Math.pow(Q,4);return Y}this.ATHformula=function(Q,F){var Y;switch(F.ATHtype){case 0:Y=Lt(Q,9);break;case 1:Y=Lt(Q,-1);break;case 2:Y=Lt(Q,0);break;case 3:Y=Lt(Q,1)+6;break;case 4:Y=Lt(Q,F.ATHcurve);break;default:Y=Lt(Q,0);break}return Y}}function ge(){var p=this,P=128*1024;ge.V9=410,ge.V8=420,ge.V7=430,ge.V6=440,ge.V5=450,ge.V4=460,ge.V3=470,ge.V2=480,ge.V1=490,ge.V0=500,ge.R3MIX=1e3,ge.STANDARD=1001,ge.EXTREME=1002,ge.INSANE=1003,ge.STANDARD_FAST=1004,ge.EXTREME_FAST=1005,ge.MEDIUM=1006,ge.MEDIUM_FAST=1007;var U=16384+P;ge.LAME_MAXMP3BUFFER=U;var S,ae,L,D,le,O=new Te,G,h;this.enc=new s,this.setModules=function(r,l,Z,H,K,se,ce,he,Re){S=r,ae=l,L=Z,D=H,le=K,G=se,h=he,this.enc.setModules(ae,O,D,G)};function $(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=M(s.SBMAX_l),this.bo_s_weight=M(s.SBMAX_s)}function i(){this.lowerlimit=0}function R(r,l){this.lowpass=l}var T=4294479419;function d(r){var l;return r.class_id=T,l=r.internal_flags=new ke,r.mode=Ce.NOT_SET,r.original=1,r.in_samplerate=44100,r.num_channels=2,r.num_samples=-1,r.bWriteVbrTag=!0,r.quality=-1,r.short_blocks=null,l.subblock_gain=-1,r.lowpassfreq=0,r.highpassfreq=0,r.lowpasswidth=-1,r.highpasswidth=-1,r.VBR=te.vbr_off,r.VBR_q=4,r.ATHcurve=-1,r.VBR_mean_bitrate_kbps=128,r.VBR_min_bitrate_kbps=0,r.VBR_max_bitrate_kbps=0,r.VBR_hard_min=0,l.VBR_min_bitrate=1,l.VBR_max_bitrate=13,r.quant_comp=-1,r.quant_comp_short=-1,r.msfix=-1,l.resample_ratio=1,l.OldValue[0]=180,l.OldValue[1]=180,l.CurrentStep[0]=4,l.CurrentStep[1]=4,l.masking_lower=1,l.nsPsy.attackthre=-1,l.nsPsy.attackthre_s=-1,r.scale=-1,r.athaa_type=-1,r.ATHtype=-1,r.athaa_loudapprox=-1,r.athaa_sensitivity=0,r.useTemporal=null,r.interChRatio=-1,l.mf_samples_to_encode=s.ENCDELAY+s.POSTDELAY,r.encoder_padding=0,l.mf_size=s.ENCDELAY-s.MDCTDELAY,r.findReplayGain=!1,r.decode_on_the_fly=!1,l.decode_on_the_fly=!1,l.findReplayGain=!1,l.findPeakSample=!1,l.RadioGain=0,l.AudiophileGain=0,l.noclipGainChange=0,l.noclipScale=-1,r.preset=0,r.write_id3tag_automatic=!0,0}this.lame_init=function(){var r=new bt;return d(r),r.lame_allocated_gfp=1,r};function g(r){return r>1?0:r<=0?1:Math.cos(Math.PI/2*r)}this.nearestBitrateFullIndex=function(r){var l=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],Z=0,H=0,K=0,se=0;se=l[16],K=16,H=l[16],Z=16;for(var ce=0;ce<16;ce++)if(Math.max(r,l[ce+1])!=r){se=l[ce+1],K=ce+1,H=l[ce],Z=ce;break}return se-r>r-H?Z:K};function y(r,l){switch(r){case 44100:return l.version=1,0;case 48e3:return l.version=1,1;case 32e3:return l.version=1,2;case 22050:return l.version=0,0;case 24e3:return l.version=0,1;case 16e3:return l.version=0,2;case 11025:return l.version=0,0;case 12e3:return l.version=0,1;case 8e3:return l.version=0,2;default:return l.version=0,-1}}function C(r,l,Z){Z<16e3&&(l=2);for(var H=W.bitrate_table[l][1],K=2;K<=14;K++)W.bitrate_table[l][K]>0&&Math.abs(W.bitrate_table[l][K]-r)<Math.abs(H-r)&&(H=W.bitrate_table[l][K]);return H}function v(r,l,Z){Z<16e3&&(l=2);for(var H=0;H<=14;H++)if(W.bitrate_table[l][H]>0&&W.bitrate_table[l][H]==r)return H;return-1}function w(r,l){var Z=[new R(8,2e3),new R(16,3700),new R(24,3900),new R(32,5500),new R(40,7e3),new R(48,7500),new R(56,1e4),new R(64,11e3),new R(80,13500),new R(96,15100),new R(112,15600),new R(128,17e3),new R(160,17500),new R(192,18600),new R(224,19400),new R(256,19700),new R(320,20500)],H=p.nearestBitrateFullIndex(l);r.lowerlimit=Z[H].lowpass}function t(r){var l=r.internal_flags,Z=32;if(l.lowpass1>0){for(var H=999,K=0;K<=31;K++){var se=K/31;se>=l.lowpass2&&(Z=Math.min(Z,K)),l.lowpass1<se&&se<l.lowpass2&&(H=Math.min(H,K))}H==999?l.lowpass1=(Z-.75)/31:l.lowpass1=(H-.75)/31,l.lowpass2=Z/31}l.highpass2>0&&a(),l.highpass2>0&&a();for(var K=0;K<32;K++){var ce,he,se=K/31;l.highpass2>l.highpass1?a():ce=1,l.lowpass2>l.lowpass1?he=g((se-l.lowpass1)/(l.lowpass2-l.lowpass1+1e-20)):he=1,l.amp_filter[K]=ce*he}}function B(r){var l=r.internal_flags;switch(r.quality){default:case 9:l.psymodel=0,l.noise_shaping=0,l.noise_shaping_amp=0,l.noise_shaping_stop=0,l.use_best_huffman=0,l.full_outer_loop=0;break;case 8:r.quality=7;case 7:l.psymodel=1,l.noise_shaping=0,l.noise_shaping_amp=0,l.noise_shaping_stop=0,l.use_best_huffman=0,l.full_outer_loop=0;break;case 6:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.noise_shaping_amp=0,l.noise_shaping_stop=0,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=0,l.full_outer_loop=0;break;case 5:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.noise_shaping_amp=0,l.noise_shaping_stop=0,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=0,l.full_outer_loop=0;break;case 4:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.noise_shaping_amp=0,l.noise_shaping_stop=0,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=1,l.full_outer_loop=0;break;case 3:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.noise_shaping_amp=1,l.noise_shaping_stop=1,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=1,l.full_outer_loop=0;break;case 2:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.substep_shaping==0&&(l.substep_shaping=2),l.noise_shaping_amp=1,l.noise_shaping_stop=1,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=1,l.full_outer_loop=0;break;case 1:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.substep_shaping==0&&(l.substep_shaping=2),l.noise_shaping_amp=2,l.noise_shaping_stop=1,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=1,l.full_outer_loop=0;break;case 0:l.psymodel=1,l.noise_shaping==0&&(l.noise_shaping=1),l.substep_shaping==0&&(l.substep_shaping=2),l.noise_shaping_amp=2,l.noise_shaping_stop=1,l.subblock_gain==-1&&(l.subblock_gain=1),l.use_best_huffman=1,l.full_outer_loop=0;break}}function x(r){var l=r.internal_flags;r.frameNum=0,r.write_id3tag_automatic&&h.id3tag_write_v2(r),l.bitrate_stereoMode_Hist=A([16,5]),l.bitrate_blockType_Hist=A([16,6]),l.PeakSample=0,r.bWriteVbrTag&&G.InitVbrTag(r)}this.lame_init_params=function(r){var l=r.internal_flags;if(l.Class_ID=0,l.ATH==null&&(l.ATH=new Tt),l.PSY==null&&(l.PSY=new $),l.rgdata==null&&(l.rgdata=new wt),l.channels_in=r.num_channels,l.channels_in==1&&(r.mode=Ce.MONO),l.channels_out=r.mode==Ce.MONO?1:2,l.mode_ext=s.MPG_MD_MS_LR,r.mode==Ce.MONO&&(r.force_ms=!1),r.VBR==te.vbr_off&&r.VBR_mean_bitrate_kbps!=128&&r.brate==0&&(r.brate=r.VBR_mean_bitrate_kbps),r.VBR==te.vbr_off||r.VBR==te.vbr_mtrh||r.VBR==te.vbr_mt||(r.free_format=!1),r.VBR==te.vbr_off&&r.brate==0&&a(),r.VBR==te.vbr_off&&r.compression_ratio>0&&a(),r.out_samplerate!=0&&(r.out_samplerate<16e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,64)):r.out_samplerate<32e3?(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,8),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,160)):(r.VBR_mean_bitrate_kbps=Math.max(r.VBR_mean_bitrate_kbps,32),r.VBR_mean_bitrate_kbps=Math.min(r.VBR_mean_bitrate_kbps,320))),r.lowpassfreq==0){var Z=16e3;switch(r.VBR){case te.vbr_off:{var H=new i;w(H,r.brate),Z=H.lowerlimit;break}case te.vbr_abr:{var H=new i;w(H,r.VBR_mean_bitrate_kbps),Z=H.lowerlimit;break}case te.vbr_rh:a();default:a()}r.mode==Ce.MONO&&(r.VBR==te.vbr_off||r.VBR==te.vbr_abr)&&(Z*=1.5),r.lowpassfreq=Z|0}switch(r.out_samplerate==0&&a(),r.lowpassfreq=Math.min(20500,r.lowpassfreq),r.lowpassfreq=Math.min(r.out_samplerate/2,r.lowpassfreq),r.VBR==te.vbr_off&&(r.compression_ratio=r.out_samplerate*16*l.channels_out/(1e3*r.brate)),r.VBR==te.vbr_abr&&a(),r.bWriteVbrTag||(r.findReplayGain=!1,r.decode_on_the_fly=!1,l.findPeakSample=!1),l.findReplayGain=r.findReplayGain,l.decode_on_the_fly=r.decode_on_the_fly,l.decode_on_the_fly&&(l.findPeakSample=!0),l.findReplayGain&&a(),l.decode_on_the_fly&&!r.decode_only&&a(),l.mode_gr=r.out_samplerate<=24e3?1:2,r.framesize=576*l.mode_gr,r.encoder_delay=s.ENCDELAY,l.resample_ratio=r.in_samplerate/r.out_samplerate,r.VBR){case te.vbr_mt:case te.vbr_rh:case te.vbr_mtrh:{var K=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];r.compression_ratio=K[r.VBR_q]}break;case te.vbr_abr:r.compression_ratio=r.out_samplerate*16*l.channels_out/(1e3*r.VBR_mean_bitrate_kbps);break;default:r.compression_ratio=r.out_samplerate*16*l.channels_out/(1e3*r.brate);break}r.mode==Ce.NOT_SET&&(r.mode=Ce.JOINT_STEREO),r.highpassfreq>0?a():(l.highpass1=0,l.highpass2=0),r.lowpassfreq>0?(l.lowpass2=2*r.lowpassfreq,r.lowpasswidth>=0?a():l.lowpass1=2*r.lowpassfreq,l.lowpass1/=r.out_samplerate,l.lowpass2/=r.out_samplerate):a(),t(r),l.samplerate_index=y(r.out_samplerate,r),l.samplerate_index<0&&a(),r.VBR==te.vbr_off?r.free_format?l.bitrate_index=0:(r.brate=C(r.brate,r.version,r.out_samplerate),l.bitrate_index=v(r.brate,r.version,r.out_samplerate),l.bitrate_index<=0&&a()):l.bitrate_index=1,r.analysis&&(r.bWriteVbrTag=!1),l.pinfo!=null&&(r.bWriteVbrTag=!1),ae.init_bit_stream_w(l);for(var se=l.samplerate_index+3*r.version+6*(r.out_samplerate<16e3?1:0),ce=0;ce<s.SBMAX_l+1;ce++)l.scalefac_band.l[ce]=D.sfBandIndex[se].l[ce];for(var ce=0;ce<s.PSFB21+1;ce++){var he=(l.scalefac_band.l[22]-l.scalefac_band.l[21])/s.PSFB21,Re=l.scalefac_band.l[21]+ce*he;l.scalefac_band.psfb21[ce]=Re}l.scalefac_band.psfb21[s.PSFB21]=576;for(var ce=0;ce<s.SBMAX_s+1;ce++)l.scalefac_band.s[ce]=D.sfBandIndex[se].s[ce];for(var ce=0;ce<s.PSFB12+1;ce++){var he=(l.scalefac_band.s[13]-l.scalefac_band.s[12])/s.PSFB12,Re=l.scalefac_band.s[12]+ce*he;l.scalefac_band.psfb12[ce]=Re}l.scalefac_band.psfb12[s.PSFB12]=192,r.version==1?l.sideinfo_len=l.channels_out==1?21:36:l.sideinfo_len=l.channels_out==1?13:21,r.error_protection&&(l.sideinfo_len+=2),x(r),l.Class_ID=T;{var He;for(He=0;He<19;He++)l.nsPsy.pefirbuf[He]=700*l.mode_gr*l.channels_out;r.ATHtype==-1&&(r.ATHtype=4)}switch(r.VBR){case te.vbr_mt:r.VBR=te.vbr_mtrh;case te.vbr_mtrh:{r.useTemporal==null&&(r.useTemporal=!1),L.apply_preset(r,500-r.VBR_q*10,0),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),r.quality<5&&(r.quality=0),r.quality>5&&(r.quality=5),l.PSY.mask_adjust=r.maskingadjust,l.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?l.sfb21_extra=!1:l.sfb21_extra=r.out_samplerate>44e3,l.iteration_loop=new VBRNewIterationLoop(le);break}case te.vbr_rh:{L.apply_preset(r,500-r.VBR_q*10,0),l.PSY.mask_adjust=r.maskingadjust,l.PSY.mask_adjust_short=r.maskingadjust_short,r.experimentalY?l.sfb21_extra=!1:l.sfb21_extra=r.out_samplerate>44e3,r.quality>6&&(r.quality=6),r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),l.iteration_loop=new VBROldIterationLoop(le);break}default:{var $e;l.sfb21_extra=!1,r.quality<0&&(r.quality=LAME_DEFAULT_QUALITY),$e=r.VBR,$e==te.vbr_off&&(r.VBR_mean_bitrate_kbps=r.brate),L.apply_preset(r,r.VBR_mean_bitrate_kbps,0),r.VBR=$e,l.PSY.mask_adjust=r.maskingadjust,l.PSY.mask_adjust_short=r.maskingadjust_short,$e==te.vbr_off?l.iteration_loop=new Rt(le):a();break}}return r.VBR!=te.vbr_off&&a(),r.tune&&a(),B(r),r.athaa_type<0?l.ATH.useAdjust=3:l.ATH.useAdjust=r.athaa_type,l.ATH.aaSensitivityP=Math.pow(10,r.athaa_sensitivity/-10),r.short_blocks==null&&(r.short_blocks=re.short_block_allowed),r.short_blocks==re.short_block_allowed&&(r.mode==Ce.JOINT_STEREO||r.mode==Ce.STEREO)&&(r.short_blocks=re.short_block_coupled),r.quant_comp<0&&(r.quant_comp=1),r.quant_comp_short<0&&(r.quant_comp_short=0),r.msfix<0&&(r.msfix=0),r.exp_nspsytune=r.exp_nspsytune|1,r.internal_flags.nsPsy.attackthre<0&&(r.internal_flags.nsPsy.attackthre=Te.NSATTACKTHRE),r.internal_flags.nsPsy.attackthre_s<0&&(r.internal_flags.nsPsy.attackthre_s=Te.NSATTACKTHRE_S),r.scale<0&&(r.scale=1),r.ATHtype<0&&(r.ATHtype=4),r.ATHcurve<0&&(r.ATHcurve=4),r.athaa_loudapprox<0&&(r.athaa_loudapprox=2),r.interChRatio<0&&(r.interChRatio=0),r.useTemporal==null&&(r.useTemporal=!0),l.slot_lag=l.frac_SpF=0,r.VBR==te.vbr_off&&(l.slot_lag=l.frac_SpF=(r.version+1)*72e3*r.brate%r.out_samplerate|0),D.iteration_init(r),O.psymodel_init(r),0};function q(r,l){(r.in_buffer_0==null||r.in_buffer_nsamples<l)&&(r.in_buffer_0=M(l),r.in_buffer_1=M(l),r.in_buffer_nsamples=l)}this.lame_encode_flush=function(r,l,Z,H){var K=r.internal_flags,se=de([2,1152]),ce=0,he,Re,He,$e,ut=K.mf_samples_to_encode-s.POSTDELAY,ft=m(r);if(K.mf_samples_to_encode<1)return 0;for(he=0,r.in_samplerate!=r.out_samplerate&&a(),He=r.framesize-ut%r.framesize,He<576&&(He+=r.framesize),r.encoder_padding=He,$e=(ut+He)/r.framesize;$e>0&&ce>=0;){var at=ft-K.mf_size,lt=r.frameNum;at*=r.in_samplerate,at/=r.out_samplerate,at>1152&&(at=1152),at<1&&(at=1),Re=H-he,H==0&&(Re=0),ce=this.lame_encode_buffer(r,se[0],se[1],at,l,Z,Re),Z+=ce,he+=ce,$e-=lt!=r.frameNum?1:0}return K.mf_samples_to_encode=0,ce<0||(Re=H-he,H==0&&(Re=0),ae.flush_bitstream(r),ce=ae.copy_buffer(K,l,Z,Re,1),ce<0)?ce:(Z+=ce,he+=ce,Re=H-he,H==0&&(Re=0),r.write_id3tag_automatic&&a(),he)},this.lame_encode_buffer=function(r,l,Z,H,K,se,ce){var he=r.internal_flags,Re=[null,null];if(he.Class_ID!=T)return-3;if(H==0)return 0;q(he,H),Re[0]=he.in_buffer_0,Re[1]=he.in_buffer_1;for(var He=0;He<H;He++)Re[0][He]=l[He],he.channels_in>1&&(Re[1][He]=Z[He]);return _(r,Re[0],Re[1],H,K,se,ce)};function m(r){var l=s.BLKSIZE+r.framesize-s.FFTOFFSET;return l=Math.max(l,512+r.framesize-32),l}function _(r,l,Z,H,K,se,ce){var he=r.internal_flags,Re=0,He,$e,ut,ft,at,lt=[null,null],mt=[null,null];if(he.Class_ID!=T)return-3;if(H==0)return 0;if(at=ae.copy_buffer(he,K,se,ce,0),at<0)return at;if(se+=at,Re+=at,mt[0]=l,mt[1]=Z,We.NEQ(r.scale,0)&&We.NEQ(r.scale,1))for($e=0;$e<H;++$e)mt[0][$e]*=r.scale,he.channels_out==2&&(mt[1][$e]*=r.scale);if(We.NEQ(r.scale_left,0)&&We.NEQ(r.scale_left,1))for($e=0;$e<H;++$e)mt[0][$e]*=r.scale_left;if(We.NEQ(r.scale_right,0)&&We.NEQ(r.scale_right,1))for($e=0;$e<H;++$e)mt[1][$e]*=r.scale_right;r.num_channels==2&&he.channels_out==1&&a(),ft=m(r),lt[0]=he.mfbuf[0],lt[1]=he.mfbuf[1];for(var Lt=0;H>0;){var Q=[null,null],F=0,Y=0;Q[0]=mt[0],Q[1]=mt[1];var we=new k;if(N(r,lt,Q,Lt,H,we),F=we.n_in,Y=we.n_out,he.findReplayGain&&!he.decode_on_the_fly&&S.AnalyzeSamples(he.rgdata,lt[0],he.mf_size,lt[1],he.mf_size,Y,he.channels_out)==De.GAIN_ANALYSIS_ERROR)return-6;if(H-=F,Lt+=F,he.channels_out==2,he.mf_size+=Y,he.mf_samples_to_encode<1&&a(),he.mf_samples_to_encode+=Y,he.mf_size>=ft){var be=ce-Re;if(ce==0&&(be=0),He=b(r,lt[0],lt[1],K,se,be),He<0)return He;for(se+=He,Re+=He,he.mf_size-=r.framesize,he.mf_samples_to_encode-=r.framesize,ut=0;ut<he.channels_out;ut++)for($e=0;$e<he.mf_size;$e++)lt[ut][$e]=lt[ut][$e+r.framesize]}}return Re}function b(r,l,Z,H,K,se){var ce=p.enc.lame_encode_mp3_frame(r,l,Z,H,K,se);return r.frameNum++,ce}function k(){this.n_in=0,this.n_out=0}function N(r,l,Z,H,K,se){var ce=r.internal_flags;if(ce.resample_ratio<.9999||ce.resample_ratio>1.0001)a();else{se.n_out=Math.min(r.framesize,K),se.n_in=se.n_out;for(var he=0;he<se.n_out;++he)l[0][ce.mf_size+he]=Z[0][H+he],ce.channels_out==2&&(l[1][ce.mf_size+he]=Z[1][H+he])}}}function it(){this.setModules=function(p,P){}}function Fe(){this.setModules=function(p,P,U){}}function qe(){}function Le(){this.setModules=function(p,P){}}function Qe(p,P,U){p!=1&&a("fix cc: only supports mono");var S=new ge,ae=new it,L=new De,D=new We,le=new Ne,O=new tt,G=new Qt,h=new _t,$=new Be,i=new Le,R=new Ye,T=new Ve,d=new Fe,g=new qe;S.setModules(L,D,le,O,G,h,$,i,g),D.setModules(L,g,$,h),i.setModules(D,$),le.setModules(S),G.setModules(D,R,O,T),O.setModules(T,R,S.enc.psy),R.setModules(D),T.setModules(O),h.setModules(S,D,$),ae.setModules(d,g),d.setModules($,i,le);var y=S.lame_init();y.num_channels=p,y.in_samplerate=P,y.out_samplerate=P,y.brate=U,y.mode=Ce.STEREO,y.quality=3,y.bWriteVbrTag=!1,y.disable_reservoir=!0,y.write_id3tag_automatic=!1,S.lame_init_params(y);var C=1152,v=0|1.25*C+7200,w=c(v);this.encodeBuffer=function(t,B){p==1&&(B=t),t.length>C&&(C=t.length,v=0|1.25*C+7200,w=c(v));var x=S.lame_encode_buffer(y,t,B,t.length,w,0,v);return new Int8Array(w.subarray(0,x))},this.flush=function(){var t=S.lame_encode_flush(y,w,0,v);return new Int8Array(w.subarray(0,t))}}pe.SFBMAX=s.SBMAX_s*3,e.Mp3Encoder=Qe}e(),o.lamejs=e})),mn}Nr();window.Quill=qn;window.Tribute=zt;window.Recorder=Or;window.preety=function(o){let{response:e,category:n,raw:a}=o;try{e=typeof e=="string"?JSON.parse(e):e,n=typeof n=="string"?JSON.parse(n):n,a=typeof a=="string"?JSON.parse(a):a}catch(c){console.error("JSON Parsing Error:",c)}e&&document.getElementById("json1")&&(document.getElementById("json1").innerHTML=M0.toHtml(e)),a&&document.getElementById("datas")&&(document.getElementById("datas").innerHTML=M0.toHtml(a)),n&&document.getElementById("raw")&&(document.getElementById("raw").innerHTML=M0.toHtml(n))};function jr(){const o=document.getElementById("emoji-picker-container"),e=document.getElementById("emoji-picker"),n=document.getElementById("textMessageInput");if(!o||!e||!n)return;e.innerHTML="";const a=new D0({onEmojiSelect:c=>{n.value+=c.native,n.dispatchEvent(new Event("input"))}});e.appendChild(a)}window.initializeEmojiPicker=jr;
